!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(){c=!1,a.length?u=a.concat(u):f=-1,u.length&&i()}function i(){if(!c){var t=setTimeout(r);c=!0;for(var e=u.length;e;){for(a=u,u=[];++f<e;)a&&a[f].run();f=-1,e=u.length}a=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,l=e.exports={},u=[],c=!1,f=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new o(t,e)),1!==u.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],2:[function(t,e,n){"use strict";function r(t,e){if(e.length<1)throw new Error("an objects array must contain at least 1 object");for(var n=e[0],r=t.distanceTo(n.location),i=1;i<e.length;++i){var o=t.distanceTo(e[i].location);r>o&&(n=e[i],r=o)}return n}function i(t,e,n,r){void 0===r&&(r=!1);var i=e.filter(function(e){return t.distanceTo(e.location)<=n});return r&&i.sort(function(e,n){return t.distanceTo(e.location)-t.distanceTo(n.location)}),i}function o(t){for(var e=0,n=0,r=0;r<t.length;++r)e+=t[r].lat,n+=t[r].lng;return new s.LatLng(e/t.length,n/t.length)}var s=window.L;n.findClosestObject=r,n.findObjectsWithinRadius=i,n.getCenter=o},{}],3:[function(t,e,n){var r=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},window.L),i=function(){function t(t,e){void 0===e&&(e=null),this.layerControl=r.control.UniForm(t,e,{collapsed:!1,position:"topright"})}return t.prototype.addTo=function(t){this.layerControl.addTo(t),this.layerControl.renderUniformControl()},t}();n.LayerControl=i;var o=function(){function t(t){var e=t.getOverlay(),n=t.getMap(),i=new r.Polyline([],{color:"red"});i.addTo(n);var o=new r.CircleMarker([60,30]);e.addEventListener("click",function(t){if(t.shiftKey){var e=n.containerPointToLatLng(new r.Point(t.x,t.y));i.addLatLng(e).redraw(),o.on("mouseout",function(t){return o.closePopup()}),o.addTo(n);var s=i.getLatLngs();if(s.length>1){for(var a=0,l=1;l<s.length;++l)a+=s[l-1].distanceTo(s[l]);r.popup().setLatLng(e).setContent("Popup").openOn(n)}}})}return t}();n.Measurement=o},{}],4:[function(t,e,n){function r(t,e){var n=this,r=[t.source,t.target],i=["source","target"];i.forEach(function(a,l){Object.defineProperty(t,a,{get:function(){return t["_"+a]},set:function(r){var u=document.getElementById("p-"+r),c=Number(u.getAttribute("r"))/2+parseFloat(getComputedStyle(u).getPropertyValue("stroke-width")),f=n.platformsOnSVG[r];if("line"===e[0].tagName){for(var d=l+1,h=n.platformsOnSVG[t[i[1-l]]],m=0;m<e.length;m++){var p=e[m];p.setAttribute("x"+d,f.x.toString()),p.setAttribute("y"+d,f.y.toString())}var g=document.getElementById("g-"+n.graph.transfers.indexOf(t)),v="source"===a?h.subtract(f):f.subtract(h);o.setGradientDirection(g,v);var y=c/f.distanceTo(h);o.setGradientOffset(g,y)}else{if("path"!==e[0].tagName)throw new Error("wrong element type for transfer");for(var b=[],_=[],x=0;x<n.graph.transfers.length;++x){var w=n.graph.transfers[x];if((w.source===t.source||w.target===t.target||w.source===t.target||w.target===t.source)&&(b.push(w),_.push(x),3===b.length))break}for(var k=new Set,O=0;O<b.length;O++){var j=b[O];k.add(j.source).add(j.target)}if(3!==k.size){var E=n.graph.platforms[b[0].source].name;throw new Error("circle size is "+k.size+": "+E)}var S=[];k.forEach(function(t){return S.push(n.platformsOnSVG[t])});for(var T=s.getCircumcenter(S),C=_.map(function(t){return document.getElementById("ot-"+t)}),M=_.map(function(t){return document.getElementById("it-"+t)}),x=0;3>x;++x){var j=b[x],L=C[x],P=M[x],A=n.platformsOnSVG[j.source],z=n.platformsOnSVG[j.target];o.setCircularPath(L,T,A,z),P.setAttribute("d",L.getAttribute("d"));var g=document.getElementById("g-"+_[x]);o.setGradientDirection(g,z.subtract(A));var y=c/A.distanceTo(z);o.setGradientOffset(g,y)}}}}),t["_"+a]=r[l]})}function i(t,e){var n=this,r="number"==typeof t?[t,this.graph.platforms[t]]:[this.graph.platforms.indexOf(t),t],i=r[0],s=r[1],a=s.location;Object.defineProperty(s,"location",{get:function(){return s._location},set:function(t){s._location=t;for(var r=n.map.getZoom()<12?n.graph.stations[s.station].location:t,a=n.map.latLngToContainerPoint(r).subtract(n.map.latLngToContainerPoint(n.bounds.getNorthWest())),l=0;l<e.length;l++){var u=e[l];u.setAttribute("cx",a.x.toString()),u.setAttribute("cy",a.y.toString())}n.whiskers[i]=n.makeWhiskers(i),n.platformsOnSVG[i]=a;for(var c=new Set(s.spans),f=0,d=s.spans;f<d.length;f++){var h=d[f],m=n.graph.spans[h],p=m.source,g=m.target,v=i===p?g:p;n.whiskers[v]=n.makeWhiskers(v),n.graph.platforms[v].spans.forEach(function(t){return c.add(t)})}c.forEach(function(t){var e=n.graph.spans[t],r=e.source,i=e.target,s=[n.platformsOnSVG[r],n.whiskers[r][t],n.whiskers[i][t],n.platformsOnSVG[i]];o.setBezierPath(document.getElementById("op-"+t),s);var a=document.getElementById("ip-"+t);a&&o.setBezierPath(a,s)}),n.graph.transfers.filter(function(t){return t.source===i||t.target===i}).forEach(function(t){return t[i===t.source?"source":"target"]=i})}}),s._location=a}var o=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},t("./svg")),s=t("../util");n.transferToModel=r,n.platformToModel=i},{"../util":68,"./svg":10}],5:[function(t,e,n){var r=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},t("../util")),i=r.getUserLanguage();"ru"!==i&&"fi"!==i&&(i="en");var o={fromclick:{ru:"Otśuda",fi:"Tältä",en:"From here"},toclick:{ru:"Śuda",fi:"Tänne",en:"To here"},clearroute:{ru:"Očistiť maršrut",fi:"Tyhjennä reitti",en:"Clear route"}},s=function(){function t(t){var e=this;this.metroMap=t,t.getOverlay().addEventListener("contextmenu",function(n){n.preventDefault();var r,s=new L.Point(n.clientX,n.clientY);return e.state?r=document.getElementById("contextmenu"):(r=document.createElement("table"),Object.keys(o).forEach(function(t,e){var n=r.insertRow(e),s=n.insertCell(0);s.setAttribute("data-event",t),s.textContent=o[t][i]}),r.onclick=function(r){var i=r.target,o={clientX:n.clientX,clientY:n.clientY};t.dispatchEvent(new MouseEvent(i.getAttribute("data-event"),o)),e.state=!1},r.id="contextmenu",r.style.position="absolute",document.body.appendChild(r),e.state=!0),r.style.left=s.x+"px",r.style.top=s.y+"px",!1}),t.getOverlay().addEventListener("click",function(t){2!==t.button&&(e.state=!1)})}return Object.defineProperty(t.prototype,"state",{get:function(){return null!==document.getElementById("contextmenu")},set:function(t){t||document.body.removeChild(document.getElementById("contextmenu"))},enumerable:!0,configurable:!0}),t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"../util":68}],6:[function(t,e,n){var r=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},t("./metro-map")),i=t("../util");L.Browser.ie?alert("Does not work in IE (yet)"):L.Browser.mobile&&alert("May work incorrectly in mobile browser");var o=t("./polyfills");o["default"]();var s=t("./tilelayers");new r["default"]("map-container","json/graph.json",s["default"]);i.flashTitle(["Plan metro Sankt-Peterburga","Pietarin metron hankesuunnitelma","St Petersburg metro plan proposal"],3e3),console.log("user: "+navigator.userLanguage),console.log("language: "+navigator.language),console.log("browser: "+navigator.browserLanguage),console.log("system: "+navigator.systemLanguage)},{"../util":68,"./metro-map":8,"./polyfills":9,"./tilelayers":12}],7:[function(t,e,n){var r=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},t("../util")),i=t("./svg"),o=function(){function t(t){this.metroMap=t,document.getElementById("edit-map-button").addEventListener("click",this.editMapClick.bind(this))}return t.prototype.editMapClick=function(t){var e=this.metroMap.getMap(),n=this.metroMap.getPlate(),o=this.metroMap.getGraph(),s=t.target,a=["Edit Map","Save Map"],l=document.getElementById("dummy-circles");if(s.textContent===a[0])l.onmousedown=function(t){if(0===t.button){var r=i.platformByCircle(t.target,o);e.dragging.disable(),e.on("mousemove",function(t){r.location=t.latlng,n.disabled=!0}),e.once("mouseup",function(t){e.off("mousemove").dragging.enable(),n.disabled=!1,n.show(i.circleByDummy(t.originalEvent.target))})}else if(1===t.button){var r=i.platformByCircle(t.target,o),s=r.name,a=r.altNames.fi,l=r.altNames.en;n.show(i.circleByDummy(t.target));var u=l?[s,a,l]:a?[s,a]:[s];c=prompt("New name",u.join("|")).split("|"),r.name=c[0],r.altNames.fi=c[1],r.altNames.en=c[2]}var c},s.textContent=a[1];else{if(s.textContent!==a[1])throw new Error("Incorrect button text");var u=JSON.stringify(o,function(t,e){return t.startsWith("_")?void 0:e});r.downloadAsFile("graph.json",u),l.onmousedown=l.onclick=null,s.textContent=a[0]}},t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"../util":68,"./svg":10}],8:[function(t,e,n){var r=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},window.L),i=t("alertifyjs"),o=t("./svg"),s=t("../util"),a=t("./addons"),l=t("../geo"),u=t("./bind"),c=t("./mapeditor"),f=t("./textplate"),d=t("./contextmenu"),h=function(){function t(t,e,n){var i=this;this.whiskers=[],this.fromMarker=new r.Marker([0,0]),this.toMarker=new r.Marker([0,0]);var o=window.fetch,l=o(e).then(function(t){return t.json()}).then(function(t){return i.graph=t}),u=o("json/hints.json").then(function(t){return t.json()}).then(function(t){return i.hints=t}),f=o("json/data.json").then(function(t){return t.json()}).then(function(t){return i.textData=t});this.map=new r.Map(t,{center:new r.LatLng(59.943556,30.30452),zoom:r.Browser.retina?12:11,minZoom:9,inertia:!1}).addControl(new r.Control.Scale({imperial:!1})),console.log(n[Object.keys(n)[0]][0]),n[Object.keys(n)[0]].addTo(this.map),new a.LayerControl(n).addTo(this.map),console.log("map should be created by now"),this.overlay=document.getElementById("overlay");var h=this.map.getContainer();h.removeChild(this.overlay),h.appendChild(this.overlay),this.addMapListeners(),l["catch"](function(t){return alert(t)}).then(function(t){return i.extendBounds()}).then(function(){return u}).then(function(t){return i.redrawNetwork()}).then(function(){return i.map.invalidateSize(!1)}).then(function(){return i.resetMapView()}).then(function(){return i.map.addLayer(i.fromMarker).addLayer(i.toMarker)}).then(function(){return i.fixFontRendering()}).then(function(){return f}).then(function(){return new c["default"](i)}).then(function(){return new d["default"](i)}),Promise.all([l,u]).then(function(t){return s.verifyHints(i.graph,i.hints)}).then(function(t){return console.log(t)})["catch"](function(t){return console.error(t)})}return t.prototype.getMap=function(){return this.map},t.prototype.getOverlay=function(){return this.overlay},t.prototype.getPlate=function(){return this.plate},t.prototype.getGraph=function(){return this.graph},t.prototype.addEventListener=function(t,e){},t.prototype.dispatchEvent=function(t){return"clearroute"===t.type?(this.fromMarker.setLatLng([0,0]),this.toMarker.setLatLng([0,0]),this.resetStyle(),i.dismissAll(),void this.fixFontRendering()):(this.handleMenuFromTo(t),!1)},t.prototype.removeEventListener=function(t,e){},t.prototype.resetStyle=function(){for(var t="#paths-inner *, #paths-outer *, #transfers-inner *, #transfers-outer *, #station-circles *",e=document.querySelectorAll(t),n=0;n<e.length;++n){var r=e[n];r.style.opacity=null,"t"!==r.id.charAt(1)&&r.removeAttribute("filter")}},t.prototype.handleMenuFromTo=function(t){var e=new r.Point(t.clientX,t.clientY),n=this.map.getContainer().getBoundingClientRect(),i=new r.Point(n.left,n.top),o=this.map.containerPointToLatLng(e.subtract(i));console.log(o);var s="fromclick"===t.type?this.fromMarker:this.toMarker;s.setLatLng(o),console.log(this.fromMarker,this.toMarker);var a=new r.LatLng(0,0);this.fromMarker.getLatLng().equals(a)||this.toMarker.getLatLng().equals(a)||this.visualizeShortestPath(this.fromMarker.getLatLng(),this.toMarker.getLatLng()),this.fixFontRendering()},t.prototype.addMapListeners=function(){var t=this,e=this.map.getPanes().mapPane;this.map.on("movestart",function(e){console.log("move start"),t.map.touchZoom.disable(),r.Browser.webkit&&o.removeGradients()}).on("move",function(n){t.overlay.style.transform=e.style.transform}).on("moveend",function(n){console.log("move ended"),t.map.touchZoom.enable(),r.Browser.webkit&&o.addGradients(),t.fixFontRendering(),t.overlay.style.transform=e.style.transform}).on("zoomstart",function(e){t.map.dragging.disable(),console.log(e),t.overlay.style.opacity="0.5"}).on("zoomend",function(e){console.log(e),console.log("zoom ended"),t.redrawNetwork(),t.overlay.style.opacity=null,t.map.dragging.enable()})},t.prototype.fixFontRendering=function(){var t=document.querySelectorAll('img[style*="translate3d"]');console.log(t);for(var e=0;e<t.length;++e)s.replaceTransform(t[e]);s.replaceTransform(this.map.getPanes().mapPane)},t.prototype.resetMapView=function(){this.map.setView(this.bounds.getCenter(),r.Browser.retina?12:11,{pan:{animate:!1},zoom:{animate:!1}})},t.prototype.resetOverlayStructure=function(){for(var t;t=this.overlay.firstChild;)this.overlay.removeChild(t);var e=o.createSVGElement("defs");e.appendChild(o.makeDropShadow()),e.appendChild(o.makeShadowGlow()),this.overlay.appendChild(e);var n=o.createSVGElement("g");n.id="origin";for(var r=0,i=["paths-outer","paths-inner","transfers-outer","station-circles","transfers-inner","dummy-circles"];r<i.length;r++){var s=i[r],a=o.createSVGElement("g");a.id=s,n.appendChild(a)}this.overlay.appendChild(n),this.plate=new f["default"](this.graph),n.insertBefore(this.plate.element,document.getElementById("dummy-circles"))},t.prototype.extendBounds=function(){var t=this,e=this.graph.platforms[0].location;this.bounds=new r.LatLngBounds(e,e),this.graph.platforms.forEach(function(e){return t.bounds.extend(e.location)})},t.prototype.addBindings=function(){for(var t=this.graph.platforms,e=0;e<t.length;++e){var n=document.getElementById("p-"+e),r=document.getElementById("d-"+e);u.platformToModel.call(this,e,[n,r])}},t.prototype.posOnSVG=function(t,e){var n=this.map.latLngToContainerPoint(e);return n.subtract(t.min)},t.prototype.updateOverlayPositioning=function(){var t=this.bounds.getNorthWest(),e=this.bounds.getSouthEast(),n=new r.Bounds(this.map.latLngToContainerPoint(t),this.map.latLngToContainerPoint(e)),i=s.parseTransform(this.overlay.style.transform),o=n.getSize(),a=n.min.subtract(i).subtract(o);this.overlay.style.left=a.x+"px",this.overlay.style.top=a.y+"px";var l=o,u=document.getElementById("origin");u.style.transform="translate("+l.x+"px, "+l.y+"px)";var c=o.multiplyBy(3);this.overlay.style.width=c.x+"px",this.overlay.style.height=c.y+"px"},t.prototype.redrawNetwork=function(){var t=this;this.fromMarker.setLatLng([0,0]),this.toMarker.setLatLng([0,0]),this.resetOverlayStructure(),this.updateOverlayPositioning();var e={"station-circles":document.createDocumentFragment(),"dummy-circles":document.createDocumentFragment(),"paths-inner":document.createDocumentFragment(),"paths-outer":document.createDocumentFragment(),"transfers-inner":document.createDocumentFragment(),"transfers-outer":document.createDocumentFragment()},n=this.map.getZoom(),i=this.bounds.getNorthWest(),a=this.bounds.getSouthEast(),l=new r.Bounds(this.map.latLngToContainerPoint(i),this.map.latLngToContainerPoint(a));document.getElementById("edit-map-button").disabled=12>n;var c=12>n?function(e){return t.posOnSVG(l,t.graph.stations[e.station].location)}:function(e){return t.posOnSVG(l,e.location)};this.platformsOnSVG=this.graph.platforms.map(c);var f=.5*(n-7),d=12>n?1.25*f:f,h=12>n?.4*d:.6*d,m=.9*f,p=1.25*h;r.Browser.retina&&(Y=[f,d,h,m].map(function(t){return 1.5*t}),f=Y[0],d=Y[1],h=Y[2],m=Y[3]),document.getElementById("station-circles").style.strokeWidth=h+"px",document.getElementById("transfers-outer").style.strokeWidth=m+p/2+"px",document.getElementById("transfers-inner").style.strokeWidth=m-p/2+"px",document.getElementById("paths-outer").style.strokeWidth=f+"px",document.getElementById("paths-inner").style.strokeWidth=f/2+"px";for(var g=new Set,v=new Map,y=0;y<this.graph.stations.length;++y){for(var b=this.graph.stations[y],_=[],x=0,w=b.platforms;x<w.length;x++){var k=w[x],O=this.graph.platforms[k],j=this.platformsOnSVG[k];if(n>9){var E=o.makeCircle(j,d);if(E.id="p-"+k,n>11){for(var S=new Set,T=0,C=O.spans;T<C.length;T++)for(var M=C[T],L=0,P=this.graph.spans[M].routes;L<P.length;L++){var A=P[L];S.add(this.graph.routes[A].line)}if(1===S.size){var z=S.values().next().value.match(/([MEL])(\d{0,2})/);z&&E.classList.add("M"===z[1]?z[0]:z[1]+"-line")}}var B=o.makeCircle(j,2*d);B.id="d-"+k,e["station-circles"].appendChild(E),e["dummy-circles"].appendChild(B)}this.whiskers[k]=this.makeWhiskers(k)}var H=document.getElementById("dummy-circles");H.addEventListener("mouseover",function(e){return t.plate.show(o.circleByDummy(e.target))}),H.addEventListener("mouseout",function(e){return t.plate.hide()});for(var N=s.findCircle(this.graph,b),I=0,D=b.platforms;I<D.length;I++){var k=D[I],O=this.graph.platforms[k];N&&N.indexOf(O)>-1&&(_.push(this.platformsOnSVG[k]),g.add(k))}if(N&&3===N.length){var G=s.getCircumcenter(_);v.set(y,G)}}for(var R=s.lineRulesPromise.then(function(r){if(n>11)for(var i=0;i<t.graph.transfers.length;++i){var s=t.graph.transfers[i],a=void 0,l=t.graph.platforms[s.source],c=t.graph.platforms[s.target],f=t.platformsOnSVG[s.source],m=t.platformsOnSVG[s.target];if(g.has(s.source)&&g.has(s.target)){var p=v.get(l.station);a=o.makeTransferArc(p,f,m)}else f.x===m.x?m.x+=.01:f.y===m.y&&(m.y+=.01),a=o.makeTransfer(f,m);a[0].id="ot-"+i,a[1].id="it-"+i;var y=[l,c].map(function(e){var n=t.graph.spans[e.spans[0]],i=n.routes.map(function(e){return t.graph.routes[e]}),o=i[0].line.match(/([MEL])(\d{0,2})/),s=o[0],a=o[1];o[2];return r["L"===a?a:s]}),b=(d+h/2)/f.distanceTo(m),_=o.makeGradient(m.subtract(f),y,b);_.id="g-"+i;var x=document.getElementsByTagName("defs")[0];x.appendChild(_),a[0].style.stroke="url(#"+_.id+")",e["transfers-outer"].appendChild(a[0]),e["transfers-inner"].appendChild(a[1]),u.transferToModel.call(t,s,a)}}),F=0;F<this.graph.spans.length;++F){var W=this.makePath(F),V=W[0],U=W[1];e["paths-outer"].appendChild(V),U?e["paths-inner"].appendChild(U):this.graph.routes[this.graph.spans[F].routes[0]].line.startsWith("L")&&(V.style.strokeWidth=.75*f+"px")}R.then(function(){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];document.getElementById(i).appendChild(e[i])}t.addBindings()});var Y},t.prototype.makeWhiskers=function(t){var e=this,n=this.graph.platforms[t],r=this.platformsOnSVG[t];if(n.spans.length<2)return D={},D[n.spans[0]]=r,D;if(n.spans.length>2){var i=[[],[]],o=[[],[]],a=this.hints.crossPlatform,l=s.hintContainsLine(this.graph,a,n);if(n.name in a&&null!==l){for(var u=l>-1?a[n.name][l]:a[n.name],c=[],f=0,d=Object.keys(u);f<d.length;f++){var h=d[f],m=u[h];"string"==typeof m?c.push(m):c.push.apply(c,m)}for(var p=0,g=n.spans;p<g.length;p++){var v=g[p],y=this.graph.spans[v],b=y.source===t?y.target:y.source,_=this.graph.platforms[b],x=this.platformsOnSVG[b],w=c.indexOf(_.name)>-1?1:0;i[w].push(x),o[w].push(v)}}var k=i.map(function(t){return r.add(1===t.length?t[0]:0===t.length?r:s.getCenter(t)).divideBy(2)}),O=k.map(function(t){return r.distanceTo(t)}),j=k[1].subtract(k[0]).multiplyBy(O[0]/(O[0]+O[1])),E=k[0].add(j),S=r.subtract(E),T={};return o[0].forEach(function(t){return T[t]=k[0].add(S)}),o[1].forEach(function(t){return T[t]=k[1].add(S)}),T}var C=n.spans.map(function(t){return e.graph.routes[e.graph.spans[t].routes[0]].line});if(C[0]!==C[1])return G={},G[n.spans[0]]=r,G[n.spans[1]]=r,G;var M=[r,r],L=[0,0],P=this.graph.spans[n.spans[0]];P.source===t&&n.spans.reverse();for(var A=0;2>A;++A){var y=this.graph.spans[n.spans[A]],z=y.source===t?y.target:y.source,B=this.platformsOnSVG[z];L[A]=r.distanceTo(B),M[A]=r.add(B).divideBy(2)}var H=M[1].subtract(M[0]).multiplyBy(L[0]/(L[0]+L[1])),N=M[0].add(H),I=r.subtract(N);return R={},R[n.spans[0]]=M[0].add(I),R[n.spans[1]]=M[1].add(I),R;var D,G,R},t.prototype.makePath=function(t){var e=this,n=this.graph.spans[t],r=n.source,i=n.target,s=n.routes.map(function(t){return e.graph.routes[t]}),a=s[0].line.match(/([MEL])(\d{0,2})/),l=a[0],u=a[1],c=(a[2],[this.platformsOnSVG[r],this.whiskers[r][t],this.whiskers[i][t],this.platformsOnSVG[i]]),f=o.makeCubicBezier(c);if(f.id="op-"+t,"E"===u){f.classList.add("E");var d=f.cloneNode(!0);return d.id="ip-"+t,[f,d]}return l&&f.classList.add(l),f.classList.add(u+"-line"),[f]},t.prototype.visualizeShortestPath=function(t,e){var n=this;this.resetStyle(),i.dismissAll();var s=this.shortestPath(t,e);if("number"==typeof s)return i.error("walk on foot, lazybones!");for(var a=s.platforms,l=s.path,u=s.time,c="#paths-inner *, #paths-outer *, #transfers-inner *, #transfers-outer *, #station-circles *",f=document.querySelectorAll(c),d=0;d<f.length;++d)f[d].style.opacity="0.25";console.log(l),console.log(a.map(function(t){return n.graph.platforms[t].name}));var h=function(t){if(document.getElementById("p-"+a[t]).style.opacity=null,t>=l.length)return i.message("time:<br>"+Math.round(u.walkTo/60)+" mins on foot<br>"+Math.round(u.metro/60)+" mins by metro<br>"+Math.round(u.walkFrom/60)+" mins on foot<br>TOTAL: "+Math.round(u.total/60)+" mins",10);var e=document.getElementById("o"+l[t]);if(null===e)return h(t+1);var s=document.getElementById("i"+l[t]),c=e.cloneNode(!0),f=null===s?null:s.cloneNode(!0);document.getElementById("paths-outer").appendChild(c),f&&document.getElementById("paths-inner").appendChild(f);var d=c instanceof SVGLineElement?r.point(Number(c.x1),Number(c.y1)).distanceTo(r.point(Number(c.x2),Number(c.y2))):c.getTotalLength(),m=n.graph.spans[parseInt(l[t].slice(2))];if(m.source!==a[t]){var p=o.getBezierPath(c).reverse();console.log(p),4===p.length&&(o.setBezierPath(c,p),f&&o.setBezierPath(f,p))}var g=d;c.setAttribute("filter","url(#black-glow)");for(var v=0,y=null===f?[c]:[c,f];v<y.length;v++){var b=y[v];b.style.transition=null,b.style.strokeDasharray=d+" "+d,b.style.strokeDashoffset=d.toString(),b.style.opacity=null,b.getBoundingClientRect(),b.style.transition="stroke-dashoffset "+g+"ms linear",b.style.strokeDashoffset="0"}setTimeout(function(){e.style.opacity=null,e.setAttribute("filter","url(#black-glow)"),document.getElementById("paths-outer").removeChild(c),f&&(s.style.opacity=null,s.setAttribute("filter","url(#black-glow)"),f&&document.getElementById("paths-inner").removeChild(f)),h(t+1)},g),console.log(c)};h(0)},t.prototype.shortestPath=function(t,e){for(var n=this,i=this.graph.platforms,o=[],a=[],u=0;u<i.length;u++){var c=i[u],f=r.LatLng.prototype.distanceTo.call(t,c.location),d=f/(1.3*1.4);o.push(d),a.push(r.LatLng.prototype.distanceTo.call(c.location,e)/(1.3*1.4))}for(var h=i.indexOf(l.findClosestObject(t,i)),m=new Set(i.map(function(t,e){return e})),p=i.map(function(t){return null}),g=r.LatLng.prototype.distanceTo.call(t,e)/(1.3*1.4);m.size>0;){var v=1/0;m.forEach(function(t){o[t]<v&&(h=t,v=o[t])});var y=i[h];m["delete"](h);for(var b=[],_=[],x=[],w=0,k=y.spans;w<k.length;w++){var O=k[w],j=this.graph.spans[O],E=h===j.source?j.target:j.source;if(m.has(E)){var S=i[E];b.push(E),_.push(S);var f=r.LatLng.prototype.distanceTo.call(y.location,S.location),T=this.graph.routes[j.routes[0]].line.startsWith("E")?90:45;x.push(s.timeToTravel(f,18,1.4)+T)}}for(var C=this.graph.transfers.map(function(t,e){return e}).filter(function(t){return n.graph.transfers[t].source===h||n.graph.transfers[t].target===h}),M=0;M<C.length;M++){var O=C[M],L=this.graph.transfers[O],E=h===L.source?L.target:L.source;if(m.has(E)){var S=i[E];b.push(E),_.push(S);var f=r.LatLng.prototype.distanceTo.call(y.location,S.location);x.push(f/(1.3*1.4)+60)}}for(var O=0;O<b.length;++O){var E=b[O],P=o[h]+x[O];P<o[E]&&(o[E]=P,p[E]=h)}var A=o[h]+a[h]}for(var z=1/0,O=0;O<o.length;++O){var A=o[O]+a[O];z>A&&(z=A,h=O)}if(z>g)return g;var B=[],H=[h];console.log("making path"),console.log(p);for(var N=0;;){var y=i[h];console.log("current",y.name);var I=p[h];if(null===I)break;for(var D="",G=0,R=y.spans;G<R.length;G++){var O=R[G],j=this.graph.spans[O];if(j.source===h&&j.target===I||j.target===h&&j.source===I){D="p-"+O;break}}if(""===D)for(var O=0;O<this.graph.transfers.length;++O){var L=this.graph.transfers[O];if(L.source===h&&L.target===I||L.target===h&&L.source===I){D="t-"+O;break}}if(B.push(D),H.push(I),++N>i.length)throw new Error("overflow!");h=I}console.log("returning"),H.reverse(),B.reverse();var F=a[H[H.length-1]],W=o[H[0]],V=z-F-W;return{platforms:H,path:B,time:{walkTo:W,metro:V,walkFrom:F,total:z}}},t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=h},{"../geo":2,"../util":68,"./addons":3,"./bind":4,"./contextmenu":5,"./mapeditor":7,"./svg":10,"./textplate":11,alertifyjs:13}],9:[function(t,e,n){function r(){"Promise"in window&&"then"in Promise.prototype&&"catch"in Promise.prototype||(console.log("promises not present, using a polyfill"),t("es6-promise").polyfill()),"Set"in window&&"add"in Set.prototype&&"has"in Set.prototype||(console.log("set not present, using a polyfill"),t("es6-set/implement")),"classList"in HTMLElement.prototype||(console.log("classlist not present, using a polyfill"),t("classlist-polyfill")),Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;r>o;o++)if(e=n[o],t.call(i,e,o,n))return e;return void 0})}this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})};Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{"classlist-polyfill":14,"es6-promise":56,"es6-set/implement":57}],10:[function(t,e,n){function r(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function i(t,e){var n=r("circle");return n.setAttribute("r",e.toString()),n.setAttribute("cy",t.y.toString()),n.setAttribute("cx",t.x.toString()),n}function o(t,e,n){var i=r("path");return l(i,t,e,n),i}function s(t){for(var e,n=[],r=/\D([\d\.]+).*?,.*?([\d\.]+)/g,i=t.getAttribute("d");null!==(e=r.exec(i));)n.push(new k.Point(Number(e[1]),Number(e[2])));return n}function a(t,e){if(4!==e.length)throw new Error("there should be 4 points");var n=(r("path"),["M"].concat(e.map(function(t){return t.x+","+t.y})));n.splice(2,0,"C"),t.setAttribute("d",n.join(" "))}function l(t,e,n,r){var i=e.distanceTo(n),o=n.subtract(e),s=r.subtract(e),a=o.x*s.y-s.x*o.y<0?1:0,l=Math.atan2(n.y-e.y,n.x-e.x),u=Math.atan2(r.y-e.y,r.x-e.x),c=u-l,f=c<=Math.PI||c>-Math.PI?1:0,d=["M",n.x,n.y,"A",i,i,0,a,f,r.x,r.y].join(" ");t.setAttribute("d",d)}function u(t){var e=r("path");return a(e,t),e}function c(t,e){function n(t){for(var n=new Array(t.length-1),r=0;r<n.length;++r)n[0]=t[r].add(t[r+1].subtract(t[r]).multiplyBy(e));return n}var r=new Array(t.length),i=t.slice(0,t.length);do r.push(i[0]),i=n(i);while(i.length>0);return r}function f(t,e){var n=i(t,e),r=n.cloneNode(!0);return[n,r]}function d(t,e,n){var r=o(t,e,n),i=r.cloneNode(!0);return[r,i]}function h(t,e){var n=["transfer-outer","transfer-inner"];return n.map(function(n){var i=r("line");return i.setAttribute("x1",t.x.toString()),i.setAttribute("y1",t.y.toString()),i.setAttribute("x2",e.x.toString()),i.setAttribute("y2",e.y.toString()),i.classList.add(n),i})}function m(){var t=r("filter");return t.id="shadow",t.setAttribute("width","200%"),t.setAttribute("height","200%"),t.innerHTML='\n        <feOffset result="offOut" in="SourceAlpha" dx="0" dy="2" />\n        <feGaussianBlur result="blurOut" in="offOut" stdDeviation="2" />\n        <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n    ',t}function p(){var t=r("filter");return t.id="black-glow",t.innerHTML='<feColorMatrix type="matrix" values=\n            "0 0 0 0   0\n             0 0 0 0   0\n             0 0 0 0   0\n             0 0 0 0.3 0"/>\n        <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>\n        <feMerge>\n            <feMergeNode in="coloredBlur"/>\n            <feMergeNode in="SourceGraphic"/>\n        </feMerge>',t}function g(t,e){var n=O.vectorToGradCoordinates(e);t.setAttribute("x1",50*(1-n.x)+"%"),t.setAttribute("y1",50*(1-n.y)+"%"),t.setAttribute("x2",50*(1+n.x)+"%"),t.setAttribute("y2",50*(1+n.y)+"%")}function v(t,e){t.children[0].setAttribute("offset",e.toString()),t.children[1].setAttribute("offset",(1-e).toString())}function y(t,e,n){void 0===n&&(n=0);var i=r("linearGradient");return g(i,t),i.innerHTML='<stop offset="'+n+'" style="stop-color:'+e[0]+'" />\n      <stop offset="'+(1-n)+'" style="stop-color:'+e[1]+'" />',i}function b(){var t=document.getElementById("transfers-outer").children;if(t)for(var e=0;e<t.length;++e)t[e].style.stroke=null}function _(){var t=document.getElementById("transfers-outer").children;if(t)for(var e=0;e<t.length;++e){var n=t[e];n.style.stroke="url(#g-"+e+")"}}function x(t){return document.getElementById("p-"+t.id.slice(2))}function w(t,e){return e.platforms[parseInt(t.id.slice(2))]}var k=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},window.L),O=t("../util");
n.createSVGElement=r,n.makeCircle=i,n.makeArc=o,n.getBezierPath=s,n.setBezierPath=a,n.setCircularPath=l,n.makeCubicBezier=u,n.cutCubicBezier=c,n.makeTransferRing=f,n.makeTransferArc=d,n.makeTransfer=h,n.makeDropShadow=m,n.makeShadowGlow=p,n.setGradientDirection=g,n.setGradientOffset=v,n.makeGradient=y,n.removeGradients=b,n.addGradients=_,n.circleByDummy=x,n.platformByCircle=w},{"../util":68}],11:[function(t,e,n){var r=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},t("./svg")),i=t("../util"),o=function(){function t(t){this._disabled=!1,this._editable=!1,this.graph=t,this._element=r.createSVGElement("g"),this._element.id="station-plate",this._element.style.display="none",this._element.innerHTML='<line id="pole" class="plate-pole"/>\n            <g>\n                <rect id="plate-box" class="plate-box" filter="url(#shadow)"/>\n                <text id="plate-text" fill="black" class="plate-text"><tspan/><tspan/><tspan/></text>\n            </g>'}return Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t?this.hide():getSelection().removeAllRanges(),this._disabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editable",{get:function(){return this._editable},set:function(t){for(var e=t?"true":null,n=this._element.children[1].children[1],r=n.children,i=0;i<r.length;++i)r[i].contentEditable=e},enumerable:!0,configurable:!0}),t.prototype.show=function(t){this.disabled||"none"===this._element.style.display&&(this.modify(t),this._element.style.display=null)},t.prototype.hide=function(){this._element.style.display="none"},t.prototype.modify=function(t){var e=new L.Point(Number(t.getAttribute("cx")),Number(t.getAttribute("cy"))),n=Number(t.getAttribute("r")),o=Math.trunc(n),s=this._element.children[0],a=new L.Point(4+o,8+o),l=e.subtract(a);s.setAttribute("x1",e.x.toString()),s.setAttribute("y1",e.y.toString()),s.setAttribute("x2",l.x.toString()),s.setAttribute("y2",l.y.toString());var u=r.platformByCircle(t,this.graph),c=u.name,f=u.altNames.fi,d=u.altNames.en,h=f?"fi"===i.getUserLanguage()?[f,c]:[c,f]:[c];d&&h.push(d),this.modifyBox(l,h)},t.prototype.modifyBox=function(t,e){var n=this._element.children[1].children[0],r=12,i=e.reduce(function(t,e){return t.length<e.length?e:t}),o=new L.Point(10+6*i.length,6+r*e.length);n.setAttribute("width",o.x.toString()),n.setAttribute("height",o.y.toString());var s=t.subtract(o);n.setAttribute("x",s.x.toString()),n.setAttribute("y",s.y.toString());for(var a=this._element.children[1].children[1],l=0;l<e.length;++l){var u=t.subtract(new L.Point(3,o.y-(l+1)*r)),c=a.children[l];c.setAttribute("x",u.x.toString()),c.setAttribute("y",u.y.toString()),c.textContent=e[l]}for(;l<a.children.length;)a.children[l++].textContent=null;try{var f=a.getBBox();n.setAttribute("x",(f.x-3).toString()),n.setAttribute("width",(f.width+6).toString())}catch(d){}},t}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{"../util":68,"./svg":10}],12:[function(t,e,n){var r=(this&&this.__awaiter||function(t,e,n,r){return new n(function(i,o){function s(t){return t instanceof n&&t.constructor===n?t:new n(function(e){e(t)})}function a(t){try{u("next",t)}catch(e){o(e)}}function l(t){try{u("throw",t)}catch(e){o(e)}}function u(t,e){var n=r[t](e);n.done?i(n.value):s(n.value).then(a,l)}r=r.call(t,e),u("next",void 0)})},window.L),i={Mapbox:new r.TileLayer("https://{s}.tiles.mapbox.com/v3/inker.mlo91c41/{z}/{x}/{y}.png",{minZoom:9,detectRetina:!0,bounds:null,attribution:'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://mapbox.com">Mapbox</a>'}),OpenMapSurfer:new r.TileLayer("http://openmapsurfer.uni-hd.de/tiles/roads/x={x}&y={y}&z={z}",{minZoom:9,detectRetina:!0,attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href="https://server.ts.openstreetmap.org/copyright">OpenStreetMap</a>'}),HyddaBase:r.tileLayer("http://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png",{minZoom:9,detectRetina:!0,attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://server.ts.openstreetmap.org/copyright">OpenStreetMap</a>'}),EsriGrey:r.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",minZoom:9,detectRetina:!0})};Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{}],13:[function(t,e,n){!function(t){"use strict";function n(t,e){t.className+=" "+e}function r(t,e){for(var n=e.split(" "),r=0;r<n.length;r+=1)t.className=t.className.replace(" "+n[r],"")}function i(){return"rtl"===t.getComputedStyle(document.body).direction}function o(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function s(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function a(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function l(t){if(null===t)return t;if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n+=1)e.push(l(t[n]));return e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var e=new RegExp(t.source);return e.global=t.global,e.ignoreCase=t.ignoreCase,e.multiline=t.multiline,e.lastIndex=t.lastIndex,e}if("object"==typeof t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=l(t[r]));return e}return t}function u(t,e){var n=t.elements.root;n.parentNode.removeChild(n),delete t.elements,t.settings=l(t.__settings),t.__init=e,delete t.__internal}function c(t,e){return function(){if(arguments.length>0){for(var n=[],r=0;r<arguments.length;r+=1)n.push(arguments[r]);return n.push(t),e.apply(t,n)}return e.apply(t,[null,t])}}function f(t,e){return{index:t,button:e,cancel:!1}}function d(){function t(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function e(t){var e=r[t].dialog;return e&&"function"==typeof e.__init&&e.__init(e),e}function n(e,n,i,o){var s={dialog:null,factory:n};return void 0!==o&&(s.factory=function(){return t(new r[o].factory,new n)}),i||(s.dialog=t(new s.factory,b)),r[e]=s}var r={};return{defaults:m,dialog:function(r,i,o,s){if("function"!=typeof i)return e(r);if(this.hasOwnProperty(r))throw new Error("alertify.dialog: name already exists");var a=n(r,i,o,s);o?this[r]=function(){if(0===arguments.length)return a.dialog;var e=t(new a.factory,b);return e&&"function"==typeof e.__init&&e.__init(e),e.main.apply(e,arguments),e.show.apply(e)}:this[r]=function(){if(a.dialog&&"function"==typeof a.dialog.__init&&a.dialog.__init(a.dialog),0===arguments.length)return a.dialog;var t=a.dialog;return t.main.apply(a.dialog,arguments),t.show.apply(a.dialog)}},closeAll:function(t){for(var e=p.slice(0),n=0;n<e.length;n+=1){var r=e[n];(void 0===t||t!==r)&&r.close()}},setting:function(t,n,r){if("notifier"===t)return _.setting(n,r);var i=e(t);return i?i.setting(n,r):void 0},set:function(t,e,n){return this.setting(t,e,n)},get:function(t,e){return this.setting(t,e)},notify:function(t,e,n,r){return _.create(e,r).push(t,n)},message:function(t,e,n){return _.create(null,n).push(t,e)},success:function(t,e,n){return _.create("success",n).push(t,e)},error:function(t,e,n){return _.create("error",n).push(t,e)},warning:function(t,e,n){return _.create("warning",n).push(t,e)},dismissAll:function(){_.dismissAll()}}}var h={ENTER:13,ESC:27,F1:112,F12:123,LEFT:37,RIGHT:39},m={modal:!0,basic:!1,frameless:!1,movable:!0,resizable:!0,closable:!0,closableByDimmer:!0,maximizable:!0,startMaximized:!1,pinnable:!0,pinned:!0,padding:!0,overflow:!0,maintainFocus:!0,transition:"pulse",autoReset:!0,notifier:{delay:5,position:"bottom-right"},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"}},p=[],g=function(){return document.addEventListener?function(t,e,n,r){t.addEventListener(e,n,r===!0)}:document.attachEvent?function(t,e,n){t.attachEvent("on"+e,n)}:void 0}(),v=function(){return document.removeEventListener?function(t,e,n,r){t.removeEventListener(e,n,r===!0)}:document.detachEvent?function(t,e,n){t.detachEvent("on"+e,n)}:void 0}(),y=function(){var t,e,n=!1,r={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in r)if(void 0!==document.documentElement.style[t]){e=r[t],n=!0;break}return{type:e,supported:n}}(),b=function(){function e(t){if(!t.__internal){delete t.__init,this.__settings||(this.__settings=l(this.settings)),null===wt&&document.body.setAttribute("tabindex","0");var e;"function"==typeof t.setup?(e=t.setup(),e.options=e.options||{},e.focus=e.focus||{}):e={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof t.hooks&&(t.hooks={});var r=[];if(Array.isArray(e.buttons))for(var i=0;i<e.buttons.length;i+=1){var o=e.buttons[i],s={};for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);r.push(s)}var u=t.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:r,focus:e.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,pinned:void 0,movable:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclose:void 0,onfocus:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},f={};f.root=document.createElement("div"),f.root.className=jt.base+" "+jt.hidden+" ",f.root.innerHTML=Ot.dimmer+Ot.modal,f.dimmer=f.root.firstChild,f.modal=f.root.lastChild,f.modal.innerHTML=Ot.dialog,f.dialog=f.modal.firstChild,f.dialog.innerHTML=Ot.reset+Ot.commands+Ot.header+Ot.body+Ot.footer+Ot.resizeHandle+Ot.reset,f.reset=[],f.reset.push(f.dialog.firstChild),f.reset.push(f.dialog.lastChild),f.commands={},f.commands.container=f.reset[0].nextSibling,f.commands.pin=f.commands.container.firstChild,f.commands.maximize=f.commands.pin.nextSibling,f.commands.close=f.commands.maximize.nextSibling,f.header=f.commands.container.nextSibling,f.body=f.header.nextSibling,f.body.innerHTML=Ot.content,f.content=f.body.firstChild,f.footer=f.body.nextSibling,f.footer.innerHTML=Ot.buttons.auxiliary+Ot.buttons.primary,f.resizeHandle=f.footer.nextSibling,f.buttons={},f.buttons.auxiliary=f.footer.firstChild,f.buttons.primary=f.buttons.auxiliary.nextSibling,f.buttons.primary.innerHTML=Ot.button,f.buttonTemplate=f.buttons.primary.firstChild,f.buttons.primary.removeChild(f.buttonTemplate);for(var d=0;d<t.__internal.buttons.length;d+=1){var h=t.__internal.buttons[d];xt.indexOf(h.key)<0&&xt.push(h.key),h.element=f.buttonTemplate.cloneNode(),h.element.innerHTML=h.text,"string"==typeof h.className&&""!==h.className&&n(h.element,h.className);for(var m in h.attrs)"className"!==m&&h.attrs.hasOwnProperty(m)&&h.element.setAttribute(m,h.attrs[m]);"auxiliary"===h.scope?f.buttons.auxiliary.appendChild(h.element):f.buttons.primary.appendChild(h.element)}t.elements=f,u.resetHandler=c(t,q),u.beginMoveHandler=c(t,J),u.beginResizeHandler=c(t,rt),u.bringToFrontHandler=c(t,j),u.modalClickHandler=c(t,R),u.buttonsClickHandler=c(t,W),u.commandsClickHandler=c(t,C),u.transitionInHandler=c(t,X),u.transitionOutHandler=c(t,Z),t.set("title",void 0===e.options.title?x.defaults.glossary.title:e.options.title),t.set("modal",void 0===e.options.modal?x.defaults.modal:e.options.modal),t.set("basic",void 0===e.options.basic?x.defaults.basic:e.options.basic),t.set("frameless",void 0===e.options.frameless?x.defaults.frameless:e.options.frameless),t.set("movable",void 0===e.options.movable?x.defaults.movable:e.options.movable),t.set("resizable",void 0===e.options.resizable?x.defaults.resizable:e.options.resizable),t.set("autoReset",void 0===e.options.autoReset?x.defaults.autoReset:e.options.autoReset),t.set("closable",void 0===e.options.closable?x.defaults.closable:e.options.closable),t.set("closableByDimmer",void 0===e.options.closableByDimmer?x.defaults.closableByDimmer:e.options.closableByDimmer),t.set("maximizable",void 0===e.options.maximizable?x.defaults.maximizable:e.options.maximizable),t.set("startMaximized",void 0===e.options.startMaximized?x.defaults.startMaximized:e.options.startMaximized),t.set("pinnable",void 0===e.options.pinnable?x.defaults.pinnable:e.options.pinnable),t.set("pinned",void 0===e.options.pinned?x.defaults.pinned:e.options.pinned),t.set("transition",void 0===e.options.transition?x.defaults.transition:e.options.transition),t.set("padding",void 0===e.options.padding?x.defaults.padding:e.options.padding),t.set("overflow",void 0===e.options.overflow?x.defaults.overflow:e.options.overflow),"function"==typeof t.build&&t.build()}document.body.appendChild(t.elements.root)}function d(){bt=s(),_t=o()}function m(){t.scrollTo(bt,_t)}function b(){for(var t=0,e=0;e<p.length;e+=1){var i=p[e];(i.isModal()||i.isMaximized())&&(t+=1)}0===t?r(document.body,jt.noOverflow):t>0&&document.body.className.indexOf(jt.noOverflow)<0&&n(document.body,jt.noOverflow)}function _(t,e,i){"string"==typeof i&&r(t.elements.root,jt.prefix+i),n(t.elements.root,jt.prefix+e),wt=t.elements.root.offsetWidth}function w(t){t.get("modal")?(r(t.elements.root,jt.modeless),t.isOpen()&&(dt(t),N(t),b())):(n(t.elements.root,jt.modeless),t.isOpen()&&(ft(t),N(t),b()))}function k(t){t.get("basic")?n(t.elements.root,jt.basic):r(t.elements.root,jt.basic)}function O(t){t.get("frameless")?n(t.elements.root,jt.frameless):r(t.elements.root,jt.frameless)}function j(t,e){for(var n=p.indexOf(e),r=n+1;r<p.length;r+=1)if(p[r].isModal())return;return document.body.lastChild!==e.elements.root&&(document.body.appendChild(e.elements.root),p.splice(p.indexOf(e),1),p.push(e),Y(e)),!1}function E(t,e,i,o){switch(e){case"title":t.setHeader(o);break;case"modal":w(t);break;case"basic":k(t);break;case"frameless":O(t);break;case"pinned":I(t);break;case"closable":G(t);break;case"maximizable":D(t);break;case"pinnable":z(t);break;case"movable":et(t);break;case"resizable":at(t);break;case"transition":_(t,o,i);break;case"padding":o?r(t.elements.root,jt.noPadding):t.elements.root.className.indexOf(jt.noPadding)<0&&n(t.elements.root,jt.noPadding);break;case"overflow":o?r(t.elements.root,jt.noOverflow):t.elements.root.className.indexOf(jt.noOverflow)<0&&n(t.elements.root,jt.noOverflow);break;case"transition":_(t,o,i)}"function"==typeof t.hooks.onupdate&&t.hooks.onupdate.call(t,e,i,o)}function S(t,e,n,r,i){var o={op:void 0,items:[]};if("undefined"==typeof i&&"string"==typeof r)o.op="get",e.hasOwnProperty(r)?(o.found=!0,o.value=e[r]):(o.found=!1,o.value=void 0);else{var s;if(o.op="set","object"==typeof r){var a=r;for(var l in a)e.hasOwnProperty(l)?(e[l]!==a[l]&&(s=e[l],e[l]=a[l],n.call(t,l,s,a[l])),o.items.push({key:l,value:a[l],found:!0})):o.items.push({key:l,value:a[l],found:!1})}else{if("string"!=typeof r)throw new Error("args must be a string or object");e.hasOwnProperty(r)?(e[r]!==i&&(s=e[r],e[r]=i,n.call(t,r,s,i)),o.items.push({key:r,value:i,found:!0})):o.items.push({key:r,value:i,found:!1})}}return o}function T(t){var e;F(t,function(t){return e=t.invokeOnClose===!0}),!e&&t.isOpen()&&t.close()}function C(t,e){var n=t.srcElement||t.target;switch(n){case e.elements.commands.pin:e.isPinned()?L(e):M(e);break;case e.elements.commands.maximize:e.isMaximized()?A(e):P(e);break;case e.elements.commands.close:T(e)}return!1}function M(t){t.set("pinned",!0)}function L(t){t.set("pinned",!1)}function P(t){n(t.elements.root,jt.maximized),t.isOpen()&&b()}function A(t){r(t.elements.root,jt.maximized),t.isOpen()&&b()}function z(t){t.get("pinnable")?n(t.elements.root,jt.pinnable):r(t.elements.root,jt.pinnable)}function B(t){var e=s();t.elements.modal.style.marginTop=o()+"px",t.elements.modal.style.marginLeft=e+"px",t.elements.modal.style.marginRight=-e+"px"}function H(t){var e=parseInt(t.elements.modal.style.marginTop,10),n=parseInt(t.elements.modal.style.marginLeft,10);if(t.elements.modal.style.marginTop="",t.elements.modal.style.marginLeft="",t.elements.modal.style.marginRight="",t.isOpen()){var r=0,i=0;""!==t.elements.dialog.style.top&&(r=parseInt(t.elements.dialog.style.top,10)),t.elements.dialog.style.top=r+(e-o())+"px",""!==t.elements.dialog.style.left&&(i=parseInt(t.elements.dialog.style.left,10)),t.elements.dialog.style.left=i+(n-s())+"px"}}function N(t){t.get("modal")||t.get("pinned")?H(t):B(t)}function I(t){t.get("pinned")?(r(t.elements.root,jt.unpinned),t.isOpen()&&H(t)):(n(t.elements.root,jt.unpinned),t.isOpen()&&!t.isModal()&&B(t))}function D(t){t.get("maximizable")?n(t.elements.root,jt.maximizable):r(t.elements.root,jt.maximizable)}function G(t){t.get("closable")?(n(t.elements.root,jt.closable),vt(t)):(r(t.elements.root,jt.closable),yt(t))}function R(t,e){var n=t.srcElement||t.target;return Et||n!==e.elements.modal||e.get("closableByDimmer")!==!0||T(e),Et=!1,!1}function F(t,e){for(var n=0;n<t.__internal.buttons.length;n+=1){var r=t.__internal.buttons[n];if(!r.element.disabled&&e(r)){var i=f(n,r);"function"==typeof t.callback&&t.callback.apply(t,[i]),i.cancel===!1&&t.close();break}}}function W(t,e){var n=t.srcElement||t.target;F(e,function(t){return t.element===n&&(St=!0)})}function V(t){if(St)return void(St=!1);var e=p[p.length-1],n=t.keyCode;return 0===e.__internal.buttons.length&&n===h.ESC&&e.get("closable")===!0?(T(e),!1):xt.indexOf(n)>-1?(F(e,function(t){return t.key===n}),!1):void 0}function U(t){var e=p[p.length-1],n=t.keyCode;if(n===h.LEFT||n===h.RIGHT){for(var r=e.__internal.buttons,i=0;i<r.length;i+=1)if(document.activeElement===r[i].element)switch(n){case h.LEFT:return void r[(i||r.length)-1].element.focus();case h.RIGHT:return void r[(i+1)%r.length].element.focus()}}else if(n<h.F12+1&&n>h.F1-1&&xt.indexOf(n)>-1)return t.preventDefault(),t.stopPropagation(),F(e,function(t){return t.key===n}),!1}function Y(t,e){if(e)e.focus();else{var n=t.__internal.focus,r=n.element;switch(typeof n.element){case"number":t.__internal.buttons.length>n.element&&(r=t.get("basic")===!0?t.elements.reset[0]:t.__internal.buttons[n.element].element);break;case"string":r=t.elements.body.querySelector(n.element);break;case"function":r=n.element.call(t)}"undefined"!=typeof r&&null!==r||0!==t.__internal.buttons.length||(r=t.elements.reset[0]),r&&r.focus&&(r.focus(),n.select&&r.select&&r.select())}}function q(t,e){if(!e)for(var n=p.length-1;n>-1;n-=1)if(p[n].isModal()){e=p[n];break}if(e&&e.isModal()){var r,i=t.srcElement||t.target,o=i===e.elements.reset[1]||0===e.__internal.buttons.length&&i===document.body;o&&(e.get("maximizable")?r=e.elements.commands.maximize:e.get("closable")&&(r=e.elements.commands.close)),void 0===r&&("number"==typeof e.__internal.focus.element?i===e.elements.reset[0]?r=e.elements.buttons.auxiliary.firstChild||e.elements.buttons.primary.firstChild:o&&(r=e.elements.reset[0]):i===e.elements.reset[0]&&(r=e.elements.buttons.primary.lastChild||e.elements.buttons.auxiliary.lastChild)),Y(e,r)}}function X(t,e){clearTimeout(e.__internal.timerIn),Y(e),m(),St=!1,"function"==typeof e.get("onfocus")&&e.get("onfocus").call(e),v(e.elements.dialog,y.type,e.__internal.transitionInHandler),r(e.elements.root,jt.animationIn)}function Z(t,e){clearTimeout(e.__internal.timerOut),v(e.elements.dialog,y.type,e.__internal.transitionOutHandler),tt(e),st(e),e.isMaximized()&&!e.get("startMaximized")&&A(e),x.defaults.maintainFocus&&e.__internal.activeElement&&(e.__internal.activeElement.focus(),e.__internal.activeElement=null),"function"==typeof e.__internal.destroy&&e.__internal.destroy.apply(e)}function K(t,e){e.style.left=t[Lt]-Ct+"px",e.style.top=t[Pt]-Mt+"px"}function J(t,e){if(null===At&&!e.isMaximized()&&e.get("movable")){var r;if("touchstart"===t.type?(t.preventDefault(),r=t.targetTouches[0],Lt="clientX",Pt="clientY"):0===t.button&&(r=t),r){Tt=e,Ct=r[Lt],Mt=r[Pt];var i=e.elements.dialog;return n(i,jt.capture),i.style.left&&(Ct-=parseInt(i.style.left,10)),i.style.top&&(Mt-=parseInt(i.style.top,10)),K(r,i),n(document.body,jt.noSelection),!1}}}function Q(t){if(Tt){var e;"touchmove"===t.type?(t.preventDefault(),e=t.targetTouches[0]):0===t.button&&(e=t),e&&K(e,Tt.elements.dialog)}}function $(){if(Tt){var t=Tt.elements.dialog;Tt=null,r(document.body,jt.noSelection),r(t,jt.capture)}}function tt(t){Tt=null;var e=t.elements.dialog;e.style.left=e.style.top=""}function et(t){t.get("movable")?(n(t.elements.root,jt.movable),t.isOpen()&&ht(t)):(tt(t),r(t.elements.root,jt.movable),t.isOpen()&&mt(t))}function nt(t,e,n){var r=e,o=0,s=0;do o+=r.offsetLeft,s+=r.offsetTop;while(r=r.offsetParent);var a,l;n===!0?(a=t.pageX,l=t.pageY):(a=t.clientX,l=t.clientY);var u=i();if(u&&(a=document.body.offsetWidth-a,isNaN(zt)||(o=document.body.offsetWidth-o-e.offsetWidth)),e.style.height=l-s+Nt+"px",e.style.width=a-o+Nt+"px",!isNaN(zt)){var c=.5*Math.abs(e.offsetWidth-Bt);u&&(c*=-1),e.offsetWidth>Bt?e.style.left=zt+c+"px":e.offsetWidth>=Ht&&(e.style.left=zt-c+"px")}}function rt(t,e){if(!e.isMaximized()){var r;if("touchstart"===t.type?(t.preventDefault(),r=t.targetTouches[0]):0===t.button&&(r=t),r){At=e,Nt=e.elements.resizeHandle.offsetHeight/2;var i=e.elements.dialog;return n(i,jt.capture),zt=parseInt(i.style.left,10),i.style.height=i.offsetHeight+"px",i.style.minHeight=e.elements.header.offsetHeight+e.elements.footer.offsetHeight+"px",i.style.width=(Bt=i.offsetWidth)+"px","none"!==i.style.maxWidth&&(i.style.minWidth=(Ht=i.offsetWidth)+"px"),i.style.maxWidth="none",n(document.body,jt.noSelection),!1}}}function it(t){if(At){var e;"touchmove"===t.type?(t.preventDefault(),e=t.targetTouches[0]):0===t.button&&(e=t),e&&nt(e,At.elements.dialog,!At.get("modal")&&!At.get("pinned"))}}function ot(){if(At){var t=At.elements.dialog;At=null,r(document.body,jt.noSelection),r(t,jt.capture),Et=!0}}function st(t){At=null;var e=t.elements.dialog;"none"===e.style.maxWidth&&(e.style.maxWidth=e.style.minWidth=e.style.width=e.style.height=e.style.minHeight=e.style.left="",zt=Number.Nan,Bt=Ht=Nt=0)}function at(t){t.get("resizable")?(n(t.elements.root,jt.resizable),t.isOpen()&&pt(t)):(st(t),r(t.elements.root,jt.resizable),t.isOpen()&&gt(t))}function lt(){for(var t=0;t<p.length;t+=1){var e=p[t];e.get("autoReset")&&(tt(e),st(e))}}function ut(e){1===p.length&&(g(t,"resize",lt),g(document.body,"keyup",V),g(document.body,"keydown",U),g(document.body,"focus",q),g(document.documentElement,"mousemove",Q),g(document.documentElement,"touchmove",Q),g(document.documentElement,"mouseup",$),g(document.documentElement,"touchend",$),g(document.documentElement,"mousemove",it),g(document.documentElement,"touchmove",it),g(document.documentElement,"mouseup",ot),g(document.documentElement,"touchend",ot)),g(e.elements.commands.container,"click",e.__internal.commandsClickHandler),g(e.elements.footer,"click",e.__internal.buttonsClickHandler),g(e.elements.reset[0],"focus",e.__internal.resetHandler),g(e.elements.reset[1],"focus",e.__internal.resetHandler),St=!0,g(e.elements.dialog,y.type,e.__internal.transitionInHandler),e.get("modal")||ft(e),e.get("resizable")&&pt(e),e.get("movable")&&ht(e)}function ct(e){1===p.length&&(v(t,"resize",lt),v(document.body,"keyup",V),v(document.body,"keydown",U),v(document.body,"focus",q),v(document.documentElement,"mousemove",Q),v(document.documentElement,"mouseup",$),v(document.documentElement,"mousemove",it),v(document.documentElement,"mouseup",ot)),v(e.elements.commands.container,"click",e.__internal.commandsClickHandler),v(e.elements.footer,"click",e.__internal.buttonsClickHandler),v(e.elements.reset[0],"focus",e.__internal.resetHandler),v(e.elements.reset[1],"focus",e.__internal.resetHandler),g(e.elements.dialog,y.type,e.__internal.transitionOutHandler),e.get("modal")||dt(e),e.get("movable")&&mt(e),e.get("resizable")&&gt(e)}function ft(t){g(t.elements.dialog,"focus",t.__internal.bringToFrontHandler,!0)}function dt(t){v(t.elements.dialog,"focus",t.__internal.bringToFrontHandler,!0)}function ht(t){g(t.elements.header,"mousedown",t.__internal.beginMoveHandler),g(t.elements.header,"touchstart",t.__internal.beginMoveHandler)}function mt(t){v(t.elements.header,"mousedown",t.__internal.beginMoveHandler),v(t.elements.header,"touchstart",t.__internal.beginMoveHandler)}function pt(t){g(t.elements.resizeHandle,"mousedown",t.__internal.beginResizeHandler),g(t.elements.resizeHandle,"touchstart",t.__internal.beginResizeHandler)}function gt(t){v(t.elements.resizeHandle,"mousedown",t.__internal.beginResizeHandler),v(t.elements.resizeHandle,"touchstart",t.__internal.beginResizeHandler)}function vt(t){g(t.elements.modal,"click",t.__internal.modalClickHandler)}function yt(t){v(t.elements.modal,"click",t.__internal.modalClickHandler)}var bt,_t,xt=[],wt=null,kt=t.navigator.userAgent.indexOf("Safari")>-1&&t.navigator.userAgent.indexOf("Chrome")<0,Ot={dimmer:'<div class="ajs-dimmer"></div>',modal:'<div class="ajs-modal" tabindex="0"></div>',dialog:'<div class="ajs-dialog" tabindex="0"></div>',reset:'<button class="ajs-reset"></button>',commands:'<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',header:'<div class="ajs-header"></div>',body:'<div class="ajs-body"></div>',content:'<div class="ajs-content"></div>',footer:'<div class="ajs-footer"></div>',buttons:{primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},button:'<button class="ajs-button"></button>',resizeHandle:'<div class="ajs-handle"></div>'},jt={base:"alertify",prefix:"ajs-",hidden:"ajs-hidden",noSelection:"ajs-no-selection",noOverflow:"ajs-no-overflow",noPadding:"ajs-no-padding",modeless:"ajs-modeless",movable:"ajs-movable",resizable:"ajs-resizable",capture:"ajs-capture",fixed:"ajs-fixed",closable:"ajs-closable",maximizable:"ajs-maximizable",maximize:"ajs-maximize",restore:"ajs-restore",pinnable:"ajs-pinnable",unpinned:"ajs-unpinned",pin:"ajs-pin",maximized:"ajs-maximized",animationIn:"ajs-in",animationOut:"ajs-out",shake:"ajs-shake",basic:"ajs-basic",frameless:"ajs-frameless"},Et=!1,St=!1,Tt=null,Ct=0,Mt=0,Lt="pageX",Pt="pageY",At=null,zt=Number.Nan,Bt=0,Ht=0,Nt=0;return{__init:e,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(jt.modeless)<0},isMaximized:function(){return this.elements.root.className.indexOf(jt.maximized)>-1},isPinned:function(){return this.elements.root.className.indexOf(jt.unpinned)<0},maximize:function(){return this.isMaximized()||P(this),this},restore:function(){return this.isMaximized()&&A(this),this},pin:function(){return this.isPinned()||M(this),this},unpin:function(){return this.isPinned()&&L(this),this},moveTo:function(t,e){if(!isNaN(t)&&!isNaN(e)){var n=this.elements.dialog,r=n,o=0,s=0;n.style.left&&(o-=parseInt(n.style.left,10)),n.style.top&&(s-=parseInt(n.style.top,10));do o+=r.offsetLeft,s+=r.offsetTop;while(r=r.offsetParent);var a=t-o,l=e-s;i()&&(a*=-1),n.style.left=a+"px",n.style.top=l+"px"}return this},resizeTo:function(t,e){var n=parseFloat(t),r=parseFloat(e),i=/(\d*\.\d+|\d+)%/;if(!isNaN(n)&&!isNaN(r)&&this.get("resizable")===!0){(""+t).match(i)&&(n=n/100*document.documentElement.clientWidth),(""+e).match(i)&&(r=r/100*document.documentElement.clientHeight);var o=this.elements.dialog;"none"!==o.style.maxWidth&&(o.style.minWidth=(Ht=o.offsetWidth)+"px"),o.style.maxWidth="none",o.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",o.style.width=n+"px",o.style.height=r+"px"}return this},setting:function(t,e){var n=this,r=S(this,this.__internal.options,function(t,e,r){E(n,t,e,r)},t,e);if("get"===r.op)return r.found?r.value:"undefined"!=typeof this.settings?S(this,this.settings,this.settingUpdated||function(){},t,e).value:void 0;if("set"===r.op){if(r.items.length>0)for(var i=this.settingUpdated||function(){},o=0;o<r.items.length;o+=1){var s=r.items[o];s.found||"undefined"==typeof this.settings||S(this,this.settings,i,s.key,s.value)}return this}},set:function(t,e){return this.setting(t,e),this},get:function(t){return this.setting(t)},setHeader:function(e){return"string"==typeof e?(a(this.elements.header),this.elements.header.innerHTML=e):e instanceof t.HTMLElement&&this.elements.header.firstChild!==e&&(a(this.elements.header),this.elements.header.appendChild(e)),this},setContent:function(e){return"string"==typeof e?(a(this.elements.content),this.elements.content.innerHTML=e):e instanceof t.HTMLElement&&this.elements.content.firstChild!==e&&(a(this.elements.content),this.elements.content.appendChild(e)),this},showModal:function(t){return this.show(!0,t)},show:function(t,i){if(e(this),this.__internal.isOpen){tt(this),st(this),n(this.elements.dialog,jt.shake);var o=this;setTimeout(function(){r(o.elements.dialog,jt.shake)},200)}else{if(this.__internal.isOpen=!0,p.push(this),x.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),"function"==typeof this.prepare&&this.prepare(),ut(this),void 0!==t&&this.set("modal",t),d(),b(),"string"==typeof i&&""!==i&&(this.__internal.className=i,n(this.elements.root,i)),this.get("startMaximized")?this.maximize():this.isMaximized()&&A(this),N(this),r(this.elements.root,jt.animationOut),n(this.elements.root,jt.animationIn),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,y.supported?1e3:100),kt){var s=this.elements.root;s.style.display="none",setTimeout(function(){s.style.display="block"},0)}wt=this.elements.root.offsetWidth,r(this.elements.root,jt.hidden),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),"function"==typeof this.get("onshow")&&this.get("onshow").call(this)}return this},close:function(){return this.__internal.isOpen&&(ct(this),r(this.elements.root,jt.animationIn),n(this.elements.root,jt.animationOut),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,y.supported?1e3:100),n(this.elements.root,jt.hidden),wt=this.elements.modal.offsetWidth,"undefined"!=typeof this.__internal.className&&""!==this.__internal.className&&r(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),"function"==typeof this.get("onclose")&&this.get("onclose").call(this),p.splice(p.indexOf(this),1),this.__internal.isOpen=!1,b()),this},closeOthers:function(){return x.closeAll(this),this},destroy:function(){return this.__internal.isOpen?(this.__internal.destroy=function(){u(this,e)},this.close()):u(this,e),this}}}(),_=function(){function e(t){t.__internal||(t.__internal={position:x.defaults.notifier.position,delay:x.defaults.notifier.delay},f=document.createElement("DIV"),s(t)),f.parentNode!==document.body&&document.body.appendChild(f)}function i(t){t.__internal.pushed=!0,d.push(t)}function o(t){d.splice(d.indexOf(t),1),t.__internal.pushed=!1}function s(t){switch(f.className=h.base,t.__internal.position){case"top-right":n(f,h.top+" "+h.right);break;case"top-left":n(f,h.top+" "+h.left);break;case"bottom-left":n(f,h.bottom+" "+h.left);break;default:case"bottom-right":n(f,h.bottom+" "+h.right)}}function l(e,s){function l(t,e){e.dismiss(!0)}function d(t,e){v(e.element,y.type,d),f.removeChild(e.element);
}function m(t){return t.__internal||(t.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},t.__internal.clickHandler=c(t,l),t.__internal.transitionEndHandler=c(t,d)),t}function p(t){clearTimeout(t.__internal.timer),clearTimeout(t.__internal.transitionTimeout)}return m({element:e,push:function(t,e){if(!this.__internal.pushed){i(this),p(this);var r,o;switch(arguments.length){case 0:o=this.__internal.delay;break;case 1:"number"==typeof t?o=t:(r=t,o=this.__internal.delay);break;case 2:r=t,o=e}return"undefined"!=typeof r&&this.setContent(r),_.__internal.position.indexOf("top")<0?f.appendChild(this.element):f.insertBefore(this.element,f.firstChild),u=this.element.offsetWidth,n(this.element,h.visible),g(this.element,"click",this.__internal.clickHandler),this.delay(o)}return this},ondismiss:function(){},callback:s,dismiss:function(t){return this.__internal.pushed&&(p(this),("function"!=typeof this.ondismiss||this.ondismiss.call(this)!==!1)&&(v(this.element,"click",this.__internal.clickHandler),"undefined"!=typeof this.element&&this.element.parentNode===f&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,y.supported?1e3:100),r(this.element,h.visible),"function"==typeof this.callback&&this.callback.call(this,t)),o(this))),this},delay:function(t){if(p(this),this.__internal.delay="undefined"==typeof t||isNaN(+t)?_.__internal.delay:+t,this.__internal.delay>0){var e=this;this.__internal.timer=setTimeout(function(){e.dismiss()},1e3*this.__internal.delay)}return this},setContent:function(e){return"string"==typeof e?(a(this.element),this.element.innerHTML=e):e instanceof t.HTMLElement&&this.element.firstChild!==e&&(a(this.element),this.element.appendChild(e)),this},dismissOthers:function(){return _.dismissAll(this),this}})}var u,f,d=[],h={base:"alertify-notifier",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",visible:"ajs-visible",hidden:"ajs-hidden"};return{setting:function(t,n){if(e(this),"undefined"==typeof n)return this.__internal[t];switch(t){case"position":this.__internal.position=n,s(this);break;case"delay":this.__internal.delay=n}return this},set:function(t,e){return this.setting(t,e),this},get:function(t){return this.setting(t)},create:function(t,n){e(this);var r=document.createElement("div");return r.className=h.message+("string"==typeof t&&""!==t?" ajs-"+t:""),l(r,n)},dismissAll:function(t){for(var e=d.slice(0),n=0;n<e.length;n+=1){var r=e[n];(void 0===t||t!==r)&&r.dismiss()}}}}(),x=new d;x.dialog("alert",function(){return{main:function(t,e,n){var r,i,o;switch(arguments.length){case 1:i=t;break;case 2:"function"==typeof e?(i=t,o=e):(r=t,i=e);break;case 3:r=t,i=e,o=n}return this.set("title",r),this.set("message",i),this.set("onok",o),this},setup:function(){return{buttons:[{text:x.defaults.glossary.ok,key:h.ESC,invokeOnClose:!0,className:x.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(t){this.setContent(t)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(t,e,n){switch(t){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},callback:function(t){if("function"==typeof this.get("onok")){var e=this.get("onok").call(this,t);"undefined"!=typeof e&&(t.cancel=!e)}}}}),x.dialog("confirm",function(){function t(t){null!==n.timer&&(clearInterval(n.timer),n.timer=null,t.__internal.buttons[n.index].element.innerHTML=n.text)}function e(e,r,i){t(e),n.duration=i,n.index=r,n.text=e.__internal.buttons[r].element.innerHTML,n.timer=setInterval(c(e,n.task),1e3),n.task(null,e)}var n={timer:null,index:null,text:null,duration:null,task:function(e,r){if(r.isOpen()){if(r.__internal.buttons[n.index].element.innerHTML=n.text+" (&#8207;"+n.duration+"&#8207;) ",n.duration-=1,-1===n.duration){t(r);var i=r.__internal.buttons[n.index],o=f(n.index,i);"function"==typeof r.callback&&r.callback.apply(r,[o]),o.close!==!1&&r.close()}}else t(r)}};return{main:function(t,e,n,r){var i,o,s,a;switch(arguments.length){case 1:o=t;break;case 2:o=t,s=e;break;case 3:o=t,s=e,a=n;break;case 4:i=t,o=e,s=n,a=r}return this.set("title",i),this.set("message",o),this.set("onok",s),this.set("oncancel",a),this},setup:function(){return{buttons:[{text:x.defaults.glossary.ok,key:h.ENTER,className:x.defaults.theme.ok},{text:x.defaults.glossary.cancel,key:h.ESC,invokeOnClose:!0,className:x.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(t){this.setContent(t)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(t,e,n){switch(t){case"message":this.setMessage(n);break;case"labels":"ok"in n&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=n.ok,this.__internal.buttons[0].element.innerHTML=n.ok),"cancel"in n&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=n.cancel,this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":n===!0?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===n?0:1}},callback:function(e){t(this);var n;switch(e.index){case 0:"function"==typeof this.get("onok")&&(n=this.get("onok").call(this,e),"undefined"!=typeof n&&(e.cancel=!n));break;case 1:"function"==typeof this.get("oncancel")&&(n=this.get("oncancel").call(this,e),"undefined"!=typeof n&&(e.cancel=!n))}},autoOk:function(t){return e(this,0,t),this},autoCancel:function(t){return e(this,1,t),this}}}),x.dialog("prompt",function(){var e=document.createElement("INPUT"),n=document.createElement("P");return{main:function(t,e,n,r,i){var o,s,a,l,u;switch(arguments.length){case 1:s=t;break;case 2:s=t,a=e;break;case 3:s=t,a=e,l=n;break;case 4:s=t,a=e,l=n,u=r;break;case 5:o=t,s=e,a=n,l=r,u=i}return this.set("title",o),this.set("message",s),this.set("value",a),this.set("onok",l),this.set("oncancel",u),this},setup:function(){return{buttons:[{text:x.defaults.glossary.ok,key:h.ENTER,className:x.defaults.theme.ok},{text:x.defaults.glossary.cancel,key:h.ESC,invokeOnClose:!0,className:x.defaults.theme.cancel}],focus:{element:e,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){e.className=x.defaults.theme.input,e.setAttribute("type","text"),e.value=this.get("value"),this.elements.content.appendChild(n),this.elements.content.appendChild(e)},prepare:function(){},setMessage:function(e){"string"==typeof e?(a(n),n.innerHTML=e):e instanceof t.HTMLElement&&n.firstChild!==e&&(a(n),n.appendChild(e))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(t,n,r){switch(t){case"message":this.setMessage(r);break;case"value":e.value=r;break;case"type":switch(r){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":e.type=r;break;default:e.type="text"}break;case"labels":r.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=r.ok),r.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=r.cancel);break;case"reverseButtons":r===!0?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(t){var n;switch(t.index){case 0:this.settings.value=e.value,"function"==typeof this.get("onok")&&(n=this.get("onok").call(this,t,this.settings.value),"undefined"!=typeof n&&(t.cancel=!n));break;case 1:"function"==typeof this.get("oncancel")&&(n=this.get("oncancel").call(this,t),"undefined"!=typeof n&&(t.cancel=!n))}}}}),"object"==typeof e&&"object"==typeof e.exports?e.exports=x:"function"==typeof define&&define.amd?define([],function(){return x}):t.alertify||(t.alertify=x)}("undefined"!=typeof window?window:this)},{}],14:[function(t,e,n){"document"in window.self&&("classList"in document.createElement("_")?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;r>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",r=t.Element[n],i=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(t,e)},u=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],r=0,i=n.length;i>r;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=u[n]=[],f=function(){return new u(this)};if(a[n]=Error[n],c.item=function(t){return this[t]||null},c.contains=function(t){return t+="",-1!==l(this,t)},c.add=function(){var t,e=arguments,n=0,r=e.length,i=!1;do t=e[n]+"",-1===l(this,t)&&(this.push(t),i=!0);while(++n<r);i&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,r=0,i=n.length,o=!1;do for(t=n[r]+"",e=l(this,t);-1!==e;)this.splice(e,1),o=!0,e=l(this,t);while(++r<i);o&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),r=n?e!==!0&&"remove":e!==!1&&"add";return r&&this[r](t),e===!0||e===!1?e:!n},c.toString=function(){return this.join(" ")},i.defineProperty){var d={get:f,enumerable:!0,configurable:!0};try{i.defineProperty(r,e,d)}catch(h){-2146823252===h.number&&(d.enumerable=!1,i.defineProperty(r,e,d))}}else i[n].__defineGetter__&&r.__defineGetter__(e,f)}}(window.self))},{}],15:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/copy"),o=t("es5-ext/object/map"),s=t("es5-ext/object/valid-callable"),a=t("es5-ext/object/valid-value"),l=Function.prototype.bind,u=Object.defineProperty,c=Object.prototype.hasOwnProperty;r=function(t,e,n){var r,o=a(e)&&s(e.value);return r=i(e),delete r.writable,delete r.value,r.get=function(){return c.call(this,t)?o:(e.value=l.call(o,null==n?this:this[n]),u(this,t,e),this[t])},r},e.exports=function(t){var e=arguments[1];return o(t,function(t,n){return r(n,t,e)})}},{"es5-ext/object/copy":30,"es5-ext/object/map":38,"es5-ext/object/valid-callable":43,"es5-ext/object/valid-value":44}],16:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/assign"),o=t("es5-ext/object/normalize-options"),s=t("es5-ext/object/is-callable"),a=t("es5-ext/string/#/contains");r=e.exports=function(t,e){var n,r,s,l,u;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],null==t?(n=s=!0,r=!1):(n=a.call(t,"c"),r=a.call(t,"e"),s=a.call(t,"w")),u={value:e,configurable:n,enumerable:r,writable:s},l?i(o(l),u):u},r.gs=function(t,e,n){var r,l,u,c;return"string"!=typeof t?(u=n,n=e,e=t,t=null):u=arguments[3],null==e?e=void 0:s(e)?null==n?n=void 0:s(n)||(u=n,n=void 0):(u=e,e=n=void 0),null==t?(r=!0,l=!1):(r=a.call(t,"c"),l=a.call(t,"e")),c={get:e,set:n,configurable:r,enumerable:l},u?i(o(u),c):c}},{"es5-ext/object/assign":27,"es5-ext/object/is-callable":33,"es5-ext/object/normalize-options":39,"es5-ext/string/#/contains":45}],17:[function(t,e,n){"use strict";var r=t("../../object/valid-value");e.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":44}],18:[function(t,e,n){"use strict";var r=t("../../number/to-pos-integer"),i=t("../../object/valid-value"),o=Array.prototype.indexOf,s=Object.prototype.hasOwnProperty,a=Math.abs,l=Math.floor;e.exports=function(t){var e,n,u,c;if(t===t)return o.apply(this,arguments);for(n=r(i(this).length),u=arguments[1],u=isNaN(u)?0:u>=0?l(u):r(this.length)-l(a(u)),e=u;n>e;++e)if(s.call(this,e)&&(c=this[e],c!==c))return e;return-1}},{"../../number/to-pos-integer":25,"../../object/valid-value":44}],19:[function(t,e,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());e.exports=function(t){return r.call(t)===i}},{}],20:[function(t,e,n){"use strict";e.exports=new Function("return this")()},{}],21:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":22,"./shim":23}],22:[function(t,e,n){"use strict";e.exports=function(){var t=Math.sign;return"function"!=typeof t?!1:1===t(10)&&-1===t(-20)}},{}],23:[function(t,e,n){"use strict";e.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},{}],24:[function(t,e,n){"use strict";var r=t("../math/sign"),i=Math.abs,o=Math.floor;e.exports=function(t){return isNaN(t)?0:(t=Number(t),0!==t&&isFinite(t)?r(t)*o(i(t)):t)}},{"../math/sign":21}],25:[function(t,e,n){"use strict";var r=t("./to-integer"),i=Math.max;e.exports=function(t){return i(0,r(t))}},{"./to-integer":24}],26:[function(t,e,n){"use strict";var r=t("./valid-callable"),i=t("./valid-value"),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,l=Object.prototype.propertyIsEnumerable;e.exports=function(t,e){return function(n,u){var c,f=arguments[2],d=arguments[3];return n=Object(i(n)),r(u),c=a(n),d&&c.sort("function"==typeof d?o.call(d,n):void 0),"function"!=typeof t&&(t=c[t]),s.call(t,c,function(t,r){return l.call(n,t)?s.call(u,f,n[t],t,n,r):e})}}},{"./valid-callable":43,"./valid-value":44}],27:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":28,"./shim":29}],28:[function(t,e,n){"use strict";e.exports=function(){var t,e=Object.assign;return"function"!=typeof e?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],29:[function(t,e,n){"use strict";var r=t("../keys"),i=t("../valid-value"),o=Math.max;e.exports=function(t,e){var n,s,a,l=o(arguments.length,2);for(t=Object(i(t)),a=function(r){try{t[r]=e[r]}catch(i){n||(n=i)}},s=1;l>s;++s)e=arguments[s],r(e).forEach(a);if(void 0!==n)throw n;return t}},{"../keys":35,"../valid-value":44}],30:[function(t,e,n){"use strict";var r=t("./assign"),i=t("./valid-value");e.exports=function(t){var e=Object(i(t));return e!==t?e:r({},t)}},{"./assign":27,"./valid-value":44}],31:[function(t,e,n){"use strict";var r,i=Object.create;t("./set-prototype-of/is-implemented")()||(r=t("./set-prototype-of/shim")),e.exports=function(){var t,e,n;return r?1!==r.level?i:(t={},e={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(t){return"__proto__"===t?void(e[t]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(e[t]=n)}),Object.defineProperties(t,e),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:t}),function(e,n){return i(null===e?t:e,n)}):i}()},{"./set-prototype-of/is-implemented":41,"./set-prototype-of/shim":42}],32:[function(t,e,n){"use strict";e.exports=t("./_iterate")("forEach")},{"./_iterate":26}],33:[function(t,e,n){"use strict";e.exports=function(t){return"function"==typeof t}},{}],34:[function(t,e,n){"use strict";var r={"function":!0,object:!0};e.exports=function(t){return null!=t&&r[typeof t]||!1}},{}],35:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":36,"./shim":37}],36:[function(t,e,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],37:[function(t,e,n){"use strict";var r=Object.keys;e.exports=function(t){return r(null==t?t:Object(t))}},{}],38:[function(t,e,n){"use strict";var r=t("./valid-callable"),i=t("./for-each"),o=Function.prototype.call;e.exports=function(t,e){var n={},s=arguments[2];return r(e),i(t,function(t,r,i,a){n[r]=o.call(e,s,t,r,i,a)}),n}},{"./for-each":32,"./valid-callable":43}],39:[function(t,e,n){"use strict";var r=Array.prototype.forEach,i=Object.create,o=function(t,e){var n;for(n in t)e[n]=t[n]};e.exports=function(t){var e=i(null);return r.call(arguments,function(t){null!=t&&o(Object(t),e)}),e}},{}],40:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":41,"./shim":42}],41:[function(t,e,n){"use strict";var r=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||r;return"function"!=typeof t?!1:i(t(e(null),o))===o}},{}],42:[function(t,e,n){"use strict";var r,i=t("../is-object"),o=t("../valid-value"),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(t,e){if(o(t),null===e||i(e))return t;throw new TypeError("Prototype must be null or an object")},e.exports=function(t){var e,n;return t?(2===t.level?t.set?(n=t.set,e=function(t,e){return n.call(r(t,e),e),t}):e=function(t,e){return r(t,e).__proto__=e,t}:e=function i(t,e){var n;return r(t,e),n=s.call(i.nullPolyfill,t),n&&delete i.nullPolyfill.__proto__,null===e&&(e=i.nullPolyfill),t.__proto__=e,n&&a(i.nullPolyfill,"__proto__",l),t},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var t,e=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{t=r.set,t.call(e,n)}catch(i){}if(Object.getPrototypeOf(e)===n)return{set:t,level:2}}return e.__proto__=n,Object.getPrototypeOf(e)===n?{level:2}:(e={},e.__proto__=n,Object.getPrototypeOf(e)===n?{level:1}:!1)}()),t("../create")},{"../create":31,"../is-object":34,"../valid-value":44}],43:[function(t,e,n){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],44:[function(t,e,n){"use strict";e.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},{}],45:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":46,"./shim":47}],46:[function(t,e,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"!=typeof r.contains?!1:r.contains("dwa")===!0&&r.contains("foo")===!1}},{}],47:[function(t,e,n){"use strict";var r=String.prototype.indexOf;e.exports=function(t){return r.call(this,t,arguments[1])>-1}},{}],48:[function(t,e,n){"use strict";var r=Object.prototype.toString,i=r.call("");e.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||r.call(t)===i)||!1}},{}],49:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/set-prototype-of"),o=t("es5-ext/string/#/contains"),s=t("d"),a=t("./"),l=Object.defineProperty;r=e.exports=function(t,e){return this instanceof r?(a.call(this,t),e=e?o.call(e,"key+value")?"key+value":o.call(e,"key")?"key":"value":"value",void l(this,"__kind__",s("",e))):new r(t,e)},i&&i(r,a),r.prototype=Object.create(a.prototype,{constructor:s(r),_resolve:s(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t}),toString:s(function(){return"[object Array Iterator]"})})},{"./":52,d:16,"es5-ext/object/set-prototype-of":40,"es5-ext/string/#/contains":45}],50:[function(t,e,n){"use strict";var r=t("es5-ext/function/is-arguments"),i=t("es5-ext/object/valid-callable"),o=t("es5-ext/string/is-string"),s=t("./get"),a=Array.isArray,l=Function.prototype.call,u=Array.prototype.some;e.exports=function(t,e){var n,c,f,d,h,m,p,g,v=arguments[2];if(a(t)||r(t)?n="array":o(t)?n="string":t=s(t),i(e),f=function(){d=!0},"array"===n)return void u.call(t,function(t){return l.call(e,v,t,f),d?!0:void 0});if("string"!==n)for(c=t.next();!c.done;){if(l.call(e,v,c.value,f),d)return;c=t.next()}else for(m=t.length,h=0;m>h&&(p=t[h],m>h+1&&(g=p.charCodeAt(0),g>=55296&&56319>=g&&(p+=t[++h])),l.call(e,v,p,f),!d);++h);}},{"./get":51,"es5-ext/function/is-arguments":19,"es5-ext/object/valid-callable":43,"es5-ext/string/is-string":48}],51:[function(t,e,n){"use strict";var r=t("es5-ext/function/is-arguments"),i=t("es5-ext/string/is-string"),o=t("./array"),s=t("./string"),a=t("./valid-iterable"),l=t("es6-symbol").iterator;e.exports=function(t){return"function"==typeof a(t)[l]?t[l]():r(t)?new o(t):i(t)?new s(t):new o(t)}},{"./array":49,"./string":54,"./valid-iterable":55,"es5-ext/function/is-arguments":19,"es5-ext/string/is-string":48,"es6-symbol":62}],52:[function(t,e,n){"use strict";var r,i=t("es5-ext/array/#/clear"),o=t("es5-ext/object/assign"),s=t("es5-ext/object/valid-callable"),a=t("es5-ext/object/valid-value"),l=t("d"),u=t("d/auto-bind"),c=t("es6-symbol"),f=Object.defineProperty,d=Object.defineProperties;e.exports=r=function(t,e){return this instanceof r?(d(this,{__list__:l("w",a(t)),__context__:l("w",e),__nextIndex__:l("w",0)}),void(e&&(s(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear)))):new r(t,e)},d(r.prototype,o({constructor:l(r),_next:l(function(){var t;if(this.__list__)return this.__redo__&&(t=this.__redo__.shift(),void 0!==t)?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}}),_resolve:l(function(t){return this.__list__[t]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object Iterator]"})},u({_onAdd:l(function(t){if(!(t>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void f(this,"__redo__",l("c",[t]));this.__redo__.forEach(function(e,n){e>=t&&(this.__redo__[n]=++e)},this),this.__redo__.push(t)}}),_onDelete:l(function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(e=this.__redo__.indexOf(t),-1!==e&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,n){e>t&&(this.__redo__[n]=--e)},this)))}),_onClear:l(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),f(r.prototype,c.iterator,l(function(){return this})),f(r.prototype,c.toStringTag,l("","Iterator"))},{d:16,"d/auto-bind":15,"es5-ext/array/#/clear":17,"es5-ext/object/assign":27,"es5-ext/object/valid-callable":43,"es5-ext/object/valid-value":44,"es6-symbol":62}],53:[function(t,e,n){"use strict";var r=t("es5-ext/function/is-arguments"),i=t("es5-ext/string/is-string"),o=t("es6-symbol").iterator,s=Array.isArray;e.exports=function(t){return null==t?!1:s(t)?!0:i(t)?!0:r(t)?!0:"function"==typeof t[o]}},{"es5-ext/function/is-arguments":19,"es5-ext/string/is-string":48,"es6-symbol":62}],54:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/set-prototype-of"),o=t("d"),s=t("./"),a=Object.defineProperty;r=e.exports=function(t){return this instanceof r?(t=String(t),s.call(this,t),void a(this,"__length__",o("",t.length))):new r(t)},i&&i(r,s),r.prototype=Object.create(s.prototype,{constructor:o(r),_next:o(function(){return this.__list__?this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind():void 0}),_resolve:o(function(t){var e,n=this.__list__[t];return this.__nextIndex__===this.__length__?n:(e=n.charCodeAt(0),e>=55296&&56319>=e?n+this.__list__[this.__nextIndex__++]:n)}),toString:o(function(){return"[object String Iterator]"})})},{"./":52,d:16,"es5-ext/object/set-prototype-of":40}],55:[function(t,e,n){"use strict";var r=t("./is-iterable");e.exports=function(t){if(!r(t))throw new TypeError(t+" is not iterable");return t}},{"./is-iterable":53}],56:[function(t,e,n){(function(n,r){(function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function o(t){return"function"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){U=t}function l(t){Z=t}function u(){return function(){n.nextTick(m)}}function c(){return function(){V(m)}}function f(){var t=0,e=new Q(m),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function d(){var t=new MessageChannel;return t.port1.onmessage=m,function(){t.port2.postMessage(0)}}function h(){return function(){setTimeout(m,1)}}function m(){for(var t=0;X>t;t+=2){var e=et[t],n=et[t+1];e(n),et[t]=void 0,et[t+1]=void 0}X=0}function p(){try{var e=t,n=e("vertx");return V=n.runOnLoop||n.runOnContext,c()}catch(r){return h()}}function g(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(t){try{return t.then}catch(e){return ot.error=e,ot}}function _(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function x(t,e,n){Z(function(t){var r=!1,i=_(n,e,function(n){r||(r=!0,e!==n?O(t,n):E(t,n))},function(e){r||(r=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,S(t,i))},t)}function w(t,e){e._state===rt?E(t,e._result):e._state===it?S(t,e._result):T(e,void 0,function(e){O(t,e)},function(e){S(t,e)})}function k(t,e){if(e.constructor===t.constructor)w(t,e);else{var n=b(e);n===ot?S(t,ot.error):void 0===n?E(t,e):o(n)?x(t,e,n):E(t,e)}}function O(t,e){t===e?S(t,v()):i(e)?k(t,e):E(t,e)}function j(t){t._onerror&&t._onerror(t._result),C(t)}function E(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&Z(C,t))}function S(t,e){t._state===nt&&(t._state=it,t._result=e,Z(j,t))}function T(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+rt]=n,i[o+it]=r,0===o&&t._state&&Z(C,t)}function C(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?P(n,r,i,o):i(o);t._subscribers.length=0}}function M(){this.error=null}function L(t,e){try{return t(e)}catch(n){return st.error=n,st}}function P(t,e,n,r){var i,s,a,l,u=o(n);if(u){if(i=L(n,r),i===st?(l=!0,s=i.error,i=null):a=!0,e===i)return void S(e,y())}else i=r,a=!0;e._state!==nt||(u&&a?O(e,i):l?S(e,s):t===rt?E(e,i):t===it&&S(e,i))}function A(t,e){try{e(function(e){O(t,e)},function(e){S(t,e)})}catch(n){S(t,n)}}function z(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(g),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?E(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&E(n.promise,n._result))):S(n.promise,n._validationError())}function B(t){return new at(this,t).promise}function H(t){function e(t){O(i,t)}function n(t){S(i,t)}var r=this,i=new r(g);if(!q(t))return S(i,new TypeError("You must pass an array to race.")),i;for(var o=t.length,s=0;i._state===nt&&o>s;s++)T(r.resolve(t[s]),void 0,e,n);return i}function N(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(g);return O(n,t),n}function I(t){var e=this,n=new e(g);return S(n,t),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(t){this._id=dt++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==t&&(o(t)||D(),this instanceof R||G(),A(this,t))}function F(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=ht)}var W;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var V,U,Y,q=W,X=0,Z=({}.toString,function(t,e){et[X]=t,et[X+1]=e,X+=2,2===X&&(U?U(m):Y())}),K="undefined"!=typeof window?window:void 0,J=K||{},Q=J.MutationObserver||J.WebKitMutationObserver,$="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),tt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,et=new Array(1e3);Y=$?u():Q?f():tt?d():void 0===K&&"function"==typeof t?p():h();var nt=void 0,rt=1,it=2,ot=new M,st=new M;z.prototype._validateInput=function(t){return q(t)},z.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},z.prototype._init=function(){this._result=new Array(this.length)};var at=z;z.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===nt&&e>i;i++)t._eachEntry(r[i],i)},z.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;s(t)?t.constructor===r&&t._state!==nt?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},z.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===nt&&(r._remaining--,t===it?S(i,n):r._result[e]=n),0===r._remaining&&E(i,r._result)},z.prototype._willSettleAt=function(t,e){var n=this;T(t,void 0,function(t){n._settledAt(rt,e,t)},function(t){n._settledAt(it,e,t)})};var lt=B,ut=H,ct=N,ft=I,dt=0,ht=R;R.all=lt,R.race=ut,R.resolve=ct,R.reject=ft,R._setScheduler=a,R._setAsap=l,R._asap=Z,R.prototype={constructor:R,then:function(t,e){var n=this,r=n._state;if(r===rt&&!t||r===it&&!e)return this;var i=new this.constructor(g),o=n._result;if(r){var s=arguments[r-1];Z(function(){P(r,i,s,o)})}else T(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var mt=F,pt={Promise:ht,polyfill:mt};"function"==typeof define&&define.amd?define(function(){return pt}):"undefined"!=typeof e&&e.exports?e.exports=pt:"undefined"!=typeof this&&(this.ES6Promise=pt),mt()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],57:[function(t,e,n){"use strict";t("./is-implemented")()||Object.defineProperty(t("es5-ext/global"),"Set",{value:t("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":58,"./polyfill":61,"es5-ext/global":20}],58:[function(t,e,n){"use strict";e.exports=function(){var t,e,n;return"function"!=typeof Set?!1:"[object Set]"!==String(Set.prototype)?!1:(t=new Set(["raz","dwa","trzy"]),3!==t.size?!1:"function"!=typeof t.add?!1:"function"!=typeof t.clear?!1:"function"!=typeof t["delete"]?!1:"function"!=typeof t.entries?!1:"function"!=typeof t.forEach?!1:"function"!=typeof t.has?!1:"function"!=typeof t.keys?!1:"function"!=typeof t.values?!1:(e=t.values(),n=e.next(),n.done!==!1?!1:"raz"!==n.value?!1:!0))}},{}],59:[function(t,e,n){"use strict";e.exports=function(){return"undefined"==typeof Set?!1:"[object Set]"===Object.prototype.toString.call(Set.prototype)}()},{}],60:[function(t,e,n){"use strict";var r,i=t("es5-ext/object/set-prototype-of"),o=t("es5-ext/string/#/contains"),s=t("d"),a=t("es6-iterator"),l=t("es6-symbol").toStringTag,u=Object.defineProperty;r=e.exports=function(t,e){return this instanceof r?(a.call(this,t.__setData__,t),e=e&&o.call(e,"key+value")?"key+value":"value",void u(this,"__kind__",s("",e))):new r(t,e)},i&&i(r,a),r.prototype=Object.create(a.prototype,{constructor:s(r),_resolve:s(function(t){return"value"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__list__[t]]}),toString:s(function(){return"[object Set Iterator]"})}),u(r.prototype,l,s("c","Set Iterator"))},{d:16,"es5-ext/object/set-prototype-of":40,"es5-ext/string/#/contains":45,"es6-iterator":52,"es6-symbol":62}],61:[function(t,e,n){
"use strict";var r,i,o=t("es5-ext/array/#/clear"),s=t("es5-ext/array/#/e-index-of"),a=t("es5-ext/object/set-prototype-of"),l=t("es5-ext/object/valid-callable"),u=t("d"),c=t("event-emitter"),f=t("es6-symbol"),d=t("es6-iterator/valid-iterable"),h=t("es6-iterator/for-of"),m=t("./lib/iterator"),p=t("./is-native-implemented"),g=Function.prototype.call,v=Object.defineProperty,y=Object.getPrototypeOf;e.exports=r=function(){var t,e=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return t=p&&a?a(new Set,y(this)):this,null!=e&&d(e),v(t,"__setData__",u("c",[])),e?(h(e,function(t){-1===s.call(this,t)&&this.push(t)},t.__setData__),t):t},p&&(a&&a(r,Set),r.prototype=Object.create(Set.prototype,{constructor:u(r)})),c(Object.defineProperties(r.prototype,{add:u(function(t){return this.has(t)?this:(this.emit("_add",this.__setData__.push(t)-1,t),this)}),clear:u(function(){this.__setData__.length&&(o.call(this.__setData__),this.emit("_clear"))}),"delete":u(function(t){var e=s.call(this.__setData__,t);return-1===e?!1:(this.__setData__.splice(e,1),this.emit("_delete",e,t),!0)}),entries:u(function(){return new m(this,"key+value")}),forEach:u(function(t){var e,n,r,i=arguments[1];for(l(t),e=this.values(),n=e._next();void 0!==n;)r=e._resolve(n),g.call(t,i,r,r,this),n=e._next()}),has:u(function(t){return-1!==s.call(this.__setData__,t)}),keys:u(i=function(){return this.values()}),size:u.gs(function(){return this.__setData__.length}),values:u(function(){return new m(this)}),toString:u(function(){return"[object Set]"})})),v(r.prototype,f.iterator,u(i)),v(r.prototype,f.toStringTag,u("c","Set"))},{"./is-native-implemented":59,"./lib/iterator":60,d:16,"es5-ext/array/#/clear":17,"es5-ext/array/#/e-index-of":18,"es5-ext/object/set-prototype-of":40,"es5-ext/object/valid-callable":43,"es6-iterator/for-of":50,"es6-iterator/valid-iterable":55,"es6-symbol":62,"event-emitter":67}],62:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Symbol:t("./polyfill")},{"./is-implemented":63,"./polyfill":65}],63:[function(t,e,n){"use strict";e.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(e){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},{}],64:[function(t,e,n){"use strict";e.exports=function(t){return t&&("symbol"==typeof t||"Symbol"===t["@@toStringTag"])||!1}},{}],65:[function(t,e,n){"use strict";var r,i,o,s=t("d"),a=t("./validate-symbol"),l=Object.create,u=Object.defineProperties,c=Object.defineProperty,f=Object.prototype,d=l(null);"function"==typeof Symbol&&(r=Symbol);var h=function(){var t=l(null);return function(e){for(var n,r,i=0;t[e+(i||"")];)++i;return e+=i||"",t[e]=!0,n="@@"+e,c(f,n,s.gs(null,function(t){r||(r=!0,c(this,n,s(t)),r=!1)})),n}}();o=function(t){if(this instanceof o)throw new TypeError("TypeError: Symbol is not a constructor");return i(t)},e.exports=i=function m(t){var e;if(this instanceof m)throw new TypeError("TypeError: Symbol is not a constructor");return e=l(o.prototype),t=void 0===t?"":String(t),u(e,{__description__:s("",t),__name__:s("",h(t))})},u(i,{"for":s(function(t){return d[t]?d[t]:d[t]=i(String(t))}),keyFor:s(function(t){var e;a(t);for(e in d)if(d[e]===t)return e}),hasInstance:s("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",r&&r.iterator||i("iterator")),match:s("",r&&r.match||i("match")),replace:s("",r&&r.replace||i("replace")),search:s("",r&&r.search||i("search")),species:s("",r&&r.species||i("species")),split:s("",r&&r.split||i("split")),toPrimitive:s("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:s("",r&&r.toStringTag||i("toStringTag")),unscopables:s("",r&&r.unscopables||i("unscopables"))}),u(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),u(i.prototype,{toString:s(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:s(function(){return a(this)})}),c(i.prototype,i.toPrimitive,s("",function(){return a(this)})),c(i.prototype,i.toStringTag,s("c","Symbol")),c(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive])),c(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag]))},{"./validate-symbol":66,d:16}],66:[function(t,e,n){"use strict";var r=t("./is-symbol");e.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},{"./is-symbol":64}],67:[function(t,e,n){"use strict";var r,i,o,s,a,l,u,c=t("d"),f=t("es5-ext/object/valid-callable"),d=Function.prototype.apply,h=Function.prototype.call,m=Object.create,p=Object.defineProperty,g=Object.defineProperties,v=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};r=function(t,e){var n;return f(e),v.call(this,"__ee__")?n=this.__ee__:(n=y.value=m(null),p(this,"__ee__",y),y.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},i=function(t,e){var n,i;return f(e),i=this,r.call(this,t,n=function(){o.call(i,t,n),d.call(e,this,arguments)}),n.__eeOnceListener__=e,this},o=function(t,e){var n,r,i,o;if(f(e),!v.call(this,"__ee__"))return this;if(n=this.__ee__,!n[t])return this;if(r=n[t],"object"==typeof r)for(o=0;i=r[o];++o)(i===e||i.__eeOnceListener__===e)&&(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else(r===e||r.__eeOnceListener__===e)&&delete n[t];return this},s=function(t){var e,n,r,i,o;if(v.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;n>e;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)d.call(r,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;n>e;++e)o[e-1]=arguments[e];d.call(i,this,o)}},a={on:r,once:i,off:o,emit:s},l={on:c(r),once:c(i),off:c(o),emit:c(s)},u=g({},l),e.exports=n=function(t){return null==t?m(u):g(Object(t),l)},n.methods=a},{d:16,"es5-ext/object/valid-callable":43}],68:[function(t,e,n){"use strict";function r(t,e){if(""===t||""===e||t.length!==e.length)return!1;for(var n=0,r=0,i=0,o=0;r<t.length&&i<e.length;++r,++i)if(t[r]!=e[i]){if(++o>1)return!1;t[r+1]===e[i]?++r:t[r]===e[i+1]?++i:t[r+1]===e[i+1]&&(++r,++i)}return 1===n}function i(){return(navigator.userLanguage||navigator.language).slice(0,2).toLowerCase()}function o(t){var e=t.match(/translate(3d)?\((-?\d+).*?,\s?(-?\d+).*?(,\s?(-?\d+).*?)?\)/i);return e?new x.Point(Number(e[2]),Number(e[3])):new x.Point(0,0)}function s(t){var e=o(t.style.transform);t.style.transform="translate("+e.x+"px, "+e.y+"px)"}function a(t,e){if(3!==e.platforms.length)return null;var n=e.platforms.map(function(e){return t.platforms[e]});return n.every(function(t){return 2===t.transfers.length})?n:null}function l(t){if(3!==t.length)throw new Error("must have 3 vertices");var e=t[1].subtract(t[0]),n=t[2].subtract(t[0]),r=d(e,e),i=d(n,n);return new x.Point(n.y*r-e.y*i,e.x*i-n.x*r).divideBy(2*(e.x*n.y-e.y*n.x)).add(t[0])}function u(t){if("dataset"in t)return t.dataset;for(var e=t.attributes,n={},r=0;r<e.length;++r){var i=e[r].name;i.startsWith("data-")&&(n[i.slice(5)]=t.getAttribute(i))}return n}function c(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.setAttribute("data-"+i,e[i])}}function f(t,e){var n=0;setInterval(function(){return document.title=t[++n%t.length]},e)}function d(t,e){return t.x*e.x+t.y*e.y}function h(t,e){return d(t,e)/t.distanceTo(e)}function m(t){return t.reduce(function(t,e){return t.add(e)}).divideBy(t.length)}function p(t,e,n){return new x.Point(t.x+e*Math.cos(n),t.y+e*Math.sin(n))}function g(t,e){function n(e){if(void 0===t.platforms.find(function(t){return t.name===e}))throw new Error("platform "+e+" doesn't exist")}function r(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var i=r[e],o=t[i];"string"==typeof o?n(o):o.forEach(n)}}return new Promise(function(n,i){var o=e.crossPlatform;Object.keys(o).forEach(function(e){void 0===t.platforms.find(function(t){return t.name===e})&&i("platform "+e+" doesn't exist");var n=o[e];"forEach"in n?n.forEach(r):r(n)}),n("hints json seems okay")})}function v(t,e,n){var r=n.spans.map(function(e){return t.spans[e]}),i=[];r.forEach(function(e){return e.routes.forEach(function(e){return i.push(t.routes[e])})});var o=i.map(function(t){return t.line}),s=e[n.name];if(s)if("forEach"in s){for(var a=0;a<s.length;++a)if(Object.keys(s[a]).some(function(t){return o.indexOf(t)>-1}))return a}else if(Object.keys(s).some(function(t){return o.indexOf(t)>-1}))return-1;return null}function y(t,e){var n=document.createElement("a"),r=new Blob([e],{type:"octet/stream"}),i=window.URL.createObjectURL(r);n.href=i,n.download=t,n.click(),window.URL.revokeObjectURL(i)}function b(t){var e=Math.abs(t.x),n=Math.abs(t.y);return t.divideBy(n>e?n:e)}function _(t,e,n){var r=e*e/n;return t>r?e/n*2+(t-r)/e:2*Math.sqrt(t/n)}var x=window.L;n.diffByOne=r,n.getUserLanguage=i,n.parseTransform=o,n.replaceTransform=s,n.findCircle=a,n.getCircumcenter=l,n.getSVGDataset=u,n.setSVGDataset=c,n.flashTitle=f,n.dot=d,n.angle=h,n.getCenter=m,n.polarToCartesian=p,n.verifyHints=g,n.hintContainsLine=v,n.downloadAsFile=y,n.vectorToGradCoordinates=b,n.lineRulesPromise=new Promise(function(t){var e="css/style.css",n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,n.onload=function(e){console.log(document.styleSheets.length);for(var n=document.styleSheets[document.styleSheets.length-1].cssRules,r={},i=0;i<n.length;++i){var o=n[i];if(o instanceof CSSStyleRule){var s=o.selectorText;if("#paths-outer .E"===s)r.E=o.style.stroke;else{var a=s.match(/\.(M\d+|L)/);a&&(r[a[1]]=o.style.stroke)}}}console.log("resolving"),t(r)},document.head.appendChild(n)}),n.timeToTravel=_},{}]},{},[6]);