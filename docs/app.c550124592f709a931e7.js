webpackJsonp([2],[,,function(t,e,r){"use strict";(function(t){function n(t,e){var r=new Set;return t.forEach(function(t){e.has(t)&&r.add(t)}),r}function o(t,e){var r=t.indexOf(e);r<0||(t[r]=m.last(t),t.pop())}function i(t,e){return g.point(+t.x.toFixed(e),+t.y.toFixed(e))}function a(t,e){var r=t.getContainer().getBoundingClientRect(),n=r.top,o=r.left,i=g.point(e.clientX-o,e.clientY-n);return t.containerPointToLatLng(i)}function s(){for(var t=document.querySelectorAll(j),e=0,r=t;e<r.length;e++){var n=r[e];n.style.opacity=null,"t"!==n.id[1]&&(n.style.filter=null)}}function u(t,e){var r=document.createEvent("MouseEvents");r.initEvent(e,!0,!0),t.dispatchEvent(r)}function l(t){var e=t.name,r=t.altNames,n=d(),o=[e];return n&&r[n]&&o.push(r[n]),r.en&&o.push(r.en),o}function c(t){return m.zip.apply(void 0,t.map(l)).map(function(t){return m.uniq(t).join(" / ")}).filter(m.identity)}function f(t,e){var r=e.map(function(e){return t.distanceTo(e)}),n=e[1].subtract(e[0]).multiplyBy(r[0]/(r[0]+r[1])).add(e[0]),o=t.subtract(n);return e.map(function(t){return i(t.add(o),2)})}function p(t,r,n,o){return void 0===n&&(n=100),void 0===o&&(o=100),v(this,void 0,void 0,function(){var i,a;return y(this,function(s){switch(s.label){case 0:i=0,s.label=1;case 1:return i<o?(a=t(),r(a)?[2,a]:[4,e.delay(n)]):[3,4];case 2:s.sent(),s.label=3;case 3:return++i,[3,1];case 4:throw new Error("rejected")}})})}function d(){var t=location.search.match(/city=(\w+)/),e=t?t[1]:"spb",r={spb:"fi",qazan:"tt",helsinki:"se"};return r[e]}function h(t,e){var r=t.get(e);if(void 0===r)throw console.error("in map",t,":",e,"->",r),new Error("key or val is undefined");return r}var v=this&&this.__awaiter||function(e,r,n,o){return new(n||(n=t))(function(t,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(a,s)}u((o=o.apply(e,r||[])).next())})},y=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}};Object.defineProperty(e,"__esModule",{value:!0});var g=r(1),m=r(3),b=r(32);e.algorithm=b;var w=r(15);e.geo=w;var _=r(13);e.math=_;var x=r(31);e.Mediator=x.default;var k=r(35);e.sfx=k;var M=r(6);e.svg=M;var E=r(33);e.color=E;var O=r(7);e.dom=O;var A=r(14);e.events=A;var j=["paths-inner","paths-outer","transfers-inner","transfers-outer","station-circles"].map(function(t){return"#"+t+" > *"}).join(", ");e.intersection=n,e.deleteFromArray=o,e.roundPoint=i,e.mouseToLatLng=a,e.resetStyle=s,e.triggerMouseEvent=u,e.getPlatformNames=l,e.getPlatformNamesZipped=c,e.midPointsToEnds=f,e.delay=function(e){return new t(function(t,r){return setTimeout(t,e)})},e.repeatUntil=p,e.getSecondLanguage=d,e.tryGetFromMap=h}).call(e,r(0))},,,,function(t,e,r){"use strict";function n(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function o(t,e){var r=n("circle");return r.setAttribute("r",e.toString()),r.setAttribute("cy",t.y.toString()),r.setAttribute("cx",t.x.toString()),r}function i(t,e){var r=n("line");return r.setAttribute("x1",t.x.toString()),r.setAttribute("y1",t.y.toString()),r.setAttribute("x2",e.x.toString()),r.setAttribute("y2",e.y.toString()),r}function a(t,e,r){var o=n("path");return c(o,t,e,r),o}function s(t){var e=[],r=/\D([\d\.]+).*?,.*?([\d\.]+)/g,n=t.getAttribute("d");if(!n)return null;for(var o;null!==(o=r.exec(n));)e.push(v.point(Number(o[1]),Number(o[2])));return e}function u(t,e){if(4!==e.length)throw new Error("there should be 4 points");var r=["M"].concat(e.map(function(t){return t.x+","+t.y}));r.splice(2,0,"C"),t.setAttribute("d",r.join(" "))}function l(t){var e=[],r=/\D([\d\.]+)/g,n=t.getAttribute("d");if(!n)return null;for(var o;null!==(o=r.exec(n));)e.push(Number(o[1]));return e}function c(t,e,r,n){var o=y.getCircumcenter([e,r,n]),i=Math.atan2(e.y-o.y,e.x-o.x),a=Math.atan2(r.y-o.y,r.x-o.x),s=a-i,u=s<=Math.PI||s>-Math.PI?0:1,l=e.subtract(o),c=r.subtract(o),f=y.det(l,c)<0?0:1,p=y.dot(n.subtract(e),n.subtract(r));p<0&&(f=1-f,u=1-u);var d=o.distanceTo(e),h=["M",e.x,e.y,"A",d,d,0,u,f,r.x,r.y].join(" ");t.setAttribute("d",h)}function f(t){var e=n("path");return u(e,t),e}function p(t,e,r){var n=a(t,e,r),o=n.cloneNode(!0);return[n,o]}function d(t,e){var r=e.clone();return t.x===e.x?r.x+=.01:t.y===e.y&&(r.y+=.01),[i(t,r),i(t,r)]}function h(t){var e=v.point(+g.attr(t,"cx"),+g.attr(t,"cy")),r=~~g.attr(t,"r"),n=v.point(0+r,4+r);return e.subtract(n)}Object.defineProperty(e,"__esModule",{value:!0});var v=r(1),y=r(13),g=r(7),m=r(36);e.filters=m;var b=r(37);e.gradients=b,e.createSVGElement=n,e.makeCircle=o,e.makeLine=i,e.makeArc=a,e.getBezierPathPoints=s,e.setBezierPath=u,e.getCircularPath=l,e.setCircularPath=c,e.makeCubicBezier=f,e.makeTransferArc=p,e.makeTransferLine=d,e.circleOffset=h},function(t,e,r){"use strict";function n(t,e,r){void 0===e&&(e=100),void 0===r&&(r=100);var n=t.slice(1),o="#"===t[0]?function(){return document.getElementById(n)}:function(){return document.querySelector(t)};return s.repeatUntil(o,function(t){return null!==t},e,r)}function o(t){for(var e;e=t.firstChild;)t.removeChild(e)}function i(t){var e=document.getElementById(t);if(!e)throw new Error("no element with id="+t+" exists");return e}function a(t,e){var r=t.getAttribute(e);if(!r)throw new Error("no attribute "+e+" on element with id="+t.id+" exists");return r}Object.defineProperty(e,"__esModule",{value:!0});var s=r(2);e.tryGetElement=n,e.removeAllChildren=o,e.byId=i,e.attr=a},function(t,e,r){"use strict";(function(t){function n(t){return u(this,void 0,void 0,function(){var r,n,o,i,a,s;return l(this,function(u){switch(u.label){case 0:return[4,c.getJSON(t)];case 1:for(r=u.sent(),n=Object.keys(r),o=0,i=n;o<i.length;o++)a=i[o],s=r[a],f.set(a.toLowerCase(),e.userLanguage in s?s[e.userLanguage]:a);return p=new RegExp(n.join("|"),"ig"),[2]}})})}function o(t){var e=f.get(t.toLowerCase());return void 0===e?t:t.toUpperCase()===t?e.toUpperCase():e}function i(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t.map(function(t){return t.replace(p,o)}).map(function(t,r){return t+(e[r]||"")}).join("")}function a(t,r){return 0===t?"":""+t+(t>1&&"en"===e.userLanguage?r+"s":r)}function s(t){if(void 0===t)return"";if(t<60)return Math.round(t)+" seconds";if(t<3570){var e=Math.round(t/60);return a(e,"min")}var r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60);return(r>0?r+(o=["%hour%"],o.raw=["%hour%"],i(o)):"")+" "+a(n,"min");var o}var u=this&&this.__awaiter||function(e,r,n,o){return new(n||(n=t))(function(t,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(a,s)}u((o=o.apply(e,r||[])).next())})},l=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}};Object.defineProperty(e,"__esModule",{value:!0});var c=r(11);e.userLanguage=navigator.language.slice(0,2).toLowerCase();var f=new Map,p=new RegExp(Object.keys(f).join("|"),"ig");e.updateDictionary=n,e.translate=o,e.tr=i,e.formatTime=s}).call(e,r(0))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(45),o={platformBindings:new WeakMap,dummyBindings:new n.WeakBiMap,outerEdgeBindings:new n.WeakBiMap,innerEdgeBindings:new n.WeakBiMap,gradientBindings:new WeakMap};e.default=Object.freeze(o)},,function(t,e,r){"use strict";(function(t,n){function o(){return i(this,void 0,void 0,function(){var t,e,r,n,o,i,u,l,c,f;return a(this,function(a){switch(a.label){case 0:return t=document.getElementById("scheme"),[4,s.repeatUntil(function(){return t.sheet},function(t){return null!==t})];case 1:for(e=a.sent(),r=new Map,n=0,o=e.cssRules;n<o.length;n++)if(i=o[n],i instanceof CSSStyleRule)for(u=0,l=i.selectorText.split(",").map(function(t){return t.trim()});u<l.length;u++)c=l[u],f=c.match(/^.(M\d+|L|E)$/),f&&f[1]&&r.set(f[1],i.style);return console.log(r),[2,r]}})})}var i=this&&this.__awaiter||function(e,r,n,o){return new(n||(n=t))(function(t,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(a,s)}u((o=o.apply(e,r||[])).next())})},a=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(2),u=Date.now();e.cachelessFetch=function(t){return n(t+"?"+u)},e.getJSON=function(t){return e.cachelessFetch(t).then(function(t){return t.json()})},e.getLineRules=o}).call(e,r(0),r(25))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){if(t===e)throw new Error("source is the same as target: "+t);this._source=t,this._target=e}return Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){this._source=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),t.prototype.isOf=function(t,e){return this._source===t&&this._target===e||this._source===e&&this._target===t},t.prototype.has=function(t){return this._source===t||this._target===t},t.prototype.other=function(t){if(this._source===t)return this._target;if(this._target===t)return this._source;throw new Error("span does not have vertex")},t.prototype.isAdjacent=function(t){return this.has(t._source)||this.has(t._target)},t.prototype.invert=function(){t=[this._target,this._source],this._source=t[0],this._target=t[1];var t},t}();e.default=n},function(t,e,r){"use strict";function n(t){return Math.abs(t.x)<Number.EPSILON||Math.abs(t.y)<Number.EPSILON}function o(t,e){return t.x*e.x+t.y*e.y}function i(t,e){return t.x*e.y-e.x*t.y}function a(t){return t.divideBy(Math.sqrt(o(t,t)))}function s(t,e){var r=a(t),o=a(e),i=r.add(o);return n(i)?y.point(0,0):a(i)}function u(t,e){var r=e.subtract(t);return[y.point(r.y,-r.x),y.point(-r.y,r.x)]}function l(t,e,r,n){void 0===n&&(n=1);var o=t.subtract(e),a=r.subtract(e),l=s(o,a),c=i(o,a)<0?-n:n;return u(e,l.multiplyBy(c).add(e))}function c(t,e){return o(t,e)/t.distanceTo(e)}function f(t){return t.reduce(function(t,e){return t.add(e)}).divideBy(t.length)}function p(t){if(3!==t.length)throw new Error("must have 3 vertices");var e=t[0],r=t[1].subtract(e),n=t[2].subtract(e),a=o(r,r),s=o(n,n);return y.point(n.y*a-r.y*s,r.x*s-n.x*a).divideBy(2*i(r,n)).add(e)}function d(t,e,r){return y.point(t.x+e*Math.cos(r),t.y+e*Math.sin(r))}function h(t){var e=Math.abs(t.x),r=Math.abs(t.y);return t.divideBy(e<r?r:e)}function v(t,e,r){var n=e*e/r;return n<t?e/r*2+(t-n)/e:2*Math.sqrt(t/r)}Object.defineProperty(e,"__esModule",{value:!0});var y=r(1);e.isArbitrarilySmall=n,e.dot=o,e.det=i,e.normalize=a,e.bisect=s,e.orthogonal=u,e.wings=l,e.angle=c,e.mean=f,e.getCircumcenter=p,e.polarToCartesian=d,e.vectorToGradCoordinates=h,e.timeToTravel=v},function(t,e,r){"use strict";(function(t){function r(t){function e(){removeEventListener("keydown",r),removeEventListener("backbutton",n)}var r=function(r){27===r.keyCode&&(e(),t(r))},n=function(r){e(),t(r)};addEventListener("keydown",r),addEventListener("backbutton",n)}Object.defineProperty(e,"__esModule",{value:!0}),e.once=function(e,r){return new t(function(t){e.addEventListener(r,function n(o){e.removeEventListener(r,n),t(o)})})},e.onceEscapePress=r,e.transitionEnd=function(t){return e.once(t,"transitionend")}}).call(e,r(0))},function(t,e,r){"use strict";function n(t,e){var r=e.length;if(r<1)throw new Error("an objects array must contain at least 1 object");for(var n=e[0],o=t.distanceTo(n.location||n),i=1;i<r;++i){var a=e[i],s=t.distanceTo(a.location||a);s<o&&(n=a,o=s)}return n}function o(t,e,r,n){void 0===n&&(n=!1);var o=e.map(function(e){return{item:e,distance:t.distanceTo(e.location)}}).filter(function(t){return t.distance<=r});return n&&o.sort(function(t,e){return t.distance-e.distance}),o.map(function(t){return t.item})}function i(t){return s.latLng(u.meanBy(t,function(t){return t.lat}),u.meanBy(t,function(t){return t.lng}))}function a(t,e,r,n){void 0===r&&(r=1e-5);var o=i(t),a=e(o);n&&n(o);for(var u=10;u>r;u*=.61803398875)for(var l=u,c=-l;c<=l;c+=u)for(var f=-l;f<=l;f+=u){var p=s.latLng(o.lat+c,o.lng+f),d=e(p);d<a&&(o=p,a=d,n&&n(o))}return o}Object.defineProperty(e,"__esModule",{value:!0});var s=r(1),u=r(3);e.findClosestObject=n,e.findObjectsWithinRadius=o,e.getCenter=i,e.calculateGeoMean=a},function(t,e,r){"use strict";function n(t,e,r){if(void 0===r&&(r=!1),!r)return void(t.style.transform="scale("+e+")");u.add(t);var n=t.getAttribute("r");n&&(t.setAttribute("data-r",n),t.setAttribute("r",(+n*e).toString()))}function o(t,e){var r=parseFloat(s.byId("transfers-outer").style.strokeWidth||""),n=parseFloat(s.byId("transfers-inner").style.strokeWidth||""),o=a.default.outerEdgeBindings.get(t),i=a.default.innerEdgeBindings.get(t);l.add(o),l.add(i),o.style.strokeWidth=r*e+"px",i.style.strokeWidth=n*e+"px"}function i(){u.forEach(function(t){var e=t.getAttribute("data-r");null!==e&&t.setAttribute("r",e)}),l.forEach(function(t){return t.style.strokeWidth=null}),l.clear(),u.clear()}Object.defineProperty(e,"__esModule",{value:!0});var a=r(9),s=r(7),u=new Set,l=new Set;e.scaleCircle=n,e.scaleTransfer=o,e.unscaleAll=i},,,,function(t,e,r){var n=r(41);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(42);"string"==typeof n&&(n=[[t.i,n,""]]);r(5)(n,{});n.locals&&(t.exports=n.locals)},,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(27);e.Platform=o.default;var i=r(29);e.Station=i.default;var a=r(12);e.Edge=a.default;var s=r(28);e.Span=s.default;var u=r(30);e.Transfer=u.default;var l=r(2),c=function(){function t(t){var e=this,r=function(t){return n.latLng(t.lat,t.lng)};this.platforms=t.platforms.map(function(t){return new o.default(t.name,r(t.location),t.altNames)}),this.stations=[],this.routes=t.routes,this.lines=t.lines,this.transfers=t.transfers.map(function(t){return new u.default(e.platforms[t.source],e.platforms[t.target])});var a=function(t){return t.routes.map(function(t){return e.routes[t]})};this.spans=t.spans.map(function(t){return new s.default(e.platforms[t.source],e.platforms[t.target],a(t))}),console.time("restore");for(var l=new Set(this.transfers),c=new Set(this.platforms);l.size>0;){var f=l.values().next().value,p=(new Set).add(f.source).add(f.target);l.delete(f);for(var d=p.values(),h=d.next().value;void 0!==h;h=d.next().value){for(var v=new Set,y=l.values(),g=y.next().value;void 0!==g;g=y.next().value)g.source===h?(p.add(g.target),v.add(g)):g.target===h&&(p.add(g.source),v.add(g));v.forEach(function(t){return l.delete(t)}),c.delete(h)}var m=new i.default(Array.from(p));this.stations.push(m)}c.forEach(function(t){return e.stations.push(new i.default([t]))}),console.timeEnd("restore")}return t.prototype.toJSON=function(){var t=this;return JSON.stringify({platforms:this.platforms.map(function(t){return{name:t.name,altNames:t.altNames,location:t.location}}),transfers:this.transfers.map(function(e){return{source:t.platforms.indexOf(e.source),target:t.platforms.indexOf(e.target)}}),lines:this.lines,spans:this.spans.map(function(e){return{source:t.platforms.indexOf(e.source),target:t.platforms.indexOf(e.target),routes:e.routes.map(function(e){return t.routes.indexOf(e)})}}),routes:this.routes},function(t,e){return t.startsWith("_")?void 0:e})},t.prototype.deletePlatform=function(t){console.log("removing platform",t);for(var e=0,r=t.transfers;e<r.length;e++){var n=r[e];l.deleteFromArray(this.transfers,n)}if(t.transfers.length=0,1===t.spans.length){var o=t.spans[0],i=o.other(t);l.deleteFromArray(i.spans,o),l.deleteFromArray(this.spans,o)}else if(2===t.spans.length){var a=t.spans,s=a[0],u=a[1],c=u.other(t);if(!c)throw new Error("span does not have other end");if(2===t.passingRoutes().size){var f=s.other(t);l.deleteFromArray(f.spans,s),l.deleteFromArray(this.spans,s)}else s.source===t?s.source=c:s.target=c;l.deleteFromArray(c.spans,u),l.deleteFromArray(this.spans,u)}else for(var p=0,d=t.spans;p<d.length;p++){var o=d[p],i=o.other(t);l.deleteFromArray(i.spans,o),l.deleteFromArray(this.spans,o)}var h=t.station;1===h.platforms.length?l.deleteFromArray(this.stations,h):l.deleteFromArray(h.platforms,t),l.deleteFromArray(this.platforms,t)},t}();e.default=c},,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r,n){void 0===r&&(r={}),this.spans=[],this.transfers=[],this.name=t,this.altNames=r,this.location=e,this.elevation=n}return Object.defineProperty(t.prototype,"station",{get:function(){return this._station},enumerable:!0,configurable:!0}),t.prototype.passingRoutes=function(){for(var t=new Set,e=0,r=this.spans;e<r.length;e++)for(var n=r[e],o=0,i=n.routes;o<i.length;o++){var a=i[o];t.add(a)}return t},t.prototype.passingLines=function(){for(var t=new Set,e=0,r=this.spans;e<r.length;e++)for(var n=r[e],o=0,i=n.routes;o<i.length;o++){var a=i[o];t.add(a.line)}return t},t}();e.default=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(2),i=r(12),a=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return e.spans.push(o),r.spans.push(o),o.routes=n,o}return n(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){void 0!==this._source&&o.deleteFromArray(this._source.spans,this),this._source=t,t.spans.push(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){void 0!==this._target&&o.deleteFromArray(this._target.spans,this),this._target=t,t.spans.push(this)},enumerable:!0,configurable:!0}),e}(i.default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=function(){function t(t){this.platforms=t;for(var e=0,r=t;e<r.length;e++){var n=r[e];n._station=this}}return t.prototype.getNames=function(){return n.getPlatformNamesZipped(this.platforms)},t.prototype.getCenter=function(){return n.geo.getCenter(this.platforms.map(function(t){return t.location}))},t.prototype.passingLines=function(){for(var t=new Set,e=0,r=this.platforms;e<r.length;e++)for(var n=r[e],o=0,i=n.spans;o<i.length;o++)for(var a=i[o],s=0,u=a.routes;s<u.length;s++){var l=u[s];t.add(l.line)}return t},t}();e.default=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(2),i=r(12),a=function(t){function e(e,r){var n=t.call(this,e,r)||this;return e.transfers.push(n),r.transfers.push(n),n}return n(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){void 0!==this._source&&o.deleteFromArray(this._source.transfers,this),this._source=t,t.transfers.push(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){void 0!==this._target&&o.deleteFromArray(this._target.transfers,this),this._target=t,t.transfers.push(this)},enumerable:!0,configurable:!0}),e}(i.default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.eventListeners=new Map,this.publish=function(e){console.log("event as seen from the dispatcher",e);var r=e.type,n=t.eventListeners.get(r);if(void 0===n||0===n.length)return console.log("no event listeners registered for",r),!1;for(var o=0,i=n;o<i.length;o++){var a=i[o];a(e)}return!0}}return t.prototype.subscribe=function(t,e){var r=this.eventListeners.get(t);void 0===r?this.eventListeners.set(t,[e]):r.push(e)},t.prototype.unsubscribe=function(t,e){var r=this.eventListeners.get(t);if(void 0!==r){var n=r.indexOf(e);n<0||r.splice(n,1)}},t}();e.default=n},function(t,e,r){"use strict";function n(t,e){if(e.platforms.length<3)return[];var r=e.platforms;if(3===r.length){for(var n=function(e){if(2!==t.transfers.filter(function(t){return t.has(e)}).length)return{value:[]}},o=0,i=r;o<i.length;o++){var a=i[o],u=n(a);if("object"==typeof u)return u.value}return r}if(4===r.length){var l=t.transfers,c=r.map(function(t){return{platform:t,degree:l.filter(function(e){return e.has(t)}).length}}).sort(function(t,e){return t.degree-e.degree}),f=c.map(function(t){return t.degree}),p=c.map(function(t){return t.platform});if(s.isEqual(f,[2,2,3,3]))return p;if(s.isEqual(f,[1,2,2,3]))return p.slice(1)}return[]}function o(t,e,r){for(var n=new Map,o=new Map,a=0,b=t;a<b.length;a++){var w=b[a],_=w.spans.some(function(t){return t.routes[0].line.startsWith("E")}),x=f(e,w.location),k=x/p;n.set(w,k+(_?m:g)),x=f(w.location,r),k=x/p,o.set(w,k)}for(var M=l.findClosestObject(e,t),E=new Set(t),O=new Map,A=function(){var t=1/0;E.forEach(function(e){var r=c.tryGetFromMap(n,e);r<t&&(M=e,t=r)}),E.delete(M);for(var e=[],r=[],o=0,i=M.spans;o<i.length;o++){var a=i[o],s=a.other(M);if(E.has(s)){e.push(s);var l=f(M.location,s.location),b=0,w=a.routes[0].line.startsWith("E")?y:v,_=u.timeToTravel(l,d,h);r.push(_+w+b)}}for(var x=0,k=M.station.platforms;x<k.length;x++){var s=k[x];if(E.has(s)){e.push(s);var A=s.spans.some(function(t){return t.routes[0].line.startsWith("E")}),l=f(M.location,s.location)/2;r.push(l/p+(A?m:g))}}for(var j=0,P=e.length;j<P;++j){var s=e[j],S=c.tryGetFromMap(n,M)+r[j];S<c.tryGetFromMap(n,s)&&(n.set(s,S),O.set(s,M))}};E.size>0;)A();var j=1/0;n.forEach(function(t,e){var r=c.tryGetFromMap(n,e)+c.tryGetFromMap(o,e);r<j&&(j=r,M=e)});var P=f(e,r)/p;if(P<j)return{time:{walkTo:P}};for(var S=[],C=[M],T=O.get(M);void 0!==T&&void 0!==T;T=O.get(M)){for(var L=void 0,B=0,F=M.spans;B<F.length;B++){var G=F[B];if(G.has(T)){L=G;break}}if(void 0===L)for(var N=0,z=M.transfers;N<z.length;N++){var W=z[N];if(W.has(T)){L=W;break}}if(void 0===L){var I=i(T,M),R=I.transfers,D=I.midPlatforms;S.push.apply(S,R.reverse()),C.push.apply(C,D)}else S.push(L);C.push(T),M=T}C.reverse(),S.reverse();var q=c.tryGetFromMap(o,s.last(C)),V=c.tryGetFromMap(n,C[0]);return{platforms:C,edges:S,time:{walkTo:V,metro:j-q-V,walkFrom:q,total:j}}}function i(t,e){if(t.station!==e.station)throw new Error("platforms ("+t.name+" & "+e.name+" must be on the same station");for(var r=t.station,n=r.platforms,o=new Set(n),i=new Map,a=new Map,s=0,u=n;s<u.length;s++){var l=u[s];i.set(l,1/0)}i.set(t,0);for(var p=t,d=function(){var t=1/0;o.forEach(function(e){var r=c.tryGetFromMap(i,e);r<t&&(p=e,t=r)}),o.delete(p);for(var e=p.transfers.map(function(t){return t.other(p)}),r=0,n=e;r<n.length;r++){var s=n[r];if(s&&o.has(s)){var u=f(p.location,s.location),l=c.tryGetFromMap(i,p)+u;l<c.tryGetFromMap(i,s)&&(i.set(s,l),a.set(s,p))}}};o.size>0;)d();var h=[],v=[];p=e;for(var y=function(){var t=a.get(p);if(!t)return"break";var e=p.transfers.find(function(e){return e.has(t)});return e?(h.push(e),p=t,void v.push(p)):(console.error("cannot find transfer node"),"continue")};;){var g=y();if("break"===g)break}return v.pop(),{transfers:h.reverse(),midPlatforms:v.reverse()}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),s=r(3),u=r(13),l=r(15),c=r(2);e.findCycle=n;var f=function(t,e){return a.LatLng.prototype.distanceTo.call(t,e)},p=1,d=20,h=.7,v=25,y=40,g=240,m=360;e.shortestRoute=o},function(t,e,r){"use strict";function n(t){var e=t.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);if(e)return e.slice(1).map(Number);if(!t.startsWith("#"))throw new Error("invalid css color: "+t);if(7===t.length?e=t.match(/[0-9a-f]{2}/gi):4===t.length&&(e=t.split("")),!e)throw new Error("invalid css color: "+t);return e.map(function(t){return parseInt(t,16)})}function o(t){var e=i(t).map(n).unzipWith(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.mean(t)}).map(function(t){return i.round(t)}).map(function(t){return t.toString(16)}).map(function(t){return i.padStart(t,2,"0")}).join("");return"#"+e}Object.defineProperty(e,"__esModule",{value:!0});var i=r(3);e.mean=o},function(t,e,r){"use strict";(function(t){function n(){return null===w?t.resolve(!0):(b=!1,w)}function o(e,r,n){return void 0===n&&(n=1),s(this,void 0,void 0,function(){var o,i,s,l,y,g,w,_,x,k,M,E,O;return u(this,function(u){switch(u.label){case 0:o=r.length,i=0,u.label=1;case 1:return i<o?b?(s=h.tryGetFromMap(p.default.platformBindings,e[i]),s.style.opacity=null,m&&a(s,1.5,200),l=r[i],(y=p.default.outerEdgeBindings.get(r[i]))?(g=p.default.innerEdgeBindings.get(r[i]),w=y.cloneNode(!0),_=void 0===g?void 0:g.cloneNode(!0),x=v.byId("paths-outer"),x.appendChild(w),k=v.byId("paths-inner"),_&&k.appendChild(_),d.filters.applyDrop(w),M=l.source!==e[i],E=[c.default(w,n,M)],_&&E.push(c.default(_,n,M)),[4,t.all(E)]):[3,3]):[2,!1]:[3,4];case 2:u.sent(),y.style.opacity=null,"t"!==w.id.charAt(1)&&d.filters.applyDrop(y),x.removeChild(w),_&&(g.style.opacity=null,k.removeChild(_)),u.label=3;case 3:return++i,[3,1];case 4:return O=h.tryGetFromMap(p.default.platformBindings,f.last(e)),O.style.opacity=null,m&&a(O,3,200),[2,!0]}})})}function i(t,e,r){return void 0===r&&(r=1),w=o(t,e,r).then(function(t){return w=null,b=!0,t})}function a(t,e,r){return s(this,void 0,void 0,function(){var n;return u(this,function(o){switch(o.label){case 0:return t.getBoundingClientRect(),n=t.style,n.transition="transform "+r/2+"ms linear",g.scaleCircle(t,e),[4,y.transitionEnd(t)];case 1:return o.sent(),n.transform="scale(1)",[4,y.transitionEnd(t)];case 2:return o.sent(),n.transition=null,n.transform=null,[2]}})})}var s=this&&this.__awaiter||function(e,r,n,o){return new(n||(n=t))(function(t,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(a,s)}u((o=o.apply(e,r||[])).next())})},u=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}};Object.defineProperty(e,"__esModule",{value:!0});var l=r(1),c=r(43),f=r(3),p=r(9),d=r(6),h=r(2),v=r(7),y=r(14),g=r(16),m=l.Browser.webkit&&!l.Browser.mobile,b=!0,w=null;e.terminateAnimations=n,e.animateRoute=i,e.pulsateCircle=a}).call(e,r(0))},function(t,e,r){"use strict";(function(t){function n(t,e){return void 0===e&&(e=!0),a(this,void 0,void 0,function(){var r,n,a,l,c,p,h,y,g,m,b;return s(this,function(s){switch(s.label){case 0:return r=t.platforms,n=void 0===r?[]:r,a=t.edges,l=t.time,c=f.formatTime(l.walkTo),void 0===a?[2,u.success((m=[""," on foot!"],m.raw=[""," on foot!"],f.tr(m,c)))]:[4,d.terminateAnimations()];case 1:for(s.sent(),p=0,h=document.querySelectorAll(v);p<h.length;p++)y=h[p].style,y.filter=null,y.opacity="0.25";return e?[4,d.animateRoute(n,a,1)]:(o(a),i(n),[2]);case 2:return g=s.sent(),g&&u.message((b=["TIME:<br>"," on foot<br>"," by metro<br>"," on foot<br>TOTAL: ",""],b.raw=["TIME:<br>"," on foot<br>"," by metro<br>"," on foot<br>TOTAL: ",""],f.tr(b,c,f.formatTime(l.metro),f.formatTime(l.walkFrom),f.formatTime(l.total))),10),[2]}})})}function o(t){for(var e=0,r=t;e<r.length;e++){var n=r[e],o=l.default.outerEdgeBindings.get(n);if(void 0!==o){o.style.opacity=null;var i=l.default.innerEdgeBindings.get(n);void 0!==i&&(i.style.opacity=null),n instanceof p.Span&&c.filters.applyDrop(o)}}}function i(t){for(var e=0,r=t;e<r.length;e++){var n=r[e],o=l.default.platformBindings.get(n);o&&(o.style.opacity=null)}}var a=this&&this.__awaiter||function(e,r,n,o){return new(n||(n=t))(function(t,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(a,s)}u((o=o.apply(e,r||[])).next())})},s=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,
{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}};Object.defineProperty(e,"__esModule",{value:!0});var u=r(22),l=r(9),c=r(6),f=r(8),p=r(23),d=r(34);e.animation=d;var h=r(16);e.scale=h;var v=["paths-inner","paths-outer","transfers-inner","transfers-outer","station-circles"].map(function(t){return"#"+t+" *"}).join(", ");e.visualizeRoute=n,e.rehighlightEdges=o,e.rehighlightPlatforms=i}).call(e,r(0))},function(t,e,r){"use strict";function n(){var t=l.createSVGElement("filter");return t.id="shadow",t.setAttribute("width","200%"),t.setAttribute("height","200%"),t.innerHTML='\n        <feOffset result="offOut" in="SourceAlpha" dx="0" dy="4" />\n        <feColorMatrix result="matrixOut" in="offOut" type="matrix" values=\n            "0 0 0 0   0\n            0 0 0 0   0\n            0 0 0 0   0\n            0 0 0 0.5 0"/>\n        <feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="2" />\n\n        <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n    ',t}function o(){var t=l.createSVGElement("filter");return t.id=c,t.innerHTML='<feColorMatrix type="matrix" values=\n            "0 0 0 0   0\n            0 0 0 0   0\n            0 0 0 0   0\n            0 0 0 0.3 0"/>\n        <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>\n        <feMerge>\n            <feMergeNode in="coloredBlur"/>\n            <feMergeNode in="SourceGraphic"/>\n        </feMerge>',t}function i(){var t=l.createSVGElement("filter");return t.id="opacity",t.innerHTML='<feComponentTransfer>\n        <feFuncA type="table" tableValues="0 0.5">\n    </feComponentTransfer>',t}function a(){var t=l.createSVGElement("filter");return t.id="gray",t.innerHTML='<feColorMatrix type="matrix"\n            values="0.2126 0.7152 0.0722 0 0\n                    0.2126 0.7152 0.0722 0 0\n                    0.2126 0.7152 0.0722 0 0\n                    0 0 0 1 0"/>',t}function s(t){t.appendChild(n()),t.appendChild(o()),t.appendChild(i()),t.appendChild(a())}function u(t){var e=t.getBoundingClientRect(),r=getComputedStyle(t),n=2*parseFloat(r.strokeWidth||t.style.strokeWidth||"0");e.height>=n&&e.width>=n&&(t.style.filter="url(#"+c+")")}Object.defineProperty(e,"__esModule",{value:!0});var l=r(6),c="black-glow";e.makeDrop=n,e.makeGlow=o,e.makeOpacity=i,e.makeGray=a,e.appendAll=s,e.applyDrop=u},function(t,e,r){"use strict";function n(t){var e=s.createSVGElement("linearGradient");if("innerHTML"in e)return e.innerHTML='<stop style="stop-color:'+t[0]+'" /><stop style="stop-color:'+t[1]+'" />',e;var r=s.createSVGElement("stop");r.style.stopColor=t[0];var n=s.createSVGElement("stop");return n.style.stopColor=t[1],e.appendChild(r),e.appendChild(n),e}function o(t,e,r){void 0===r&&(r=0);var o=n(e);return a(o,r),i(o,t),o}function i(t,e){var r="rotate("+180*Math.atan2(e.y,e.x)/Math.PI+", 0.5, 0.5)";t.setAttribute("gradientTransform",r)}function a(t,e){t.firstChild.setAttribute("offset",e.toString()),t.lastChild.setAttribute("offset",(1-e).toString())}Object.defineProperty(e,"__esModule",{value:!0});var s=r(6);e.makeUndirectedLinear=n,e.makeLinear=o,e.setDirection=i,e.setOffset=a},,,,function(t,e,r){e=t.exports=r(4)(),e.push([t.i,"body,html{height:100%}body{margin:0;padding:0}a{color:#2196f3}a:hover{color:#e91e63}#map-container{height:100%;font-size:12px;cursor:default}.leaflet-dragging #map-container{cursor:-webkit-grab;cursor:grab}#map-container.dimmed{-webkit-filter:brightness(.75);filter:brightness(.75);-webkit-transition-property:-webkit-filter;transition-property:-webkit-filter;transition-property:filter;transition-property:filter,-webkit-filter;-webkit-transition-duration:.2s;transition-duration:.2s}.leaflet-control-scale-line{opacity:1}.ajs-message{bottom:20px;background-color:#ccc;font-family:Segoe,Tahoma,Ubuntu}@media only screen and (max-device-width:1000px) and (-webkit-min-device-pixel-ratio:2){.leaflet-control-attribution{display:none}}#wait{position:fixed;top:50%;left:50%;font-family:Arial,Helvetica,sans-serif;font-size:1.2em;z-index:1;color:#606060;opacity:0;-webkit-transition:opacity 2s linear;transition:opacity 2s linear}button{background-color:#fff;border:none;height:25px;border-radius:2px;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);cursor:pointer;-webkit-transition:box-shadow .1s;transition:box-shadow .1s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline-width:0}button:hover{background-color:#f0f0f0}button:active{box-shadow:none}button:disabled{background:#eaeaea;color:#a8a8a8;cursor:auto}",""])},function(t,e,r){e=t.exports=r(4)(),e.push([t.i,"path{fill-opacity:0}circle{-webkit-transform-origin:50% 50%;transform-origin:50% 50%}@-moz-document url-prefix(){circle{transform-origin:0 0}}#station-circles{fill:#fff;stroke:#000}#dummy-circles{opacity:0;stroke:blue;stroke-width:.5px}#paths-inner,#paths-outer,#transfers-inner,#transfers-outer{fill:none}#transfers-outer{stroke:#404040}#transfers-inner{stroke:#fff}",""])},,,,,,,,,function(t,e){},function(t,e,r){"use strict";(function(t){var n=this&&this.__awaiter||function(e,r,n,o){return new(n||(n=t))(function(t,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function s(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(a,s)}u((o=o.apply(e,r||[])).next())})},o=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}},i=this;Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),s=r(3),u=r(11),l=r(8);if(r(19),r(17),r(18),r(20),r(21),a.Icon.Default.imagePath="http://cdn.leafletjs.com/leaflet/v0.7.7/images",a.Browser.ie)throw alert("Does not work in your browser (yet)"),new Error("shitty browser");if(navigator.userAgent.includes("Firefox"))throw alert("There seems to be a problem with CORS in Firefox. Use Chrome"),new Error("shitty browser");var c=u.getJSON("res/mapconfig.json"),f=L.Browser.mobile?r.e(1).then(r.bind(null,24)):r.e(0).then(r.bind(null,26)),p=location.search.match(/city=(\w+)/),d=p?p[1]:"spb";!function(){return n(i,void 0,void 0,function(){var t,e,r,n,i,a;return o(this,function(o){switch(o.label){case 0:return[4,c];case 1:for(t=o.sent(),e=l.updateDictionary(t.url.dictionary),r=0,n=Object.keys(t.url);r<n.length;r++)i=n[r],t.url[i]=t.url[i].replace(/\{city\}/g,d);return document.title=l.translate((d&&"spb"!==d?s.capitalize(d):"St Petersburg")+" metro plan proposal"),[4,e];case 2:return o.sent(),document.title=l.translate(document.title),[4,f];case 3:return a=o.sent(),new a.default(t),[2]}})})}()}).call(e,r(0))}],[52]);
//# sourceMappingURL=app.c550124592f709a931e7.js.map