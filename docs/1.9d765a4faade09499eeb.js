webpackJsonp([1],Array(24).concat([function(t,e,n){"use strict";(function(t){var r=this&&this.__awaiter||function(e,n,r,i){return new(r||(r=t))(function(t,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(a,s)}u((i=i.apply(e,n||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(77),s=n(3),u=n(53),c=n(11),l=n(9),d=n(8),h=n(14),f=n(2),p=u.tileLayers,v=p.mapbox,m=p.mapnik,g=p.osmFrance,y=p.openMapSurfer,b=p.cartoDBNoLabels,w=p.wikimapia,_=f.sfx.scale,E=f.math.mean,x=f.algorithm.findCycle,k=[{event:"routefrom",text:"Route from here"},{event:"routeto",text:"Route to here"},{event:"clearroute",text:"Clear route"},{event:"showheatmap",text:"Show heatmap",extra:{disabled:!0}}],S=function(){function e(t){this.mediator=new f.Mediator,this.moving=!1,this.contextMenu=new u.ContextMenu(k),this.whiskers=new WeakMap,this.platformsOnSVG=new WeakMap,this.plate=new u.TextPlate,this.config=t,this.makeMap()}return e.prototype.getMap=function(){return this.map},e.prototype.getNetwork=function(){return this.network},e.prototype.makeMap=function(){return r(this,void 0,void 0,function(){var e,n,r,a,s,l,p,_,E,x,k,S,M,T,L,C=this;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=this.config,n=f.dom.tryGetElement("#scheme").then(function(t){return t.href=e.url.scheme,c.getLineRules()}),r=this.getGraph(),a=new t(function(t){return v.once("load",t)}),s=c.getJSON(e.url.data),e.center=[0,0],l=Object.assign({},e),"1"===o.version[0]&&(l.wheelPxPerZoomLevel=75,l.inertiaMaxSpeed=1500,l.fadeAnimation=!1),this.map=o.map(e.containerId,l).addControl(o.control.scale({imperial:!1})),p=this.map.getPanes().mapPane.style,p.visibility="hidden",u.addLayerSwitcher(this.map,[v,m,g,y,b,w]),addEventListener("keydown",function(t){t.shiftKey&&t.ctrlKey&&82===t.keyCode&&C.getGraph().then(function(t){return C.resetNetwork(t)})}),this.addContextMenu(),[4,r];case 1:return _=i.sent(),this.network=new h.default(_),E=f.geo.getCenter(this.network.platforms.map(function(t){return t.location})),e.center=[E.lat,E.lng],x=o.latLngBounds(this.network.platforms.map(function(t){return t.location})),this.overlay=new u.SvgOverlay(x,o.point(200,200)).addTo(this.map),k=this.overlay.defs,f.svg.filters.appendAll(k),S=k.textContent,0===(S||"").length&&alert((L=["Your browser doesn't seem to have capabilities to display some features of the map. Consider using Chrome or Firefox for the best experience."],L.raw=["Your browser doesn't seem to have capabilities to display some features of the map. Consider using Chrome or Firefox for the best experience."],d.tr(L))),M=this,[4,n];case 2:return M.lineRules=i.sent(),this.resetMapView(),this.map.addLayer(v),this.map.on("overlayupdate",function(t){C.moving=!0,C.redrawNetwork(),C.moving=!1}),this.initNetwork(),this.map.invalidateSize(!1),this.addMapListeners(),(new u.RoutePlanner).addTo(this),(new u.DistanceMeasure).addTo(this.map),s.then(function(t){return new u.FAQ(t.faq).addTo(C)}),[4,a];case 3:return i.sent(),p.visibility="",this.runUnblur(),[3,5];case 4:return T=i.sent(),console.error(T),[3,5];case 5:return[2]}})})},e.prototype.runUnblur=function(){var t=this;this.map.on("movestart",function(e){return t.moving=!0}).on("moveend",function(e){return t.moving=!1}),a.default({skipIf:function(){return t.moving},interval:250})},e.prototype.subscribe=function(t,e){this.mediator.subscribe(t,e),this.map.on(t,this.mediator.publish)},e.prototype.addContextMenu=function(){for(var t=0,e=k;t<e.length;t++){var n=e[t];this.map.on(n.event,this.mediator.publish)}this.contextMenu.addTo(this.map)},e.prototype.addMapListeners=function(){var t=this,e=this,n=e.map,r=e.contextMenu;n.on("distancemeasureinit",function(t){r.insertItem("measuredistance","Measure distance")}),n.on("clearmeasurements",function(t){r.removeItem("clearmeasurements"),r.insertItem("measuredistance","Measure distance")}),n.on("zoomstart",function(e){t.plate.hide()}),this.subscribe("measuredistance",function(t){r.removeItem("measuredistance"),r.insertItem("clearmeasurements","Clear measurements")})},e.prototype.initNetwork=function(){for(var t=this.overlay.origin,e=["paths-outer","paths-inner","transfers-outer","station-circles","transfers-inner","dummy-circles"],n=0,r=e;n<r.length;n++){var i=r[n],o=f.svg.createSVGElement("g");o.id=i,t.appendChild(o)}t.insertBefore(this.plate.element,document.getElementById("dummy-circles")),this.redrawNetwork(),this.addStationListeners()},e.prototype.resetMapView=function(){var t=this.config,e=t.center,n=t.zoom,r={pan:{animate:!1},zoom:{animate:!1}};return e?(this.map.setView(e,n+1,r),void this.map.setView(e,n,r)):void console.error("cannot set map to center")},e.prototype.getGraph=function(){return c.getJSON(this.config.url.graph)},e.prototype.resetNetwork=function(t){this.network=new h.default(t),this.redrawNetwork()},e.prototype.cleanElements=function(){for(var t=this,e=t.overlay,n=t.plate,r=n.element,i=0,o=e.origin.childNodes;i<o.length;i++){var a=o[i];a!==r&&f.dom.removeAllChildren(a)}},e.prototype.redrawNetwork=function(){console.time("pre"),this.cleanElements(),this.updatePlatformsPositionOnOverlay(),console.timeEnd("pre"),console.time("preparation");for(var t=this.config.detailedZoom,e=this.map.getZoom(),n=e>9?e:e>8?9.5:9,r=.5*(n-7),i=.75*r,o=n<t?1.25*r:r,a=n<t?.4*o:.6*o,u=2*o,c=.9*r,d=1.25*a,h={"station-circles":a,"dummy-circles":0,"transfers-outer":c+d/2,"transfers-inner":c-d/2,"paths-outer":r,"paths-inner":r/2},p=o+a/2,v=new Map,m=0,g=Object.keys(h);m<g.length;m++){var y=g[m];v.set(y,document.createDocumentFragment()),f.dom.byId(y).style.strokeWidth=h[y]+"px"}var b=f.tryGetFromMap(this.lineRules,"L");b.strokeWidth=i+"px";var w=Math.max(.5*(e+10),11),_=s.get(this.plate,"element.firstChild.firstChild.style");_&&(_.fontSize=w+"px");var E=new Map;console.timeEnd("preparation"),console.time("circle preparation");for(var k=f.tryGetFromMap(v,"station-circles"),S=f.tryGetFromMap(v,"dummy-circles"),M=0,T=this.network.stations;M<T.length;M++){for(var L=T[M],C=[],A=0,I=L.platforms;A<I.length;A++){var O=I[A],P=f.tryGetFromMap(this.platformsOnSVG,O);if(e>9){var D=f.svg.makeCircle(P,o);e>=t&&this.colorizePlatformCircle(D,O.passingLines());var R=f.svg.makeCircle(P,u);k.appendChild(D),l.default.platformBindings.set(O,D),S.appendChild(R),l.default.dummyBindings.set(O,R)}this.whiskers.set(O,this.makeWhiskers(O))}var N=x(this.network,L);if(N.length>0){for(var F=0,B=L.platforms;F<B.length;F++){var O=B[F];if(N.includes(O)){var j=f.tryGetFromMap(this.platformsOnSVG,O);C.push(j)}}E.set(L,N)}}console.timeEnd("circle preparation"),console.time("transfer preparation");for(var z=f.tryGetFromMap(v,"transfers-outer"),G=f.tryGetFromMap(v,"transfers-inner"),q=0,U=this.network.transfers;q<U.length;q++){var W=U[q],V=W.source,X=W.target,Y=e>=t;if(Y||V.name!==X.name){var Q=E.get(V.station),H=void 0!==Q&&Q.includes(V)&&Q.includes(X)?this.makeTransferArc(W,Q):f.svg.makeTransferLine(f.tryGetFromMap(this.platformsOnSVG,V),f.tryGetFromMap(this.platformsOnSVG,X));l.default.outerEdgeBindings.set(W,H[0]),l.default.innerEdgeBindings.set(W,H[1]),H[0].style.stroke=Y?this.makeGradient(W,p):"#000",z.appendChild(H[0]),G.appendChild(H[1])}}console.timeEnd("transfer preparation"),console.time("span preparation");for(var Z=f.tryGetFromMap(v,"paths-outer"),K=f.tryGetFromMap(v,"paths-inner"),J=0,$=this.network.spans;J<$.length;J++){var tt=$[J],et=this.makePath(tt),nt=et[0],rt=et[1];Z.appendChild(nt),rt&&K.appendChild(rt)}console.timeEnd("span preparation"),console.time("appending"),v.forEach(function(t,e){return f.dom.byId(e).appendChild(t)}),console.timeEnd("appending")},e.prototype.makeGradient=function(t,e){var n=t.source,r=t.target,i=f.tryGetFromMap(this.platformsOnSVG,n),o=f.tryGetFromMap(this.platformsOnSVG,r),a=[this.getPlatformColor(n),this.getPlatformColor(r)],u=e/i.distanceTo(o),c=o.subtract(i),d=l.default.gradientBindings.get(t);return void 0===d?(d=f.svg.gradients.makeLinear(c,a,u),d.id=s.uniqueId("gradient-"),l.default.gradientBindings.set(t,d),this.overlay.defs.appendChild(d)):(f.svg.gradients.setDirection(d,c),f.svg.gradients.setOffset(d,u)),"url(#"+d.id+")"},e.prototype.updatePlatformsPositionOnOverlay=function(t){void 0===t&&(t=this.map.getZoom());var e=this,n=e.config,r=e.network,i=e.overlay,o=e.platformsOnSVG;if(t>=n.detailedZoom)for(var a=0,s=r.stations;a<s.length;a++)for(var u=s[a],c=0,l=u.platforms;c<l.length;c++){var d=l[c],h=i.latLngToOverlayPoint(d.location);o.set(d,h)}else for(var p=function(t){for(var e=new Set,n=i.latLngToOverlayPoint(t.getCenter()),r=t.platforms,a=0,s=r;a<s.length;a++){var u=s[a];e.add(u.name),o.set(u,n)}if(1===e.size)return"continue";if(e.size<1)throw console.error(t),new Error("station has no names");var c=new Map;e.forEach(function(t){var e=r.filter(function(e){return e.name===t}).map(function(t){return t.location}),n=f.geo.getCenter(e);c.set(t,i.latLngToOverlayPoint(n))});for(var l=0,d=r;l<d.length;l++){var u=d[l],h=f.tryGetFromMap(c,u.name);o.set(u,h)}},v=0,m=r.stations;v<m.length;v++){var u=m[v];p(u)}},e.prototype.getPlatformColor=function(t){return f.color.mean(this.linesToColors(t.passingLines()))},e.prototype.linesToColors=function(t){var e=this,n=[];return t.forEach(function(t){var r=f.tryGetFromMap(e.lineRules,"M"===t[0]?t:t[0]).stroke;r&&n.push(r)}),n},e.prototype.colorizePlatformCircle=function(t,e){if(0!==e.size){if(1===e.size){var n=e.values().next().value;return void t.classList.add("M"===n[0]?n:n[0])}t.style.stroke=f.color.mean(this.linesToColors(e))}},e.prototype.makeWhiskers=function(t){var e=this,n=.5,r=f.tryGetFromMap(this.platformsOnSVG,t),i=new Map,o=t.spans;if(0===o.length)return i;if(1===o.length)return i.set(o[0],r);if(2===o.length){if(2===t.passingLines().size)return i.set(o[0],r).set(o[1],r);for(var a=o.map(function(n){return f.tryGetFromMap(e.platformsOnSVG,n.other(t))}),s=a[0],u=a[1],c=f.math.wings(s,r,u,1),l=Math.min(r.distanceTo(s),r.distanceTo(u))*n,d=0;d<2;++d){var h=c[d].multiplyBy(l).add(r);i.set(o[d],h)}return i}for(var p=[[],[]],v=[[],[]],m=new WeakMap,g=0,y=o;g<y.length;g++){var b=y[g],w=b.other(t),_=f.tryGetFromMap(this.platformsOnSVG,w),x=b.source===t?0:1;p[x].push(f.math.normalize(_.subtract(r))),v[x].push(b),m.set(b,r.distanceTo(_))}for(var k=p.map(function(t){return E(t).add(r)}),S=k[0],M=k[1],T=f.math.wings(S,r,M,1),d=0;d<2;++d)for(var L=T[d],C=0,A=v[d];C<A.length;C++){var b=A[C],l=f.tryGetFromMap(m,b)*n,h=L.multiplyBy(l).add(r);i.set(b,h)}return i},e.prototype.makeTransferArc=function(t,e){var n=this.platformsOnSVG,r=t.source,i=t.target,o=f.tryGetFromMap(n,r),a=f.tryGetFromMap(n,i),u=function(t){return f.svg.makeTransferArc(o,a,f.tryGetFromMap(n,t))};if(3===e.length){var c=s.difference(e,[r,i])[0];return u(c)}if(r===e[2]&&i===e[3]||r===e[3]&&i===e[2])return f.svg.makeTransferLine(o,a);for(var l=[],d=0,h=this.network.transfers;d<h.length;d++){var p=h[d];p!==t&&(t.has(p.source)?l.push(p.target):t.has(p.target)&&l.push(p.source))}var v;if(2===l.length){if(l[0]!==l[1])throw Error("FFFFUC");v=l[0]}else{if(3!==l.length)throw new Error("111FUUFF");v=l[0]===l[1]?l[2]:l[0]===l[2]?l[1]:l[0]}return u(v)},e.prototype.makePath=function(t){var e=t.routes,n=t.source,r=t.target,i="",o="",a="";if(e.length>0){var s=e[0].line.match(/([MEL])(\d{0,2})/);if(!s)throw new Error("match failed for "+n.name+"-"+r.name);i=s[0],o=s[1],a=s[2]}else console.error(t,"span has no routes!");var u=[f.tryGetFromMap(this.platformsOnSVG,n),f.tryGetFromMap(f.tryGetFromMap(this.whiskers,n),t),f.tryGetFromMap(f.tryGetFromMap(this.whiskers,r),t),f.tryGetFromMap(this.platformsOnSVG,r)],c=f.svg.makeCubicBezier(u);if("E"===o){c.classList.add("E");var d=c.cloneNode(!0);return l.default.outerEdgeBindings.set(t,c),l.default.innerEdgeBindings.set(t,d),[c,d]}return void 0!==i&&c.classList.add(i),void 0!==o?c.classList.add(o):c.style.stroke="black",l.default.outerEdgeBindings.set(t,c),[c]},e.prototype.addStationListeners=function(){var t=this,e=function(e){t.plate.hide(),_.unscaleAll()},n=f.dom.byId("dummy-circles");n.addEventListener("mouseover",function(e){var n=e.target,r=l.default.dummyBindings.getKey(n),i=r.station;t.highlightStation(i,f.getPlatformNames(r),[r.name])}),n.addEventListener("mouseout",e);var r=function(e){var n=e.target,r=l.default.outerEdgeBindings.getKey(n)||l.default.innerEdgeBindings.getKey(n),i=f.getPlatformNamesZipped([r.source,r.target]);t.highlightStation(r.source.station,i,[r.source.name,r.target.name])},i=f.dom.byId("transfers-outer"),o=f.dom.byId("transfers-inner");i.addEventListener("mouseover",r),o.addEventListener("mouseover",r),i.addEventListener("mouseout",e),o.addEventListener("mouseout",e)},e.prototype.highlightStation=function(t,e,n){for(var r=1.25,i=t.platforms.filter(function(t){return n.includes(t.name)}),o=0,a=i;o<a.length;o++){var u=a[o],c=f.tryGetFromMap(l.default.platformBindings,u);_.scaleCircle(c,r,!0)}if(this.map.getZoom()>=this.config.detailedZoom)for(var d=function(t){var e=i.some(function(e){return t.has(e)})&&n.includes(t.source.name)&&n.includes(t.target.name);e&&_.scaleTransfer(t,r)},h=0,p=this.network.transfers;h<p.length;h++){var v=p[h];d(v)}var m=s.maxBy(i,function(t){return t.location.lat}),g=f.tryGetFromMap(l.default.platformBindings,m);this.plate.show(f.svg.circleOffset(g),e)},e}();e.default=S}).call(e,n(0))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t,e){var n=d.getSecondLanguage(),r=t.altNames;n?(t.name=e[0],r[n]=e[1],r.en=e[2]):(t.name=e[0],r.en=e[1])}function i(t){var e=t.name,n=t.altNames,i=n.fi,o=n.en,a=o?[e,i,o]:i?[e,i]:[e],s=a.join("|");l.prompt((u=["New name"],u.raw=["New name"],f.tr(u)),s,function(n,i){var o=i.split("|");if(r(t,o),i===s)return l.warning((h=["Name was not changed"],h.raw=["Name was not changed"],f.tr(h)));var u=a.slice(1).join(", "),c=o.slice(1).join(", ");l.success((p=[""," (",") renamed to "," (",")"],p.raw=[""," (",") renamed to "," (",")"],f.tr(p,e,u,o[0],c)));var d=t.station;if(!(d.platforms.length<2)){l.confirm((v=["Rename the entire station?"],v.raw=["Rename the entire station?"],f.tr(v)),function(){for(var t=0,e=d.platforms;t<e.length;t++){var n=e[t];r(n,o)}l.success((a=["The entire station was renamed to ",""],a.raw=["The entire station was renamed to ",""],f.tr(a,i)));var a});var h,p,v}},function(){return l.warning((t=["Name change cancelled"],t.raw=["Name change cancelled"],f.tr(t)));var t});var u}function o(t,e){for(var n=void 0===e?void 0:Array.from(e).map(function(t){return t.line+t.branch}).join("|"),r=new Set,i=prompt("routes",n)||"",o=function(e){var n="M"===e[0]?e.match(/(M\d{0,2})(\w?)/):e.match(/([EL])(.{0,2})/);if(!n)return console.error("incorrect route",e),"continue";var i=n[1],o=n[2],a=t.routes.find(function(t){return t.line===i&&t.branch===o});void 0===a&&(console.log("creating new route"),a={line:i,branch:o},t.routes.push(a)),r.add(a)},a=0,s=i.split("|");a<s.length;a++){var u=s[a];o(u)}return r}function a(t,e){var n=0;addEventListener("keydown",function(r){r.shiftKey&&r.ctrlKey&&76===r.keyCode&&(r.preventDefault(),t.removeLayer(e[n]),++n===e.length&&(n=0),t.addLayer(e[n]),t.invalidateSize(!1))})}function s(t,e){var n=e.filter(function(t){return t.spans[0].routes[0].line.startsWith("M")}).map(function(t){return t.location}),r=function(t){return n.reduce(function(e,n){return e+t.distanceTo(n)},0)},i=c.polyline([],{color:"red"}),o=h.calculateGeoMean(n,r,1,function(t){return i.addLatLng(t)});t.addLayer(i);for(var a=5e3;a<2e4;a+=5e3)c.circle(o,a-250,{weight:1}).addTo(t),c.circle(o,a+250,{weight:1}).addTo(t);var s=(e.filter(function(t){return t.spans[0].routes[0].line.startsWith("E")}).map(function(t){return t.location}),"Glavnyj voxal"),u=e.find(function(t){return t.name===s&&t.spans[0].routes[0].line.startsWith("E")});if(u){var l=u.location;c.circle(l,3e4).addTo(t),c.circle(l,45e3).addTo(t)}}function u(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];t.addLayer(i).removeLayer(i)}}Object.defineProperty(e,"__esModule",{value:!0});var c=n(1),l=n(23),d=n(2),h=n(16),f=n(8),p=n(59);e.MapEditor=p.default;var v=n(57);e.FAQ=v.default;var m=n(62);e.TextPlate=m.default;var g=n(60);e.RoutePlanner=g.default;var y=n(55);e.ContextMenu=y.default;var b=n(56);e.DistanceMeasure=b.default;var w=n(61);e.SvgOverlay=w.default;var _=n(54);e.Icons=_;var E=n(64);e.tileLayers=E,e.platformRenameDialog=i,e.askRoutes=o,e.addLayerSwitcher=a,e.drawZones=s,e.cacheIcons=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(58);e.RedCircle=i.default,e.start=r.icon({iconUrl:"https://proxy-antonv.rhcloud.com/?url=http://map.project-osrm.org/images/marker-start-icon-2x.png",iconSize:[20,56],iconAnchor:[10,28]}),e.end=r.icon({iconUrl:"https://proxy-antonv.rhcloud.com/?url=http://map.project-osrm.org/images/marker-end-icon-2x.png",iconSize:[20,56],iconAnchor:[10,28]}),e.red=r.icon({iconUrl:"https://proxy-antonv.rhcloud.com/?url=http://harrywood.co.uk/maps/examples/leaflet/marker-icon-red.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://proxy-antonv.rhcloud.com/?url=http://cdn.leafletjs.com/leaflet/v0.7.7/images/marker-shadow.png",shadowRetinaUrl:"marker-shadow-@2x.png",shadowSize:[41,41],shadowAnchor:[12,41]})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(3),o=n(2),a=n(8),s=n(79),u=function(){function t(t){this.items=t,this.container=document.createElement("div"),this.container.classList.add(s.contextmenu),this.container.addEventListener("contextmenu",function(t){t.preventDefault(),t.target.click()})}return t.prototype.addTo=function(t){return this.onAdd(t),this},t.prototype.onAdd=function(t){var e=this;if(this.map=t,void 0===t)throw new Error("cannot add map editor to metro map: leaflet map is missing");var n=t.getPanes().mapPane,i=t.getContainer(),o=function(t){return e.handler(t)},a=function(t){return e.hide()};n.addEventListener("contextmenu",o,!1),i.addEventListener("mousedown",a),i.addEventListener("touchstart",a),r.Browser.mobile||t.on("movestart",a),document.body.appendChild(this.container)},t.prototype.onRemove=function(t){},t.prototype.handler=function(t){var e=this;t.preventDefault();var n=t.target;console.log("target",n,n.parentNode),o.dom.removeAllChildren(this.container);for(var r=0,i=this.items;r<i.length;r++){var s=i[r];if(!s.trigger||s.trigger(n)){var u=document.createElement("div");s.extra&&s.extra.disabled?u.setAttribute("disabled",""):u.setAttribute("data-event",s.event),u.textContent=a.translate(s.text),this.container.appendChild(u)}else console.log(s.trigger(n))}this.container.onclick=function(n){var r=n.target,i=r.getAttribute("data-event");i&&(e.hide(),e.map.fireEvent(i,{clientX:v,clientY:m,relatedTarget:t.target}))};var c=this.container.getBoundingClientRect(),l=c.width,d=c.height,h=document.documentElement,f=h.clientWidth,p=h.clientHeight,v=t.clientX,m=t.clientY,g=v+l>f?f-l:v,y=m+d>p?m-d:m;this.container.style.transform="translate("+g+"px, "+y+"px)",this.show()},t.prototype.insertItem=function(t,e,n,r,i){var o={event:t,text:e,trigger:n,extra:r};void 0===i||i<0?this.items.push(o):this.items.splice(i,0,o)},t.prototype.removeItem=function(t,e){if(void 0===e&&(e=!1),e)return void i.remove(this.items,function(e){return e.event===t});var n=this.items.findIndex(function(e){return e.event===t});n<0||this.items.splice(n,1)},t.prototype.show=function(){this.container.style.visibility=null,r.Browser.mobile&&this.map.dragging.disable()},t.prototype.hide=function(){this.container.style.visibility="hidden",r.Browser.mobile&&this.map.dragging.enable()},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(3),o=n(2),a=n(54),s=function(){function t(){var t=this;this.polyline=r.polyline([],{color:"red"}),this.markers=r.featureGroup(),this.dashedLine=r.polyline([],{color:"red",opacity:.5,dashArray:"0,9"}),this.makeMarker=function(e){if(0===e.originalEvent.button){var n=function(e){t.dashedLine.setStyle({opacity:0}),t.updateDistances()},i=r.marker(e.latlng,{draggable:!0}).setIcon(a.RedCircle).bindPopup("").on("mouseover",function(e){return t.hideDashedLine()}).on("mouseout",function(e){return t.showDashedLine()}).on("drag",n).on("click",t.onCircleClick.bind(t));t.markers.addLayer(i),t.updateDistances()}},this.resetDashedLine=function(e){t.dashedLine.getLatLngs()[1]=e.latlng,t.dashedLine.redraw()}}return t.prototype.onAdd=function(t){var e=this;return this.map=t,t.fireEvent("distancemeasureinit"),t.on("measuredistance",function(n){return e.measureDistance(o.mouseToLatLng(t,n))}),t.on("clearmeasurements",function(t){return e.clearMeasurements()}),this},t.prototype.onRemove=function(t){},t.prototype.addTo=function(t){return this.onAdd(t),this},t.prototype.updateDistances=function(){var t=this.polyline.getLatLngs(),e=this.markers.getLayers(),n=e.length;t[0]=e[0].setPopupContent("0").getLatLng();for(var r=1,o=0;r<n;++r){var a=e[r].getLatLng();t[r]=a,o+=e[r-1].getLatLng().distanceTo(a);var s=Math.round(o),u=s<1e3?s+" m":(s<1e4?s/1e3:Math.round(s/10)/100)+" km";e[r].setPopupContent(u)}t.length>n&&(t.length=n),this.dashedLine.getLatLngs()[0]=i.last(t),this.polyline.redraw(),n>1&&i.last(e).openPopup()},t.prototype.showDashedLine=function(){this.dashedLine.setStyle({opacity:.5})},t.prototype.hideDashedLine=function(){this.dashedLine.setStyle({opacity:0})},t.prototype.onCircleClick=function(t){if(0===t.originalEvent.button){if(this.markers.removeLayer(t.target),0===this.markers.getLayers().length)return void this.map.fire("clearmeasurements");this.updateDistances(),this.map.hasLayer(this.dashedLine)||this.showDashedLine()}},t.prototype.measureDistance=function(t){var e=this;this.dashedLine.addLatLng(t).addLatLng(t),this.map.addLayer(this.polyline.setLatLngs([])).addLayer(this.markers).addLayer(this.dashedLine.setLatLngs([])).on("click",this.makeMarker).on("mousemove",this.resetDashedLine).fire("click",{latlng:t,originalEvent:{button:0}}),o.events.onceEscapePress(function(t){return e.map.fire("clearmeasurements")})},t.prototype.clearMeasurements=function(){this.map.removeLayer(this.polyline).removeLayer(this.markers.clearLayers()).removeLayer(this.dashedLine).off("mousemove",this.resetDashedLine).off("click",this.makeMarker)},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(71),o=n(15),a=n(80),s=function(){function t(t){var e=this,n=document.createElement("button");n.textContent="FAQ",n.classList.add("leaflet-control"),n.classList.add(a["faq-button"]),n.addEventListener("click",function(t){return e.showFAQ()}),this.button=n,this.card=document.createElement("div"),this.card.classList.add(a["faq-card"]),r.Browser.mobile&&new i(this.card).on("swipeleft swiperight",function(t){return e.hideFAQ()});var o=/\[\[(.+?)\|(.*?)\]\]/g,s='<a href="$1" target="_blank">$2</a>',u=a.question,c=a.answer,l=function(t){return'\n            <div>\n                <span class="'+u+'">'+t.q+'</span>\n                <span class="'+c+'">'+t.a+"</span>\n            </div>\n        "};this.card.innerHTML+=t.map(l).join("").replace(o,s)}return t.prototype.addTo=function(t){this.map=t.getMap();var e=document.querySelector(".leaflet-right.leaflet-top");if(document.body.appendChild(this.card),!e)throw new Error("cannot append to .leaflet-right.leaflet-top");return e.appendChild(this.button),this},t.prototype.showFAQ=function(){var t=this,e=this,n=e.card,i=e.map,a=e.button,s=n.style;s.display="inline",s.transform="scale(0.1)",s.opacity="0",n.getBoundingClientRect(),s.transform=null,s.opacity=null,a.disabled=!0,r.Browser.mobile||(i.getContainer().classList.add("dimmed"),i.once("mousedown",function(e){return t.hideFAQ()}),o.once(window,"keydown").then(function(t){27===t.keyCode&&i.fireEvent("mousedown")}))},t.prototype.hideFAQ=function(){var t=this,e=t.card,n=t.map,i=t.button,a=e.style;e.getBoundingClientRect(),a.transform="scale(0.1)",a.opacity="0",r.Browser.mobile||n.getContainer().classList.remove("dimmed"),o.transitionEnd(e).then(function(t){return a.display=null}),i.disabled=!1},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74),i=n(6),o=i.createSVGElement("svg");o.setAttribute("width","100"),o.setAttribute("height","100");var a=i.makeCircle(L.point(50,50),40);a.style.stroke="red",a.style.strokeWidth="20px",a.style.fill="white",o.appendChild(a);var s=5;e.default=L.icon({iconUrl:r.svgToDataUrl(o),iconSize:[2*s,2*s],iconAnchor:[s,s],popupAnchor:[0,-s]})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(73),i=n(3),o=n(8),a=n(7),s=n(81),u=function(){function t(t){var e=this;this.mapEditorStore=r.createInstance({name:"mapEditor"}),this.backupData=i.throttle(this.mapEditorStore.setItem,1e3);var n=document.createElement("button");n.textContent="Edit Map",n.classList.add("leaflet-control"),n.classList.add(s["edit-map-button"]),n.onclick=function(t){return e.editMapClick()},this.button=n}return Object.defineProperty(t.prototype,"editMode",{get:function(){return this._editMode},set:function(t){var e=this,n=this,r=n.button,i=n.metroMap.mediator;if(t){var s=a.byId("dummy-circles");r.textContent=(u=["Save map"],u.raw=["Save map"],o.tr(u)),r.onclick=function(t){return e.saveMapClick()},s.onmousedown=s.onclick=function(){return!1},i.publish(new Event("editmapstart"))}else r.textContent=(c=["Edit map"],c.raw=["Edit map"],o.tr(c)),r.onclick=function(t){return e.editMapClick()},i.publish(new Event("editmapend"));this._editMode=t;var u,c},enumerable:!0,configurable:!0}),t.prototype.addTo=function(t){var e=t.getMap();if(void 0===e)throw new Error("cannot add map editor to metro map: map is missing");this.metroMap=t;var n=document.querySelector(".leaflet-right.leaflet-top");return n?(n.appendChild(this.button),this.editMode=!1):console.error("cannot append to .leaflet-right.leaflet-top"),this},t.prototype.sendEvent=function(t){this.backupData("map",this.metroMap.getNetwork().toJSON()),this.metroMap.mediator.publish(t)},t.prototype.editMapClick=function(){this.editMode=!0,this.addMapListeners()},t.prototype.saveMapClick=function(){this.sendEvent(new Event("mapsave")),this.editMode=!1},t.prototype.addMapListeners=function(){var t,e,n,r=this,i=this.metroMap.getMap(),o=a.byId("dummy-circles");a.byId("paths-outer"),a.byId("paths-inner");o.addEventListener("mousedown",function(o){if(2!==o.button&&n){var a={source:n,target:o.target};r.sendEvent(new CustomEvent("span"===e?"spanend":"transferend",{detail:a})),n=null,e=void 0}else 0===o.button?(i.dragging.disable(),t=o.target,r.sendEvent(new MouseEvent("platformmovestart",{relatedTarget:o.target}))):1===o.button&&r.sendEvent(new MouseEvent("spanstart",{relatedTarget:o.target}))}),i.on("mousemove",function(e){if(t){var n=e.originalEvent,i=n.clientX,o=n.clientY;r.sendEvent(new MouseEvent("platformmove",{relatedTarget:t,clientX:i,clientY:o}))}}).on("mouseup",function(e){t&&(i.dragging.enable(),r.sendEvent(new MouseEvent("platformmoveend",{relatedTarget:t})),t=null)}),this.metroMap.subscribe("spanstart",function(t){e="span",n=t.relatedTarget}),this.metroMap.subscribe("transferstart",function(t){e="transfer",n=t.relatedTarget}),this.metroMap.subscribe("platformaddclick",function(t){var e=t.clientX,n=t.clientY;r.sendEvent(new CustomEvent("platformadd",{detail:{clientX:e,clientY:n}}))}),this.metroMap.subscribe("platformaddtolineclick",function(t){r.sendEvent(new CustomEvent("platformadd",{detail:t}))})},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(23),o=n(2),a=n(53),s=o.sfx,u=s.animation,c=s.visualizeRoute,l=o.algorithm.shortestRoute,d=function(){function t(){var t=this;this.onFromTo=function(e){var n=t.metroMap.getMap(),r=o.mouseToLatLng(n,e),i="routefrom"===e.type?t.fromMarker:t.toMarker;i.setLatLng(r),n.hasLayer(i)||n.addLayer(i);var a=i===t.fromMarker?t.toMarker:t.fromMarker;n.hasLayer(a)&&t.visualizeShortestRoute(!0)},this.clearRoute=function(){var e=t.metroMap.getMap(),n=u.terminateAnimations();e.removeLayer(t.fromMarker).removeLayer(t.toMarker),i.dismissAll(),n.then(o.resetStyle)},this.fromMarker=r.marker([0,0],{draggable:!0,icon:a.Icons.start}),this.toMarker=r.marker([0,0],{draggable:!0,icon:a.Icons.end}),this.addMarkerListeners()}return t.prototype.addMarkerListeners=function(){for(var t=this,e=0,n=[this.fromMarker,this.toMarker];e<n.length;e++){var r=n[e];r.on("drag",function(e){return t.visualizeShortestRoute(!1)}).on("dragend",function(e){return t.visualizeShortestRoute(!0)})}},t.prototype.addTo=function(t){this.metroMap=t;var e=t.mediator,n=t.getMap(),r=n.getCenter();return this.fromMarker.setLatLng(r),this.toMarker.setLatLng(r),a.cacheIcons(n,[this.fromMarker,this.toMarker]),e.subscribe("routefrom",this.onFromTo),e.subscribe("routeto",this.onFromTo),e.subscribe("clearroute",this.clearRoute),n.on("zoomstart",u.terminateAnimations),addEventListener("keydown",function(t){27===t.keyCode&&e.publish(new Event("clearroute"))}),this},t.prototype.visualizeShortestRoute=function(t){var e=this.metroMap.getMap();e.hasLayer(this.fromMarker)&&e.hasLayer(this.toMarker)&&this.visualizeRouteBetween(this.fromMarker.getLatLng(),this.toMarker.getLatLng(),t)},t.prototype.visualizeRouteBetween=function(t,e,n){o.resetStyle(),i.dismissAll();var r=l(this.metroMap.getNetwork().platforms,t,e);c(r,n)},t}();e.default=d},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(63),a=n(6),s=n(82),u=function(t){function e(e,n){void 0===n&&(n=i.point(100,100));var r=t.call(this,"svg",e,n)||this;r.defs=a.createSVGElement("defs");var o=a.createSVGElement("g");o.setAttribute("transform","translate("+r.margin.x+", "+r.margin.y+")"),r.origin=o;var u=r.overlayContainer;return u.classList.add(s.overlay),u.appendChild(r.defs),u.appendChild(o),r}return r(e,t),e}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(83),o=function(){function t(){this.element=r.svg.createSVGElement("g"),this._disabled=!1,this._editable=!1;var t=document.createElement("div");t.classList.add(i["plate-box"]);var e=r.svg.createSVGElement("foreignObject");e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.appendChild(t);var n=this.element;n.style.display="none",n.appendChild(e)}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t?this.hide():getSelection().removeAllRanges(),this._disabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editable",{get:function(){return this._editable},set:function(t){for(var e=t?"true":"false",n=this.element.childNodes[1].children[1],r=n.children,i=0,o=r;i<o.length;i++){
var a=o[i];a.contentEditable=e}},enumerable:!0,configurable:!0}),t.prototype.show=function(t,e){if(!this.disabled&&"none"===this.element.style.display){var n=this.element.firstChild,r=n.firstChild;r.innerHTML=e.join("<br>"),this.element.setAttribute("transform","translate("+t.x+", "+t.y+")"),this.element.style.display=null;var i=r.getBoundingClientRect(),o=i.width,a=i.height;n.setAttribute("transform","translate("+-o+", "+-a+")")}},t.prototype.hide=function(){this.element.style.display="none"},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(3),o=n(72),a=function(){function t(t,e,n){void 0===n&&(n=r.point(100,100));var i=o.includes(t)&&"svg"!==t?"http://www.w3.org/1999/xhtml":"http://www.w3.org/2000/svg";this.overlayContainer=document.createElementNS(i,t),this.margin=n.round(),this.bounds=e}return t.prototype.addTo=function(t){return this.onAdd(t),this},t.prototype.onAdd=function(t){this.map=t,this.minZoom=t.getMinZoom(),this.maxZoom=t.getMaxZoom(),this.updateOverlayPositioning();var e=t.getPanes(),n=e.objectsPane,i=e.markerPane,o=e.mapPane;("1"===r.version[0]?o:n).insertBefore(this.overlayContainer,i),this.addMapMovementListeners()},t.prototype.onRemove=function(t){var e=t.getPanes(),n=e.objectsPane,i=e.mapPane;("1"===r.version[0]?i:n).removeChild(this.overlayContainer),this.map.clearAllEventListeners()},t.prototype.addMapMovementListeners=function(){var t,e=this,n=this.map,o=this.overlayContainer,a=o.style,s=o.classList;s.add("leaflet-zoom-animated"),n.on("zoomanim",function(n){var r=n,o=r.scale,a=r.target;1!==o&&e.scaleOverlay(o,t||i.get(a,"scrollWheelZoom._lastMousePos")),t=null}).on("zoomend",function(t){a.transform=null,a.transformOrigin=null,e.updateOverlayPositioning(),n.fireEvent("overlayupdate",e)}),n.zoomControl.getContainer().addEventListener("mousedown",function(e){return t=r.point(innerWidth/2,innerHeight/2).round()},!0),n.on("dblclick",function(e){return t=r.DomEvent.getMousePosition(e.originalEvent)})},t.prototype.updateOverlayPositioning=function(){var t=this.bounds.getNorthWest(),e=this.bounds.getSouthEast(),n=this,i=n.map,o=n.margin;this.topLeft=i.project(t).round();var a=r.bounds(i.latLngToLayerPoint(t),i.latLngToLayerPoint(e)),s=this.overlayContainer.style,u=a.min.subtract(o);s.left=u.x+"px",s.top=u.y+"px";var c=a.getSize().add(o).add(o);s.width=c.x+"px",s.height=c.y+"px"},t.prototype.scaleOverlay=function(t,e){var n=this.overlayContainer.getBoundingClientRect(),i=n.left,o=n.top;if(!e){var a=document.documentElement;e=r.point(a.clientWidth/2,a.clientHeight/2)}var s=this.overlayContainer.style;s.transformOrigin=e.x-i+"px "+(e.y-o)+"px",s.transform="scale("+t+")"},t.prototype.extendBounds=function(t){this.bounds.extend(t),this.updateOverlayPositioning()},t.prototype.latLngToOverlayPoint=function(t){return this.map.project(t).round().subtract(this.topLeft)},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=r.Browser.retina&&!r.Browser.mobile;e.mapbox=r.tileLayer("https://{s}.tiles.mapbox.com/v3/inker.mlo91c41/{z}/{x}/{y}"+(i?"@2x":"")+".png",{detectRetina:i,attribution:'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://mapbox.com">Mapbox</a>'}),e.mapnik=r.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.osmFrance=r.tileLayer("http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",{attribution:'&copy; Openstreetmap France | &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.openMapSurfer=r.tileLayer("http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}",{attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.hyddaBase=r.tileLayer("https://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png",{attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://server.ts.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.esriGrey=r.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"}),e.cartoDB=r.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'}),e.cartoDBNoLabels=r.tileLayer("http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'}),e.wikimapia=r.tileLayer("http://i{hash}.wikimapia.org/?x={x}&y={y}&zoom={z}",{hash:function(t){return t.x%4+t.y%4*4}})},function(t,e,n){e=t.exports=n(4)(),e.push([t.i,".ui-ContextMenu-___style__contextmenu___1C6e0{position:fixed;left:0;top:0;z-index:1;background-color:#fff;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);font-family:Segoe UI,Tahoma,Ubuntu,Cambay,Roboto,sans-serif;font-size:.7em;margin-left:1px;border-collapse:collapse;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media only screen and (max-device-width:400px) and (-webkit-min-device-pixel-ratio:2){.ui-ContextMenu-___style__contextmenu___1C6e0{font-size:1.2em}}.ui-ContextMenu-___style__contextmenu___1C6e0 div{padding:5px;cursor:default}.ui-ContextMenu-___style__contextmenu___1C6e0 div[disabled]{color:grey}.ui-ContextMenu-___style__contextmenu___1C6e0 div:not([disabled]):hover{background-color:#82b1ff}",""]),e.locals={contextmenu:"ui-ContextMenu-___style__contextmenu___1C6e0"}},function(t,e,n){e=t.exports=n(4)(),e.push([t.i,".ui-FAQ-___style__faq-card___kG3d9{position:absolute;top:5%;bottom:5%;right:5%;left:5%;width:50%;margin:0 auto;padding:1%;display:none;background-color:#fff;border-radius:4px;box-shadow:0 19px 38px rgba(0,0,0,.3),0 15px 12px rgba(0,0,0,.22);font-family:Roboto,Calibri,Helvetica,sans-serif;overflow-y:scroll;-webkit-transition-property:-webkit-transform opacity;transition-property:-webkit-transform opacity;transition-property:transform opacity;transition-property:transform opacity,-webkit-transform opacity;-webkit-transition-duration:.2s;transition-duration:.2s}@media only screen and (max-width:1000px){.ui-FAQ-___style__faq-card___kG3d9{max-width:500px;width:90%}}.ui-FAQ-___style__cross-ball___1Mutj{float:right;height:12mm;width:12mm;line-height:12mm;border-radius:50%;background:#e91e63;color:#fff;font-weight:700;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.ui-FAQ-___style__cross-ball___1Mutj:hover{-webkit-filter:grayscale(.1) opacity(.8);filter:grayscale(.1) opacity(.8)}.ui-FAQ-___style__question___3KU2d{font-weight:700;display:block;margin-top:1%}.ui-FAQ-___style__answer___KxEAc{display:block;padding-bottom:1%;border-bottom:1px solid #ccc}",""]),e.locals={"faq-card":"ui-FAQ-___style__faq-card___kG3d9","cross-ball":"ui-FAQ-___style__cross-ball___1Mutj",question:"ui-FAQ-___style__question___3KU2d",answer:"ui-FAQ-___style__answer___KxEAc"}},function(t,e,n){e=t.exports=n(4)(),e.push([t.i,".ui-MapEditor-___style__edit-map-button___250xP[disabled]{cursor:not-allowed}",""]),e.locals={"edit-map-button":"ui-MapEditor-___style__edit-map-button___250xP"}},function(t,e,n){e=t.exports=n(4)(),e.push([t.i,".ui-SvgOverlay-___style__overlay___2kdYy{width:100%;height:100%;position:relative;z-index:1}",""]),e.locals={overlay:"ui-SvgOverlay-___style__overlay___2kdYy"}},function(t,e,n){e=t.exports=n(4)(),e.push([t.i,".ui-TextPlate-___style__plate-box___3BeUy{color:#000;text-anchor:end;text-align:right;font-family:Corbel,Candara,Calibri,Trebuchet MS,Ubuntu,sans-serif;font-weight:700;opacity:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);background-color:#fff;padding:1px 3px;line-height:1.3em;display:inline-block}",""]),e.locals={"plate-box":"ui-TextPlate-___style__plate-box___3BeUy"}},function(t,e){t.exports=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"]},function(t,e,n){var r;!function(i,o,a,s){"use strict";function u(t,e,n){return setTimeout(f(t,n),e)}function c(t,e,n){return!!Array.isArray(t)&&(l(t,n[e],n),!0)}function l(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function d(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}function h(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&vt(r,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==yt?t.apply(e?e[0]||s:s,e):t}function v(t,e){return t===s?e:t}function m(t,e,n){l(w(e),function(e){t.addEventListener(e,n,!1)})}function g(t,e,n){l(w(e),function(e){t.removeEventListener(e,n,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function b(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function _(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function E(t){return Array.prototype.slice.call(t,0)}function x(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];_(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function k(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<mt.length;){if(n=mt[o],r=n?n+i:e,r in t)return r;o++}return s}function S(){return kt++}function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function T(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e)},this.init()}function L(t){var e,n=t.options.inputClass;return new(e=n?n:Tt?q:Lt?V:Mt?Y:G)(t,C)}function C(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&Dt&&r-i===0,a=e&(Nt|Ft)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,A(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function A(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=P(e)),i>1&&!n.firstMultiple?n.firstMultiple=P(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=D(r);e.timeStamp=_t(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=B(s,u),e.distance=F(s,u),I(n,e),e.offsetDirection=N(e.deltaX,e.deltaY);var c=R(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=wt(c.x)>wt(c.y)?c.x:c.y,e.scale=a?z(a.pointers,r):1,e.rotation=a?j(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,O(n,e);var l=t.element;y(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function I(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Dt&&o.eventType!==Nt||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function O(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Ft&&(u>Pt||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,d=R(u,c,l);r=d.x,i=d.y,n=wt(d.x)>wt(d.y)?d.x:d.y,o=N(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function P(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:bt(t.pointers[n].clientX),clientY:bt(t.pointers[n].clientY)},n++;return{timeStamp:_t(),pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:bt(t[0].clientX),y:bt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:bt(n/e),y:bt(r/e)}}function R(t,e,n){return{x:e/t||0,y:n/t||0}}function N(t,e){return t===e?Bt:wt(t)>=wt(e)?t<0?jt:zt:e<0?Gt:qt}function F(t,e,n){n||(n=Xt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function B(t,e,n){n||(n=Xt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function j(t,e){return B(e[1],e[0],Yt)+B(t[1],t[0],Yt)}function z(t,e){return F(e[0],e[1],Yt)/F(t[0],t[1],Yt)}function G(){this.evEl=Ht,this.evWin=Zt,this.pressed=!1,T.apply(this,arguments)}function q(){this.evEl=$t,this.evWin=te,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=ne,this.evWin=re,this.started=!1,T.apply(this,arguments)}function W(t,e){var n=E(t.touches),r=E(t.changedTouches);return e&(Nt|Ft)&&(n=x(n.concat(r),"identifier",!0)),[n,r]}function V(){this.evTarget=oe,this.targetIds={},T.apply(this,arguments)}function X(t,e){var n=E(t.touches),r=this.targetIds;if(e&(Dt|Rt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=E(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return y(t.target,u)}),e===Dt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(Nt|Ft)&&delete r[a[i].identifier],i++;return s.length?[x(o.concat(s),"identifier",!0),s]:void 0}function Y(){T.apply(this,arguments);var t=f(this.handler,this);this.touch=new V(this.manager,t),this.mouse=new G(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Q(t,e){t&Dt?(this.primaryTouch=e.changedPointers[0].identifier,H.call(this,e)):t&(Nt|Ft)&&H.call(this,e)}function H(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ae)}}function Z(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=se&&a<=se)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function J(t){if(b(t,fe))return fe;var e=b(t,pe),n=b(t,ve);return e&&n?fe:e||n?e?pe:ve:b(t,he)?he:de}function $(){if(!ce)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}function tt(t){this.options=vt({},this.defaults,t||{}),this.id=S(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=ge,this.simultaneous={},this.requireFail=[]}function et(t){return t&Ee?"cancel":t&we?"end":t&be?"move":t&ye?"start":""}function nt(t){return t==qt?"down":t==Gt?"up":t==jt?"left":t==zt?"right":""}function rt(t,e){var n=e.manager;return n?n.get(t):t}function it(){tt.apply(this,arguments)}function ot(){it.apply(this,arguments),this.pX=null,this.pY=null}function at(){it.apply(this,arguments)}function st(){tt.apply(this,arguments),this._timer=null,this._input=null}function ut(){it.apply(this,arguments)}function ct(){it.apply(this,arguments)}function lt(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function dt(t,e){return e=e||{},e.recognizers=v(e.recognizers,dt.defaults.preset),new ht(t,e)}function ht(t,e){this.options=vt({},dt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=L(this),this.touchAction=new K(this,this.options.touchAction),ft(this,!0),l(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ft(t,e){var n=t.element;if(n.style){var r;l(t.options.cssProps,function(i,o){r=k(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function pt(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var vt,mt=["","webkit","Moz","MS","ms","o"],gt=o.createElement("div"),yt="function",bt=Math.round,wt=Math.abs,_t=Date.now;vt="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var Et=d(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),xt=d(function(t,e){return Et(t,e,!0)},"merge","Use `assign`."),kt=1,St=/mobile|tablet|ip(ad|hone|od)|android/i,Mt="ontouchstart"in i,Tt=k(i,"PointerEvent")!==s,Lt=Mt&&St.test(navigator.userAgent),Ct="touch",At="pen",It="mouse",Ot="kinect",Pt=25,Dt=1,Rt=2,Nt=4,Ft=8,Bt=1,jt=2,zt=4,Gt=8,qt=16,Ut=jt|zt,Wt=Gt|qt,Vt=Ut|Wt,Xt=["x","y"],Yt=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(M(this.element),this.evWin,this.domHandler)}};var Qt={mousedown:Dt,mousemove:Rt,mouseup:Nt},Ht="mousedown",Zt="mousemove mouseup";h(G,T,{handler:function(t){var e=Qt[t.type];e&Dt&&0===t.button&&(this.pressed=!0),e&Rt&&1!==t.which&&(e=Nt),this.pressed&&(e&Nt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:It,srcEvent:t}))}});var Kt={pointerdown:Dt,pointermove:Rt,pointerup:Nt,pointercancel:Ft,pointerout:Ft},Jt={2:Ct,3:At,4:It,5:Ot},$t="pointerdown",te="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&($t="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),h(q,T,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Kt[r],o=Jt[t.pointerType]||t.pointerType,a=o==Ct,s=_(e,t.pointerId,"pointerId");i&Dt&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Nt|Ft)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var ee={touchstart:Dt,touchmove:Rt,touchend:Nt,touchcancel:Ft},ne="touchstart",re="touchstart touchmove touchend touchcancel";h(U,T,{handler:function(t){var e=ee[t.type];if(e===Dt&&(this.started=!0),this.started){var n=W.call(this,t,e);e&(Nt|Ft)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ct,srcEvent:t})}}});var ie={touchstart:Dt,touchmove:Rt,touchend:Nt,touchcancel:Ft},oe="touchstart touchmove touchend touchcancel";h(V,T,{handler:function(t){var e=ie[t.type],n=X.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ct,srcEvent:t})}});var ae=2500,se=25;h(Y,T,{handler:function(t,e,n){var r=n.pointerType==Ct,i=n.pointerType==It;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Q.call(this,e,n);else if(i&&Z.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ue=k(gt.style,"touchAction"),ce=ue!==s,le="compute",de="auto",he="manipulation",fe="none",pe="pan-x",ve="pan-y",me=$();K.prototype={set:function(t){t==le&&(t=this.compute()),ce&&this.manager.element.style&&me[t]&&(this.manager.element.style[ue]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),J(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=b(r,fe)&&!me[fe],o=b(r,ve)&&!me[ve],a=b(r,pe)&&!me[pe];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}return a&&o?void 0:i||o&&n&Ut||a&&n&Wt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ge=1,ye=2,be=4,we=8,_e=we,Ee=16,xe=32;tt.prototype={defaults:{},set:function(t){return vt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(c(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=rt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return c(t,"dropRecognizeWith",this)?this:(t=rt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(c(t,"requireFailure",this))return this;var e=this.requireFail;return t=rt(t,this),_(e,t)===-1&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(c(t,"dropRequireFailure",this))return this;t=rt(t,this);var e=_(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<we&&e(n.options.event+et(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=we&&e(n.options.event+et(r))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=xe)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(xe|ge)))return!1;t++}return!0},recognize:function(t){var e=vt({},t);return p(this.options.enable,[this,e])?(this.state&(_e|Ee|xe)&&(this.state=ge),this.state=this.process(e),void(this.state&(ye|be|we|Ee)&&this.tryEmit(e))):(this.reset(),void(this.state=xe))},process:function(t){},getTouchAction:function(){},reset:function(){}},h(it,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(ye|be),i=this.attrTest(t);return r&&(n&Ft||!i)?e|Ee:r||i?n&Nt?e|we:e&ye?e|be:ye:xe}}),h(ot,it,{defaults:{event:"pan",threshold:10,pointers:1,direction:Vt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ut&&e.push(ve),t&Wt&&e.push(pe),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Ut?(i=0===o?Bt:o<0?jt:zt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?Bt:a<0?Gt:qt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return it.prototype.attrTest.call(this,t)&&(this.state&ye||!(this.state&ye)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),h(at,it,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[fe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ye)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),h(st,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[de]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Nt|Ft)&&!i)this.reset();else if(t.eventType&Dt)this.reset(),this._timer=u(function(){this.state=_e,this.tryEmit()},e.time,this);else if(t.eventType&Nt)return _e;return xe},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===_e&&(t&&t.eventType&Nt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=_t(),this.manager.emit(this.options.event,this._input)))}}),h(ut,it,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[fe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ye)}}),h(ct,it,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ut|Wt,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ut|Wt)?e=t.overallVelocity:n&Ut?e=t.overallVelocityX:n&Wt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&wt(e)>this.options.velocity&&t.eventType&Nt},emit:function(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(lt,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[he]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&Dt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Nt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||F(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var s=this.count%e.taps;if(0===s)return this.hasRequireFailures()?(this._timer=u(function(){this.state=_e,this.tryEmit()},e.interval,this),ye):_e}return xe},failTimeout:function(){return this._timer=u(function(){this.state=xe},this.options.interval,this),xe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==_e&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),dt.VERSION="2.0.7",dt.defaults={domEvents:!1,touchAction:le,enable:!0,inputTarget:null,inputClass:null,preset:[[ut,{enable:!1}],[at,{enable:!1},["rotate"]],[ct,{direction:Ut}],[ot,{direction:Ut},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ke=1,Se=2;ht.prototype={set:function(t){return vt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Se:ke},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&_e)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],e.stopped===Se||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(ye|be|we)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(c(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(c(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=_(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return l(w(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return l(w(t),function(t){e?n[t]&&n[t].splice(_(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ft(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},vt(dt,{INPUT_START:Dt,INPUT_MOVE:Rt,INPUT_END:Nt,INPUT_CANCEL:Ft,STATE_POSSIBLE:ge,STATE_BEGAN:ye,STATE_CHANGED:be,STATE_ENDED:we,STATE_RECOGNIZED:_e,STATE_CANCELLED:Ee,STATE_FAILED:xe,DIRECTION_NONE:Bt,DIRECTION_LEFT:jt,DIRECTION_RIGHT:zt,DIRECTION_UP:Gt,DIRECTION_DOWN:qt,DIRECTION_HORIZONTAL:Ut,DIRECTION_VERTICAL:Wt,DIRECTION_ALL:Vt,Manager:ht,Input:T,TouchAction:K,TouchInput:V,MouseInput:G,PointerEventInput:q,TouchMouseInput:Y,SingleTouchInput:U,Recognizer:tt,AttrRecognizer:it,Tap:lt,Pan:ot,Swipe:ct,Pinch:at,Rotate:ut,Press:st,on:m,off:g,each:l,merge:xt,extend:Et,assign:vt,inherit:h,bindFn:f,prefixed:k});var Me="undefined"!=typeof i?i:"undefined"!=typeof self?self:{};Me.Hammer=dt,r=function(){return dt}.call(e,n,e,t),!(r!==s&&(t.exports=r))}(window,document,"Hammer")},function(t,e,n){t.exports=n(70)},function(t,e,n){(function(e,n,r){var i,i;!function(e){t.exports=e()}(function(){return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var c="function"==typeof i&&i;if(!u&&c)return i(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return o(n?n:t)},d,d.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n,r){(function(t){"use strict";function e(){l=!0;for(var t,e,n=d.length;n;){for(e=d,d=[],t=-1;++t<n;)e[t]();n=d.length}l=!1}function r(t){1!==d.push(t)||l||i()}var i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var a=0,s=new o(e),u=t.document.createTextNode("");s.observe(u,{characterData:!0}),i=function(){u.data=a=++a%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var n=t.document.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},t.document.documentElement.appendChild(n)}:function(){setTimeout(e,0)};else{var c=new t.MessageChannel;c.port1.onmessage=e,i=function(){c.port2.postMessage(0)}}var l,d=[];n.exports=r}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";function r(){}function i(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,t!==r&&u(this,t)}function o(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(t,e,n){p(function(){var r;try{r=e(n)}catch(e){return v.reject(t,e)}r===t?v.reject(t,new TypeError("Cannot resolve promise with itself")):v.resolve(t,r)})}function s(t){var e=t&&t.then;
if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function u(t,e){function n(e){o||(o=!0,v.reject(t,e))}function r(e){o||(o=!0,v.resolve(t,e))}function i(){e(r,n)}var o=!1,a=c(i);"error"===a.status&&n(a.value)}function c(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function l(t){return t instanceof this?t:v.resolve(new this(r),t)}function d(t){var e=new this(r);return v.reject(e,t)}function h(t){function e(t,e){function r(t){a[e]=t,++s!==i||o||(o=!0,v.resolve(c,a))}n.resolve(t).then(r,function(t){o||(o=!0,v.reject(c,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var a=new Array(i),s=0,u=-1,c=new this(r);++u<i;)e(t[u],u);return c}function f(t){function e(t){n.resolve(t).then(function(t){o||(o=!0,v.resolve(s,t))},function(t){o||(o=!0,v.reject(s,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var a=-1,s=new this(r);++a<i;)e(t[a]);return s}var p=t(1),v={},m=["REJECTED"],g=["FULFILLED"],y=["PENDING"];e.exports=n=i,i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){if("function"!=typeof t&&this.state===g||"function"!=typeof e&&this.state===m)return this;var n=new this.constructor(r);if(this.state!==y){var i=this.state===g?t:e;a(n,i,this.outcome)}else this.queue.push(new o(n,t,e));return n},o.prototype.callFulfilled=function(t){v.resolve(this.promise,t)},o.prototype.otherCallFulfilled=function(t){a(this.promise,this.onFulfilled,t)},o.prototype.callRejected=function(t){v.reject(this.promise,t)},o.prototype.otherCallRejected=function(t){a(this.promise,this.onRejected,t)},v.resolve=function(t,e){var n=c(s,e);if("error"===n.status)return v.reject(t,n.value);var r=n.value;if(r)u(t,r);else{t.state=g,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},v.reject=function(t,e){t.state=m,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},n.resolve=l,n.reject=d,n.all=h,n.race=f},{1:1}],3:[function(t,n,r){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){}}function s(){try{if(!ut)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof r&&r.toString().indexOf("[native code")!==-1;return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}function u(){return"function"==typeof openDatabase}function c(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(t){return!1}}function l(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(e.type)}}function d(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function h(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function f(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function p(t){return new dt(function(e){var n=t.transaction(ht,"readwrite"),r=l([""]);n.objectStore(ht).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}function v(t){return"boolean"==typeof ct?dt.resolve(ct):p(t).then(function(t){return ct=t})}function m(t){var e=lt[t.name],n={};n.promise=new dt(function(t){n.resolve=t}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function g(t){var e=lt[t.name],n=e.deferredOperations.pop();n&&n.resolve()}function y(t,e){return new dt(function(n,r){if(t.db){if(!e)return n(t.db);m(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var o=ut.open.apply(ut,i);e&&(o.onupgradeneeded=function(e){var n=o.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(ht)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(t){t.preventDefault(),r(o.error)},o.onsuccess=function(){n(o.result),g(t)}})}function b(t){return y(t,!1)}function w(t){return y(t,!0)}function _(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,i=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function E(t){return new dt(function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:t.type})},r.readAsBinaryString(t)})}function x(t){var e=f(atob(t.data));return l([e],{type:t.type})}function k(t){return t&&t.__local_forage_encoded_blob}function S(t){var e=this,n=e._initReady().then(function(){var t=lt[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return h(n,t,t),n}function M(t){function e(){return dt.resolve()}var n=this,r={db:null};if(t)for(var i in t)r[i]=t[i];lt||(lt={});var o=lt[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},lt[r.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=S);for(var a=[],s=0;s<o.forages.length;s++){var u=o.forages[s];u!==n&&a.push(u._initReady().catch(e))}var c=o.forages.slice(0);return dt.all(a).then(function(){return r.db=o.db,b(r)}).then(function(t){return r.db=t,_(r,n._defaultConfig.version)?w(r):t}).then(function(t){r.db=o.db=t,n._dbInfo=r;for(var e=0;e<c.length;e++){var i=c[e];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})}function T(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new dt(function(e,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),k(t)&&(t=x(t)),e(t)},a.onerror=function(){r(a.error)}}).catch(r)});return d(r,e),r}function L(t,e){var n=this,r=new dt(function(e,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;k(r)&&(r=x(r));var i=t(r,n.key,s++);void 0!==i?e(i):n.continue()}else e()},a.onerror=function(){r(a.error)}}).catch(r)});return d(r,e),r}function C(t,e,n){var r=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new dt(function(n,i){var o;r.ready().then(function(){return o=r._dbInfo,"[object Blob]"===ft.call(e)?v(o.db).then(function(t){return t?e:E(e)}):e}).then(function(e){var r=o.db.transaction(o.storeName,"readwrite"),a=r.objectStore(o.storeName),s=a.put(e,t);null===e&&(e=void 0),r.oncomplete=function(){void 0===e&&(e=null),n(e)},r.onabort=r.onerror=function(){var t=s.error?s.error:s.transaction.error;i(t)}}).catch(i)});return d(i,n),i}function A(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new dt(function(e,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readwrite"),a=o.objectStore(i.storeName),s=a.delete(t);o.oncomplete=function(){e()},o.onerror=function(){r(s.error)},o.onabort=function(){var t=s.error?s.error:s.transaction.error;r(t)}}).catch(r)});return d(r,e),r}function I(t){var e=this,n=new dt(function(t,n){e.ready().then(function(){var r=e._dbInfo,i=r.db.transaction(r.storeName,"readwrite"),o=i.objectStore(r.storeName),a=o.clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=a.error?a.error:a.transaction.error;n(t)}}).catch(n)});return d(n,t),n}function O(t){var e=this,n=new dt(function(t,n){e.ready().then(function(){var r=e._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}}).catch(n)});return d(n,t),n}function P(t,e){var n=this,r=new dt(function(e,r){return t<0?void e(null):void n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=!1,s=o.openCursor();s.onsuccess=function(){var n=s.result;return n?void(0===t?e(n.key):a?e(n.key):(a=!0,n.advance(t))):void e(null)},s.onerror=function(){r(s.error)}}).catch(r)});return d(r,e),r}function D(t){var e=this,n=new dt(function(t,n){e.ready().then(function(){var r=e._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.openCursor(),a=[];o.onsuccess=function(){var e=o.result;return e?(a.push(e.key),void e.continue()):void t(a)},o.onerror=function(){n(o.error)}}).catch(n)});return d(n,t),n}function R(t){var e,n,r,i,o,a=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(e=0;e<s;e+=4)n=vt.indexOf(t[e]),r=vt.indexOf(t[e+1]),i=vt.indexOf(t[e+2]),o=vt.indexOf(t[e+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c}function N(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=vt[n[e]>>2],r+=vt[(3&n[e])<<4|n[e+1]>>4],r+=vt[(15&n[e+1])<<2|n[e+2]>>6],r+=vt[63&n[e+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function F(t,e){var n="";if(t&&(n=Ot.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===Ot.call(t.buffer))){var r,i=yt;t instanceof ArrayBuffer?(r=t,i+=wt):(r=t.buffer,"[object Int8Array]"===n?i+=Et:"[object Uint8Array]"===n?i+=xt:"[object Uint8ClampedArray]"===n?i+=kt:"[object Int16Array]"===n?i+=St:"[object Uint16Array]"===n?i+=Tt:"[object Int32Array]"===n?i+=Mt:"[object Uint32Array]"===n?i+=Lt:"[object Float32Array]"===n?i+=Ct:"[object Float64Array]"===n?i+=At:e(new Error("Failed to get type for BinaryArray"))),e(i+N(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=mt+t.type+"~"+N(this.result);e(yt+_t+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}}function B(t){if(t.substring(0,bt)!==yt)return JSON.parse(t);var e,n=t.substring(It),r=t.substring(bt,It);if(r===_t&&gt.test(n)){var i=n.match(gt);e=i[1],n=n.substring(i[0].length)}var o=R(n);switch(r){case wt:return o;case _t:return l([o],{type:e});case Et:return new Int8Array(o);case xt:return new Uint8Array(o);case kt:return new Uint8ClampedArray(o);case St:return new Int16Array(o);case Tt:return new Uint16Array(o);case Mt:return new Int32Array(o);case Lt:return new Uint32Array(o);case Ct:return new Float32Array(o);case At:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}function j(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var i=new dt(function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){e._dbInfo=n,t()},function(t,e){r(e)})})});return n.serializer=Pt,i}function z(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new dt(function(e,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)},function(t,e){r(e)})})}).catch(r)});return d(r,e),r}function G(t,e){var n=this,r=new dt(function(e,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var u=o.item(s),c=u.value;if(c&&(c=i.serializer.deserialize(c)),c=t(c,u.key,s+1),void 0!==c)return void e(c)}e()},function(t,e){r(e)})})}).catch(r)});return d(r,e),r}function q(t,e,n,r){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new dt(function(o,a){i.ready().then(function(){void 0===e&&(e=null);var s=e,u=i._dbInfo;u.serializer.serialize(e,function(e,c){c?a(c):u.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){o(s)},function(t,e){a(e)})},function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void o(q.apply(i,[t,s,n,r-1]));a(e)}})})}).catch(a)});return d(o,n),o}function U(t,e,n){return q.apply(this,[t,e,n,1])}function W(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new dt(function(e,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){r(e)})})}).catch(r)});return d(r,e),r}function V(t){var e=this,n=new dt(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){e.executeSql("DELETE FROM "+r.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return d(n,t),n}function X(t){var e=this,n=new dt(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){e.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(e,n){var r=n.rows.item(0).c;t(r)},function(t,e){n(e)})})}).catch(n)});return d(n,t),n}function Y(t,e){var n=this,r=new dt(function(e,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)},function(t,e){r(e)})})}).catch(r)});return d(r,e),r}function Q(t){var e=this,n=new dt(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){e.executeSql("SELECT key FROM "+r.storeName,[],function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)},function(t,e){n(e)})})}).catch(n)});return d(n,t),n}function H(t){var e=this,n={};if(t)for(var r in t)n[r]=t[r];return n.keyPrefix=n.name+"/",n.storeName!==e._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),e._dbInfo=n,n.serializer=Pt,dt.resolve()}function Z(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}});return d(n,t),n}function K(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=n.ready().then(function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r});return d(r,e),r}function J(t,e){var n=this,r=n.ready().then(function(){for(var e=n._dbInfo,r=e.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=e.serializer.deserialize(c)),c=t(c,u.substring(i),a++),void 0!==c)return c}}});return d(r,e),r}function $(t,e){var n=this,r=n.ready().then(function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e});return d(r,e),r}function tt(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++)0===localStorage.key(i).indexOf(t.keyPrefix)&&r.push(localStorage.key(i).substring(t.keyPrefix.length));return r});return d(n,t),n}function et(t){var e=this,n=e.keys().then(function(t){return t.length});return d(n,t),n}function nt(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return d(r,e),r}function rt(t,e,n){var r=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=r.ready().then(function(){void 0===e&&(e=null);var n=e;return new dt(function(i,o){var a=r._dbInfo;a.serializer.serialize(e,function(e,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+t,e),i(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}})})});return d(i,n),i}function it(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function ot(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(qt(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}function at(t){for(var e in Ft)if(Ft.hasOwnProperty(e)&&Ft[e]===t)return!0;return!1}var st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut=a();"undefined"==typeof n&&t(3);var ct,lt,dt=n,ht="local-forage-detect-blob-support",ft=Object.prototype.toString,pt={_driver:"asyncStorage",_initStorage:M,iterate:L,getItem:T,setItem:C,removeItem:A,clear:I,length:O,key:P,keys:D},vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt="~~local_forage_type~",gt=/^~~local_forage_type~([^~]+)~/,yt="__lfsc__:",bt=yt.length,wt="arbf",_t="blob",Et="si08",xt="ui08",kt="uic8",St="si16",Mt="si32",Tt="ur16",Lt="ui32",Ct="fl32",At="fl64",It=bt+wt.length,Ot=Object.prototype.toString,Pt={serialize:F,deserialize:B,stringToBuffer:R,bufferToString:N},Dt={_driver:"webSQLStorage",_initStorage:j,iterate:G,getItem:z,setItem:U,removeItem:W,clear:V,length:X,key:Y,keys:Q},Rt={_driver:"localStorageWrapper",_initStorage:H,iterate:J,getItem:K,setItem:rt,removeItem:nt,clear:Z,length:et,key:$,keys:tt},Nt={},Ft={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Bt=[Ft.INDEXEDDB,Ft.WEBSQL,Ft.LOCALSTORAGE],jt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],zt={description:"",driver:Bt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Gt={};Gt[Ft.INDEXEDDB]=s(),Gt[Ft.WEBSQL]=u(),Gt[Ft.LOCALSTORAGE]=c();var qt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Ut=function(){function t(e){o(this,t),this.INDEXEDDB=Ft.INDEXEDDB,this.LOCALSTORAGE=Ft.LOCALSTORAGE,this.WEBSQL=Ft.WEBSQL,this._defaultConfig=ot({},zt),this._config=ot({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===("undefined"==typeof t?"undefined":st(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new dt(function(e,n){try{var r=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),o=new Error("Custom driver name already in use: "+t._driver);if(!t._driver)return void n(i);if(at(t._driver))return void n(o);for(var a=jt.concat("_initStorage"),s=0;s<a.length;s++){var u=a[s];if(!u||!t[u]||"function"!=typeof t[u])return void n(i)}var c=dt.resolve(!0);"_support"in t&&(c=t._support&&"function"==typeof t._support?t._support():dt.resolve(!!t._support)),c.then(function(n){Gt[r]=n,Nt[r]=t,e()},n)}catch(t){n(t)}});return h(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=this,i=dt.resolve().then(function(){if(!at(t)){if(Nt[t])return Nt[t];throw new Error("Driver not found.")}switch(t){case r.INDEXEDDB:return pt;case r.LOCALSTORAGE:return Rt;case r.WEBSQL:return Dt}});return h(i,e,n),i},t.prototype.getSerializer=function(t){var e=dt.resolve(Pt);return h(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return h(n,t,t),n},t.prototype.setDriver=function(t,e,n){function r(){a._config.driver=a.driver()}function i(t){return a._extend(t),r(),a._ready=a._initStorage(a._config),a._ready}function o(t){return function(){function e(){for(;n<t.length;){var o=t[n];return n++,a._dbInfo=null,a._ready=null,a.getDriver(o).then(i).catch(e)}r();var s=new Error("No available storage method found.");return a._driverSet=dt.reject(s),a._driverSet}var n=0;return e()}}var a=this;qt(t)||(t=[t]);var s=this._getSupportedDrivers(t),u=null!==this._driverSet?this._driverSet.catch(function(){return dt.resolve()}):dt.resolve();return this._driverSet=u.then(function(){var t=s[0];return a._dbInfo=null,a._ready=null,a.getDriver(t).then(function(t){a._driver=t._driver,r(),a._wrapLibraryMethodsWithReady(),a._initDriver=o(s)})}).catch(function(){r();var t=new Error("No available storage method found.");return a._driverSet=dt.reject(t),a._driverSet}),h(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!Gt[t]},t.prototype._extend=function(t){ot(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<jt.length;t++)it(this,jt[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),Wt=new Ut;e.exports=Wt},{3:3}]},{},[4])(4)})}).call(e,n(10),n(0),n(25))},function(t,e,n){"use strict";t.exports=n(76)},function(t,e,n){"use strict";function r(){for(var t="",e=0,n=document.styleSheets;e<n.length;e++){var r=n[e];console.log(r.cssText);var i=r.cssRules;if(i)for(var o=0,a=i;o<a.length;o++){var s=a[o];t+=s.cssText}else console.log(r)}return console.log("css text ready"),t}e.getStyleRulesAsText=r},function(t,e,n){"use strict";(function(t){function r(t,e){var n=document.createElement("a");n.href=e,n.download=t,n.click()}function i(t,e,n){o(e,n).then(function(e){return r(t,e)})}function o(t,e){return a(t).then(function(t){return t.toDataURL("image/"+e)})}function a(e){return new t(function(t,n){var r=u(e,!0);r.onload=function(e){var i=document.createElement("canvas");i.width=r.width,i.height=r.height;var o=i.getContext("2d");return o?(o.drawImage(r,0,0),void t(i)):n(new Error("2d context does not exist on canvas"))}})}function s(t){var e=o(t,"png"),n=document.createElement("img");return n.width=parseInt(t.getAttribute("width")||"")||parseInt(t.style.width||""),n.height=parseInt(t.getAttribute("height")||"")||parseInt(t.style.height||""),e.then(function(t){return n.src=t,n})}function u(t,e){void 0===e&&(e=!1),e&&(t=l(t));var n=document.createElement("img");return n.width=parseInt(t.getAttribute("width")||"")||parseInt(t.style.width||""),n.height=parseInt(t.getAttribute("height")||"")||parseInt(t.style.height||""),n.src=c(t),n}function c(t){return"data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(t))}function l(t){for(var e=t.cloneNode(!0),n=e.querySelectorAll("[id^=dummy]"),r=0,i=n;r<i.length;r++){var o=i[r],a=o.parentNode;a&&a.removeChild(o)}e.style.left=e.style.top="";var s=e.querySelector("#station-plate");if(s){var u=s.parentNode;u&&u.removeChild(s)}var c=document.createElement("style");c.textContent=d.getStyleRulesAsText();var l=e.querySelector("defs");return l&&l.insertBefore(c,l.firstChild),e}var d=n(75);e.downloadSvgAsPicture=i,e.svgToPictureDataUrl=o,e.svgToCanvas=a,e.svgToPicture=s,e.svgToImg=u,e.svgToDataUrl=c}).call(e,n(0))},function(t,e,n){"use strict";t.exports=n(78)},function(t,e,n){"use strict";function r(t){for(var e=0,n=t;e<n.length;e++){var r=n[e].style;r&&r.transform&&(r.transform=r.transform.replace(a,s))}}var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o={interval:1e3,element:document.body,skipIf:void 0,log:!1,allBrowsers:!1},a=/(translate|scale)3d\s*\((.+?,\s*.+?),\s*.+?\s*\)/gi,s="$1($2)",u='[style*="translate3d"], [style*="scale3d"]',c=!1;e.default=function(t){if(void 0===t&&(t={}),c)throw new Error("unblur can be called only once!");c=!0;var e=i({},o,t),n=e.interval,a=e.element,s=e.skipIf,l=e.log,d=e.allBrowsers,h=navigator.userAgent,f=h.includes("AppleWebKit")&&!h.includes("Mobile");if(!d&&!f)return void(l&&console.log("not desktop webkit, do nothing"));l&&console.log("running unblur");var p=0===n?requestAnimationFrame:function(t){return setTimeout(t,n)};!function t(){if(s&&s())l&&console.log("cancelled");else{var e=a.querySelectorAll(u);e.length>0&&(l&&console.log("fixing translate3d:",e.length,"elements"),r(e))}p(t)}()}},function(t,e,n){var r=n(65);"string"==typeof r&&(r=[[t.i,r,""]]);n(5)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(66);"string"==typeof r&&(r=[[t.i,r,""]]);n(5)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(67);"string"==typeof r&&(r=[[t.i,r,""]]);n(5)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(68);"string"==typeof r&&(r=[[t.i,r,""]]);n(5)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(69);"string"==typeof r&&(r=[[t.i,r,""]]);n(5)(r,{});r.locals&&(t.exports=r.locals)}]));
//# sourceMappingURL=1.9d765a4faade09499eeb.js.map